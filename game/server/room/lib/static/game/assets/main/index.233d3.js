System.register("chunks:///_virtual/SeatSelectUi.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UiSeat.ts","./Board.ts"],(function(t){"use strict";var e,i,s,n,a,r,o,c,u,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.defineProperty},function(t){r=t.cclegacy,o=t._decorator,c=t.Label,u=t.Component},function(t){l=t.UiSeat},function(t){h=t.Board}],execute:function(){var S,m,p,v,d;r._RF.push({},"1e4b1+9b/hCBJCuOZO8/KFH","SeatSelectUi",void 0);var f=o.ccclass,T=o.property;t("SeatSelectUi",(S=f("SeatSelectUi"),m=T(c),S((d=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,s(n(e),"lbTimer",d,n(e)),a(n(e),"uiSeats",[]),a(n(e),"btnTakeSeats",[]),a(n(e),"callback",null),a(n(e),"isWaitingResult",!1),a(n(e),"timerId",0),a(n(e),"count",0),a(n(e),"isOpen",!1),a(n(e),"limitTime",0),a(n(e),"pauseTimer",!1),e}i(e,t);var r=e.prototype;return r.init=function(t,e){this.isWaitingResult=!1;var i=t;this.callback=e;var s,n=this.node.getChildByPath("seats_9p"),a=this.node.getChildByPath("seats_6p"),r="seats_"+i+"p";n.name===r?(n.active=!0,a.active=!1,s=n):(n.active=!1,a.active=!0,s=a),this.uiSeats=[];for(var o=0;o<s.children.length;o++){var c=s.children[o];if(null!=c){var u=c.getComponent(l);null!=u&&(u.childRegistered(),u.setShowReserve(!1),u.setShowEntity(!1),this.uiSeats.push(u))}}for(var h=0;h<this.uiSeats.length;h++)this.btnTakeSeats[h]=this.uiSeats[h].getTakeButton();this.lbTimer.string="",this.pauseTimer=!0},r.updateSeatInfo=function(t,e,i,s,n){for(var a=this,r=0;r<this.btnTakeSeats.length;r++){var o=this.btnTakeSeats[r];if(null==o);else{if(r>=this.uiSeats.length){o.node.active=!1;continue}o.node.active=!0,o.node.off("click"),o.node.on("click",this.onClickSeatButton.bind(this,r),this)}}for(var c=function(r){var o=e[r];if(2==o){a.uiSeats[r].setShowEntity(!0),a.uiSeats[r].setShowReserve(!1);var c=t.find((function(t){return t.seat===r}));return null!=c&&(a.uiSeats[r].setUi(c),i>-1&&c.seat===i&&a.uiSeats[r].setUiPosSymbol("bb"),s>-1&&c.seat===s&&a.uiSeats[r].setUiPosSymbol("sb"),n>-1&&c.seat===n&&a.uiSeats[r].setUiPosSymbol("dealer")),a.btnTakeSeats[r].node.active=!1,"continue"}if(1==o)return a.uiSeats[r].setEscapee(),a.btnTakeSeats[r].node.active=!1,a.uiSeats[r].setShowEntity(!1),a.uiSeats[r].setShowReserve(!0),"continue";a.uiSeats[r].setShowEntity(!1),a.uiSeats[r].setShowReserve(!1),a.uiSeats[r].setEscapee(),a.uiSeats[r].setNickName("empty")},u=0;u<e.length;u++)c(u)},r.startSeatsSelect=function(t){var e=this;1!=this.node.active&&(this.count=0,this.isOpen=!0,this.pauseTimer=!1,t>0&&(this.limitTime=t,this.timerId=setInterval((function(){return e.checkTimer()}),6e4)),this.node.active=!0)},r.end=function(){0!=this.node.active&&(this.clearTimer(),this.isOpen=!1,this.pauseTimer=!1,this.node.active=!1)},r.onClickSeatButton=function(t){null!=this.callback&&!0!==this.isWaitingResult&&(this.isWaitingResult=!0,this.callback(t))},r.pause=function(){1==this.isOpen&&(this.pauseTimer=!0)},r.unpause=function(){var t=this;1==this.isOpen&&(this.pauseTimer=!1,clearInterval(this.timerId),this.timerId=setInterval((function(){return t.checkTimer()}),6e4))},r.onResultFail=function(){this.isWaitingResult=!1},r.checkTimer=function(){0!=this.isOpen?1!=this.pauseTimer&&(this.count++,this.count>=this.limitTime?(console.log("Seats select is close cause by timeout",this.limitTime,this.count),this.leaveRoom()):this.lbTimer.string=(this.limitTime-this.count).toString()):clearInterval(this.timerId)},r.checkTimerId=function(){-1!=this.timerId&&(clearInterval(this.timerId),this.timerId=-1)},r.clearTimer=function(){clearInterval(this.timerId),this.count=0,this.timerId=-1},r.isSeatsSelectOpen=function(){return this.isOpen},r.leaveRoom=function(){this.clearTimer(),this.isOpen=!1,this.timerId=-1,this.node.active=!1,h.table.leave()},e}(u)).prototype,"lbTimer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,n,t,r,o,a,u,l,c,p;return{setters:[function(e){i=e.defineProperty,n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,u=e._decorator,l=e.AudioClip,c=e.AudioSource,p=e.Component}],execute:function(){var d,s,f,h,y,S,b,g,C,m,w,O,z,H,M,v,B,k,L,A,F,T,I,E,_,D,G,P,R,N,U,j,q,x,V,W,J,K,Q,X,Y,Z,$;a._RF.push({},"2f6b2MRg6dEmqICk/nSNcMN","AudioManager",void 0);var ee=u.ccclass,ie=u.property;e("AudioManager",(d=ee("AudioManager"),s=ie(l),f=ie(l),h=ie(l),y=ie(l),S=ie(l),b=ie(l),g=ie(l),C=ie(l),m=ie(l),w=ie(l),O=ie(l),z=ie(l),H=ie(l),M=ie(l),v=ie(l),B=ie(l),k=ie(l),L=ie(c),A=ie(c),d(($=Z=function(e){function i(){for(var i,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return i=e.call.apply(e,[this].concat(t))||this,r(o(i),"buttonClick",I,o(i)),r(o(i),"allIn",E,o(i)),r(o(i),"fold",_,o(i)),r(o(i),"bet",D,o(i)),r(o(i),"check",G,o(i)),r(o(i),"call",P,o(i)),r(o(i),"raise",R,o(i)),r(o(i),"shufflingCards",N,o(i)),r(o(i),"chipMoveStart",U,o(i)),r(o(i),"chipMoveEnd",j,o(i)),r(o(i),"dispensing",q,o(i)),r(o(i),"showCenterCard",x,o(i)),r(o(i),"upendCenterCard",V,o(i)),r(o(i),"putHandCard",W,o(i)),r(o(i),"upendHandCard",J,o(i)),r(o(i),"hideHandHiddenCard",K,o(i)),r(o(i),"win",Q,o(i)),r(o(i),"audioSource",X,o(i)),r(o(i),"audioSourceTimeLimitFourSec",Y,o(i)),i}t(i,e);var n=i.prototype;return n.start=function(){console.log("[ AudioManager ] start"),i.instance=this},n.playBGM=function(){this.audioSource.play()},n.stopBGM=function(){this.audioSource.stop()},n.pauseBGM=function(){this.audioSource.pause()},n.resumeBGM=function(){this.audioSource.play()},n.playButtonClick=function(){this.audioSource.playOneShot(this.buttonClick)},n.playAllIn=function(){this.audioSource.playOneShot(this.allIn)},n.playFold=function(){this.audioSource.playOneShot(this.fold)},n.playBet=function(){this.audioSource.playOneShot(this.bet)},n.playCheck=function(){this.audioSource.playOneShot(this.check)},n.playCall=function(){this.audioSource.playOneShot(this.call)},n.playRaise=function(){this.audioSource.playOneShot(this.raise)},n.playShufflingCards=function(){this.audioSource.playOneShot(this.shufflingCards)},n.playChipMoveStart=function(){this.audioSource.playOneShot(this.chipMoveStart)},n.playChipMoveEnd=function(){this.audioSource.playOneShot(this.chipMoveEnd)},n.playCardDispensing=function(){this.audioSource.playOneShot(this.dispensing)},n.playPutHandCard=function(){this.audioSource.playOneShot(this.putHandCard)},n.playUpendHandCard=function(){this.audioSource.playOneShot(this.upendHandCard)},n.playHideHandHiddenCard=function(){this.audioSource.playOneShot(this.hideHandHiddenCard)},n.playShowCenterCard=function(){this.audioSource.playOneShot(this.showCenterCard)},n.playUpendCenterCard=function(){this.audioSource.playOneShot(this.upendCenterCard)},n.playWin=function(){this.audioSource.playOneShot(this.win)},n.playShowHand=function(){this.audioSource.playOneShot(this.putHandCard)},n.playTimeLimitFourSec=function(){this.audioSourceTimeLimitFourSec.play()},n.stopTimeLimitFourSec=function(){this.audioSourceTimeLimitFourSec.stop()},n.getLocalStorageBgmToggleValue=function(){var e=localStorage.getItem("savedBgmOnOff");return"on"===e||null===e},n.setLocalStorageBgmToggleOnOff=function(e){localStorage.setItem("savedBgmOnOff",1==e?"on":"off")},i}(p),i(Z,"instance",null),I=n((T=$).prototype,"buttonClick",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(T.prototype,"allIn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(T.prototype,"fold",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(T.prototype,"bet",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(T.prototype,"check",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(T.prototype,"call",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(T.prototype,"raise",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(T.prototype,"shufflingCards",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(T.prototype,"chipMoveStart",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(T.prototype,"chipMoveEnd",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(T.prototype,"dispensing",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(T.prototype,"showCenterCard",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(T.prototype,"upendCenterCard",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(T.prototype,"putHandCard",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(T.prototype,"upendHandCard",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(T.prototype,"hideHandHiddenCard",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(T.prototype,"win",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(T.prototype,"audioSource",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(T.prototype,"audioSourceTimeLimitFourSec",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=T))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/UiPot.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts"],(function(t){"use strict";var o,e,i,n,r,l,a,u,s,c,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,i=t.inheritsLoose,n=t.assertThisInitialized,r=t.defineProperty},function(t){l=t.cclegacy,a=t._decorator,u=t.Node,s=t.Label,c=t.Component},function(t){p=t.CommonUtils}],execute:function(){var h,b,f,g,P,v,m,y,C,L,R,w,U,d,x,z,S,k,_,D;l._RF.push({},"56f114Lg+5BoKpegpes+WSs","UiPot",void 0);var B=a.ccclass,E=a.property,F=t("Pot",(h=B("Pot"),b=E(u),f=E(s),h((v=o((P=function(){e(this,"showRoot",v,this),e(this,"valueLabel",m,this)}).prototype,"showRoot",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=o(P.prototype,"valueLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=P))||g));t("UiPot",(y=B("UiPot"),C=E(s),L=E(u),R=E(u),w=E(s),U=E(F),y((z=o((x=function(t){function o(){for(var o,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return o=t.call.apply(t,[this].concat(l))||this,e(n(o),"maxPotLabel",z,n(o)),e(n(o),"maxPotLabelRoot",S,n(o)),e(n(o),"potCountRoot",k,n(o)),e(n(o),"lbPotCount",_,n(o)),e(n(o),"potUi",D,n(o)),r(n(o),"svPots",null),r(n(o),"potCount",0),o}i(o,t);var l=o.prototype;return l.Show=function(t){if(null!=t)if(t.length<1)console.error("pots is 1 < ");else{var o=[];t.sort((function(t,o){return t.players.length>o.players.length?-1:1})),t.forEach((function(t){t.players.length<=1||o.push(t)})),this.SetPotCount(o.length),this.svPots=t;for(var e=0;e<this.potUi.length;e++){var i=this.potUi[e];if(e>=o.length)i.showRoot.active=!1;else{var n=o[e];i.valueLabel.string=null!=n.rake&&n.rake>0?p.getCurrencyString(n.total-n.rake)+" / "+n.rake:p.getCurrencyString(n.total),i.showRoot.active=!0}}}else console.error("pots is null")},l.UpdatePotTotal=function(t){this.maxPotLabel.node.active=!0,this.maxPotLabel.string=p.getCurrencyString(t),this.maxPotLabelRoot.active=!0},l.GetPots=function(){return this.potUi},l.SetPotCount=function(t){t>1?(this.potCountRoot.active=!0,this.lbPotCount.string=t.toString()):this.potCountRoot.active=!1},l.ClearPotCount=function(){this.potCountRoot.active=!1,this.lbPotCount.string=""},l.Hide=function(){this.potUi.forEach((function(t){t.valueLabel.string="0",t.showRoot.active=!1})),this.ClearPotCount(),this.svPots=null,this.maxPotLabelRoot.active=!1,this.maxPotLabel.node.active=!1,this.maxPotLabel.string="0"},o}(c)).prototype,"maxPotLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=o(x.prototype,"maxPotLabelRoot",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=o(x.prototype,"potCountRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=o(x.prototype,"lbPotCount",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=o(x.prototype,"potUi",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=x))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./colyseus.js","./colyseus.mjs_cjs=&original=.js"],(function(e){"use strict";var t,n,r,s,a,o,i,u,c;return{setters:[function(e){t=e.defineProperty,n=e.inheritsLoose,r=e.assertThisInitialized,s=e.asyncToGenerator},function(e){a=e.cclegacy,o=e._decorator,i=e.loader,u=e.Component},function(e){c=e.default},null],execute:function(){var l,h,p;a._RF.push({},"63f66jw2o9LYK6ihuBQtaHE","NetworkManager",void 0);var f=o.ccclass;e("NetworkManager",f("NetworkManager")((p=h=function(e){function a(){for(var n,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,t(r(n),"hostname","54.227.180.170"),t(r(n),"port",2568),t(r(n),"useSSL",!1),t(r(n),"leaveReason",-1),t(r(n),"getQueryStringParams",(function(){var e=window.location.search.substr(1).split("&");if(0===e.length)return{};for(var t={},n=0;n<e.length;++n){var r=e[n].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t})),n}n(a,e),a.Instance=function(){return null==this._instance&&(this._instance=new a),this._instance};var o=a.prototype;return o.httpPost=function(e,t){var n=this;return new Promise((function(r,s){var a=i.getXMLHttpRequest();a.onreadystatechange=function(){if(4===a.readyState&&a.status>=200&&a.status<300){var e=a.responseText;r(e)}if(4===a.readyState&&200!=a.status){var t=a.responseText;s(t)}};var o="http://"+n.hostname+":"+n.port+e;console.log(o),a.open("POST",o,!0),a.timeout=5e3,a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(t))}))},o.joinGame=function(){var e=s(regeneratorRuntime.mark((function e(t,n,r){var s,a,o,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=parseInt(t),a=this.getQueryStringParams(),console.log("enter options",s,a.tk),o=null,i=null,e.next=7,this.httpPost("/users/auth",{token:a.tk,pinCode:s,talbeSize:"full"}).then((function(e){o=e})).catch((function(e){if(0===e.length)return i="NETWORK ERROR";e=JSON.parse(e),i=e.msg}));case 7:if(null===i){e.next=9;break}return e.abrupt("return",r(i));case 9:if(null!==o){e.next=11;break}return e.abrupt("return",r("reservation data is invalid."));case 11:o=JSON.parse(o),this.client=new c.Client((this.useSSL?"wss":"ws")+"://"+this.hostname+([443,80].includes(this.port)||this.useSSL?"":":"+this.port)),this.client.consumeSeatReservation(o.seatReservation).then((function(e){u.room=e,n(u.room,a.ts)})).catch((function(e){console.error("[ joinGame ] consumeSeatReservation. error : "+JSON.stringify(e.message)),r(e.message)}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),a}(u),t(h,"_instance",null),l=p))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/UiLogin.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Board.ts","./NetworkManager.ts","./UiTable.ts","./UiLoginNotice.ts"],(function(t){"use strict";var n,e,i,o,s,r,a,l,c,h,u,d,g,b,p,v,f,L;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty},function(t){r=t.cclegacy,a=t._decorator,l=t.Button,c=t.Label,h=t.EditBox,u=t.EventHandler,d=t.director,g=t.screen,b=t.Component},function(t){p=t.Board},function(t){v=t.NetworkManager},function(t){f=t.UiTable},function(t){L=t.UiLoginNotice}],execute:function(){var E,N,m,P,B;r._RF.push({},"6a9416k9P9Ko6vPykKnEfhn","UiLogin",void 0);var C=a.ccclass,I=a.property;t("UiLogin",(E=C("UiLogin"),N=I(L),E((B=n((P=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(o(n),"uiNotice",B,o(n)),s(o(n),"pinLength",8),s(o(n),"btnEnter",null),s(o(n),"edInputPin",null),s(o(n),"lbLoginState",null),s(o(n),"lbNotice",null),s(o(n),"lbNoticeMsg",null),n}e(n,t);var r=n.prototype;return r.onLoad=function(){var t,n,e,i,o,s;this.btnEnter=null===(t=this.node.getChildByPath("btn_enter"))||void 0===t?void 0:t.getComponent(l),this.btnEnter.interactable=!1,this.lbLoginState=null===(n=this.node.getChildByPath("btn_enter/Label"))||void 0===n?void 0:n.getComponent(c),this.edInputPin=null===(e=this.node.getChildByPath("ed_inputPin"))||void 0===e?void 0:e.getComponent(h),this.edInputPin.maxLength=this.pinLength;var r=new u;r.target=this.node,r.component="UiLogin",r.handler="onEditBoxReturn",r.customEventData="???",null===(i=this.edInputPin)||void 0===i||i.editingReturn.push(r);var a=new u;a.target=this.node,a.component="UiLogin",a.handler="onEditBoxChanged",a.customEventData="???",null===(o=this.edInputPin)||void 0===o||o.textChanged.push(a);var d=new u;d.target=this.node,d.component="UiLogin",d.handler="onEditingDidBegan",d.customEventData="???",this.edInputPin.editingDidBegan.push(d),null===(s=this.btnEnter)||void 0===s||s.node.on("click",this.onClickEnter.bind(this),this),this.lbLoginState.string="Enter",this.lbNotice=this.node.getChildByPath("lbNotice").getComponent(c),this.lbNoticeMsg=this.node.getChildByPath("lbNotice/lbMsg").getComponent(c),this.uiNotice.init()},r.start=function(){var t=v.Instance().leaveReason;if(v.Instance().leaveReason=-1,-1!=t){switch(t){case 4e3:this.uiNotice.notice("You have been removed from the table for\n time out ");break;case 4001:this.uiNotice.notice("You have been removed from the table for\nmissing 1 rounds of big blinds ")}console.error("Login Scene LeaveReason : "+t)}},r.onClickEnter=function(){this.lbLoginState.string="Entering..",v.Instance().joinGame(this.edInputPin.string,this.onLoginSuccese.bind(this),this.failLogin.bind(this)),this.btnEnter.interactable=!1},r.onEditBoxReturn=function(){this.pinLength==this.edInputPin.string.length?this.onClickEnter():console.log(this.edInputPin.string)},r.onEditBoxChanged=function(){this.btnEnter.interactable=this.edInputPin.string.length==this.pinLength},r.onEditingDidBegan=function(){this.edInputPin.string="",this.lbLoginState.string="Enter",!0===this.lbNotice.node.active&&(this.lbNotice.node.active=!1)},r.onLoginSuccese=function(t,n){p.room=t,f.seatMaxFromServer="short"===n?6:9,d.loadScene("scene")},r.failLogin=function(t){console.log("enter fail call"),this.setNoticeMessage(t),this.lbLoginState.string="Enter Fail",this.edInputPin.string="",this.btnEnter.interactable=!1},r.enableLoginBtn=function(){this.btnEnter.interactable=!0},r.show=function(){this.node.active=!0,this.edInputPin.string="",this.onEditBoxChanged(),!0===this.lbNotice.node.active&&(this.lbNotice.node.active=!1),g.exitFullScreen()},r.hide=function(){this.node.active=!1},r.setNoticeMessage=function(t){null!==this.lbNotice?(!1===this.lbNotice.node.active&&(this.lbNotice.node.active=!0),this.lbNoticeMsg.string=t):console.error("Notice Label is null.")},n}(b)).prototype,"uiNotice",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,a;return{setters:[function(e){t=e.defineProperty},function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"6bde6GsXrxA5pPqOWeSXpWa","Board",void 0);var r=e("Board",(function(){}));t(r,"balance",0),t(r,"small",0),t(r,"big",0),t(r,"passPrice",0),t(r,"passTerm",0),t(r,"id",0),t(r,"room",null),t(r,"table",null),t(r,"minStakeRatio",0),t(r,"maxStakeRatio",0),a._RF.pop()}}}));

System.register("chunks:///_virtual/UiSeat.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts"],(function(t){"use strict";var e,i,s,n,o,r,a,l,c,h,p,u,b,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.defineProperty},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,c=t.Button,h=t.Sprite,p=t.Label,u=t.resources,b=t.Component},function(t){y=t.CommonUtils}],execute:function(){var d,m,v,g,f,S,C,N,k;r._RF.push({},"79bc7J+uEdD+4TwY8uGeFqO","UiSeat",void 0);var P=a.ccclass,R=a.property;t("UiSeat",(d=P("UiSeat"),m=R(l),v=R(c),g=R(h),d((C=e((S=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,s(n(e),"entity",C,n(e)),s(n(e),"btnTakeSeat",N,n(e)),s(n(e),"sprReserve",k,n(e)),o(n(e),"isChildRegistered",!1),o(n(e),"lbNickName",null),o(n(e),"lbChips",null),o(n(e),"sprSelected",null),o(n(e),"posSymbols",{}),o(n(e),"sprAvatar",null),e}i(e,t);var r=e.prototype;return r.childRegistered=function(){1!=this.isChildRegistered&&(this.isChildRegistered=!0,this.lbNickName=this.entity.getChildByPath("lb_name").getComponent(p),this.lbNickName.string="empty",this.lbChips=this.entity.getChildByPath("lb_chips").getComponent(p),this.lbChips.node.active=!0,this.sprAvatar=this.entity.getChildByPath("spr_avatar").getComponent(h),this.sprAvatar.node.active=!1,this.posSymbols.dealer=this.entity.getChildByPath("spr_dealer").getComponent(h),this.posSymbols.dealer.node.active=!1,this.posSymbols.sb=this.entity.getChildByPath("spr_s,blind").getComponent(h),this.posSymbols.sb.node.active=!1,this.posSymbols.bb=this.entity.getChildByPath("spr_b,blind").getComponent(h),this.posSymbols.bb.node.active=!1)},r.onLoad=function(){this.childRegistered()},r.setUi=function(t){var e=this;if(this.childRegistered(),null!=t){this.clearUiPosSymbol(),this.setNickName(t.name),1==t.wait?1==t.isSitOut?this.setStatus("Sitting Out"):this.setStatus("Waiting"):this.setUiChips(t.chips);var i="new/cha"+(t.seat+1)+"/spriteFrame";u.load(i,(function(t,i){null!=t&&console.error(t),e.setAvatarImg(i)}))}else this.setEscapee()},r.setEscapee=function(){this.lbNickName.string="empty",this.lbChips.node.active=!1,this.posSymbols.dealer.node.active=!1,this.posSymbols.sb.node.active=!1,this.posSymbols.bb.node.active=!1},r.setNickName=function(t){this.lbNickName.string=t},r.setUiChips=function(t){this.lbChips.string=y.getCurrencyString(t),this.lbChips.node.active=!0},r.setStatus=function(t){this.lbChips.string=t,this.lbChips.node.active=!0},r.setUiPosSymbol=function(t){var e=this;Object.keys(this.posSymbols).forEach((function(i){var s=e.posSymbols[i];i==t&&(s.node.active=!0)}))},r.setAvatarImg=function(t){this.sprAvatar.spriteFrame=t,this.sprAvatar.node.active=null!=t},r.clearAvatarImg=function(){this.sprAvatar.spriteFrame=null,this.sprAvatar.node.active=!1},r.getTakeButton=function(){return this.btnTakeSeat},r.setShowEntity=function(t){this.entity.active=t},r.setShowReserve=function(t){this.sprReserve.node.active=t},r.getEntity=function(){return this.entity},r.clearUiPosSymbol=function(){var t=this;Object.keys(this.posSymbols).forEach((function(e){t.posSymbols[e].node.active=!1}))},r._getCurrencyValue=function(t){return t.toLocaleString().split(".")[0]},e}(b)).prototype,"entity",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(S.prototype,"btnTakeSeat",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(S.prototype,"sprReserve",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=S))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/UiPass.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Board.ts"],(function(i){"use strict";var t,e,n,r,s,o,l,c,a,u,h,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized,s=i.defineProperty},function(i){o=i.cclegacy,l=i._decorator,c=i.Label,a=i.Button,u=i.Component},function(i){h=i.CommonUtils},function(i){p=i.Board}],execute:function(){var b,m,f,d,g,v,y,C,k,I,O,P,T,z,B;o._RF.push({},"8c00a11MK1JLqVlp2O5krrJ","UiPass",void 0);var U=l.ccclass,w=l.property;i("UiPass",(b=U("UiPass"),m=w(c),f=w(c),d=w(c),g=w(c),v=w(a),y=w(a),b((I=t((k=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o))||this,n(r(t),"lbDesc",I,r(t)),n(r(t),"lbPrice",O,r(t)),n(r(t),"lbChips",P,r(t)),n(r(t),"lbTimer",T,r(t)),n(r(t),"btnOK",z,r(t)),n(r(t),"btnClose",B,r(t)),s(r(t),"initialized",!1),s(r(t),"seat",0),s(r(t),"chips",0),s(r(t),"timerId",0),s(r(t),"count",0),s(r(t),"isOpen",!1),t}e(t,i);var o=t.prototype;return o.init=function(){this.btnOK.node.on("click",this.onButtonOkClicked,this),this.btnClose.node.on("click",this.onButtonCloseClicked,this)},o.notice=function(i,t,e,n){var r=this;!1===this.initialized&&(this.init(),this.initialized=!0),!0!==this.node.active&&(this.btnOK.interactable=!0,this.node.active=!0,this.seat=i,this.chips=t,this.checkTimerId(),this.count=0,this.isOpen=!0,this.lbTimer.string=60..toString(),this.timerId=setInterval((function(){return r.checkTimer()}),1e3),this.setValue(this.chips,e,n))},o.setValue=function(i,t,e){var n=0;0!=e&&(n=e/6e4),this.lbPrice.string="Price: "+h.getCurrencyString(t)+" for "+n.toLocaleString().split(".")[0]+" minute play",this.lbChips.string=""},o.closePopup=function(){this.clearTimer(),this.isOpen=!1,this.node.active=!1},o.onButtonOkClicked=function(i){p.room.send("BUY_PASS",{seat:this.seat,chips:this.chips}),this.clearTimer(),this.isOpen=!1,this.btnOK.interactable=!1},o.onButtonCloseClicked=function(i){this.leaveRoom()},o.checkTimer=function(){0!=this.isOpen&&(this.count++,this.count>=60?(console.log("UIPass is close cause by timeout",60,this.count),this.leaveRoom()):this.lbTimer.string=(60-this.count).toString())},o.clearTimer=function(){clearInterval(this.timerId),this.count=0,this.timerId=0},o.checkTimerId=function(){0!=this.timerId&&(clearInterval(this.timerId),this.timerId=0)},o.leaveRoom=function(){this.clearTimer(),this.isOpen=!1,this.node.active=!1,p.table.leave()},t}(u)).prototype,"lbDesc",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(k.prototype,"lbPrice",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"lbChips",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(k.prototype,"lbTimer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(k.prototype,"btnOK",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"btnClose",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=k))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/UiNotice.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Board.ts"],(function(t){"use strict";var i,e,n,o,l,c,a,s,r,u,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,l=t.defineProperty},function(t){c=t.cclegacy,a=t._decorator,s=t.Label,r=t.Button,u=t.Component},function(t){h=t.Board}],execute:function(){var b,d,v,p,f,m,k,N,y,g,z,B,O;c._RF.push({},"92dbfNAcqZCdK7fUu++h5LV","UiNotice",void 0);var T=a.ccclass,C=a.property;t("UiNotice",(b=T("UiNotice"),d=C(s),v=C(s),p=C(r),f=C(r),m=C(r),b((y=i((N=function(t){function i(){for(var i,e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];return i=t.call.apply(t,[this].concat(c))||this,n(o(i),"lbTitle",y,o(i)),n(o(i),"lbDesc",g,o(i)),n(o(i),"btnOK",z,o(i)),n(o(i),"btnYes",B,o(i)),n(o(i),"btnNo",O,o(i)),l(o(i),"callback",null),l(o(i),"initialized",!1),l(o(i),"leave",!1),l(o(i),"timeout",!1),l(o(i),"timerId",-1),i}e(i,t);var c=i.prototype;return c.init=function(){this.lbTitle.string="NOTICE",this.lbDesc.string="",this.btnOK.node.active=!1,this.btnYes.node.active=!1,this.btnNo.node.active=!1,this.btnOK.node.on("click",this.onButtonOkClicked,this),this.btnYes.node.on("click",this.onButtonYesClicked,this),this.btnNo.node.on("click",this.onButtonNoClicked,this)},c.notice=function(t,i,e,n,o){var l=this;switch(void 0===n&&(n=!1),void 0===o&&(o=null),!1===this.initialized&&(this.init(),this.initialized=!0),this.callback=o,this.timeout=e,i){case 0:this.btnOK.node.active=!0,this.btnYes.node.active=!1,this.btnNo.node.active=!1;break;case 1:this.btnOK.node.active=!1,this.btnYes.node.active=!0,this.btnNo.node.active=!0;break;default:this.btnOK.node.active=!0,this.btnYes.node.active=!1,this.btnNo.node.active=!1}this.leave=n,this.lbDesc.string=t,!0===e&&(this.timerId=setTimeout((function(){l.closePopup()}),5e3)),this.node.active=!0},c.closePopup=function(){-1!==this.timerId&&clearTimeout(this.timerId),this.node.active=!1},c.onButtonOkClicked=function(t){clearTimeout(this.timerId),this.node.active=!1,!0===this.leave&&(null!==this.callback?(this.callback(),this.callback=null):h.room.leave())},c.onButtonYesClicked=function(t){clearTimeout(this.timerId),this.node.active=!1,!0===this.leave&&(null!==this.callback?(this.callback(),this.callback=null):h.room.leave())},c.onButtonNoClicked=function(t){clearTimeout(this.timerId),this.node.active=!1},i}(u)).prototype,"lbTitle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(N.prototype,"lbDesc",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(N.prototype,"btnOK",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(N.prototype,"btnYes",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(N.prototype,"btnNo",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=N))||k));c._RF.pop()}}}));

System.register("chunks:///_virtual/UiBuyChips.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Board.ts"],(function(t){"use strict";var i,n,e,l,r,a,o,s,u,c,h,b,d,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.defineProperty},function(t){a=t.cclegacy,o=t._decorator,s=t.Button,u=t.Label,c=t.SliderComponent,h=t.EventHandler,b=t.Component},function(t){d=t.CommonUtils},function(t){f=t.Board}],execute:function(){var p,g,k,m,C,y,S,v,M,B,x,z,V,w,A,P,O,D,U,_,E,H,q;a._RF.push({},"9a3ado9ZD9KuJif3E+3FHIH","UiBuyChips",void 0);var I=o.ccclass,R=o.property;t("UiBuyChips",(p=I("UiBuyChips"),g=R(s),k=R(s),m=R(s),C=R(s),y=R(u),S=R(u),v=R(u),M=R(u),B=R(u),x=R(c),p((w=i((V=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,e(l(i),"btnOk",w,l(i)),e(l(i),"btnClose",A,l(i)),e(l(i),"btnMin",P,l(i)),e(l(i),"btnMax",O,l(i)),e(l(i),"lbBalance",D,l(i)),e(l(i),"lbAmount",U,l(i)),e(l(i),"lbMin",_,l(i)),e(l(i),"lbStakes",E,l(i)),e(l(i),"lbMax",H,l(i)),e(l(i),"sliderStack",q,l(i)),r(l(i),"minValue",0),r(l(i),"maxValue",0),r(l(i),"amount",0),r(l(i),"seat",-1),r(l(i),"addRange",0),r(l(i),"reqAddChips",!1),r(l(i),"callback",null),r(l(i),"initialized",!1),i}n(i,t);var a=i.prototype;return a.init=function(){var t=new h;t.target=this.node,t.component="UiBuyChips",t.handler="onSliderStackEvent",this.sliderStack.slideEvents.push(t),this.btnOk.node.off("click"),this.btnOk.node.on("click",this.onButtonOkClicked,this),this.btnClose.node.off("click"),this.btnClose.node.on("click",this.onButtonCloseClicked,this),this.btnMin.node.off("click"),this.btnMin.node.on("click",this.onButtonMinClicked,this),this.btnMax.node.off("click"),this.btnMax.node.on("click",this.onButtonMaxClicked,this),this.initialized=!0},a.addChips=function(t,i,n,e,l){!1===this.initialized&&this.init(),this.callback=l,this.reqAddChips=!0,this.seat=t;var r=f.small,a=f.big;this.lbStakes.string=d.getCurrencyString(r)+" / "+d.getCurrencyString(a),this.setControlValue(i,n,e)},a.setControlValue=function(t,i,n){this.lbBalance.string=d.getCurrencyString(t)+" ( "+d.getCurrencyString(i)+" )",this.maxValue=n,this.maxValue>=t&&(this.maxValue=t),this.minValue=0,this.addRange=i,this.lbMin.string=d.getCurrencyString(this.minValue),this.lbMax.string=d.getCurrencyString(this.maxValue),this.setSliderProgress(1,!0),!1===this.node.active&&(this.node.active=!0)},a.setSliderProgress=function(t,i){t<=0&&(t=0);var n=0,e=this.maxValue-this.minValue;t>=1?(t=1,this.amount=Math.floor(t*e)):(this.amount=Math.floor(t*e),n=Math.floor(t*e)%f.small,this.amount-=n);var l=this.amount/e;if(e<=0)return this.amount=this.maxValue,this.lbAmount.string=d.getCurrencyString(this.amount),void(this.sliderStack.progress=1);this.lbAmount.string=d.getCurrencyString(this.amount),!0===i&&(this.sliderStack.progress=l)},a.addChipsInDone=function(){this.reqAddChips=!1,this.btnOk.interactable=!0,this.node.active=!1,null!==this.callback&&this.callback(!0),this.callback=null},a.hide=function(){this.node.active=!1},a.closePopup=function(){this.reqAddChips=!1,this.btnOk.interactable=!0,this.node.active=!1,null!==this.callback&&this.callback(!0),this.callback=null},a.onButtonOkClicked=function(t){f.room.send("ADD_CHIPS",{seat:this.seat,amount:this.amount}),null===this.callback&&(t.interactable=!1,this.node.active=!1)},a.onButtonCloseClicked=function(t){null!==this.callback&&this.callback(!1),this.callback=null,this.node.active=!1},a.onButtonMinClicked=function(t){this.setSliderProgress(0,!0)},a.onButtonMaxClicked=function(t){this.setSliderProgress(1,!0)},a.onSliderStackEvent=function(t){this.setSliderProgress(t.progress,!0)},i}(b)).prototype,"btnOk",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(V.prototype,"btnClose",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(V.prototype,"btnMin",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(V.prototype,"btnMax",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(V.prototype,"lbBalance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(V.prototype,"lbAmount",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(V.prototype,"lbMin",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(V.prototype,"lbStakes",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(V.prototype,"lbMax",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(V.prototype,"sliderStack",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=V))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/UiPopup.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Board.ts"],(function(t){"use strict";var i,e,n,o,l,s,c,r,u,a,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,l=t.defineProperty},function(t){s=t.cclegacy,c=t._decorator,r=t.Label,u=t.Button,a=t.Component},function(t){b=t.Board}],execute:function(){var h,p,d,v,f,k,y,P,g,B,z,Y,m;s._RF.push({},"9ca22AKsnlGjYuXRvAxouSh","UiPopup",void 0);var N=c.ccclass,O=c.property;t("UiPopup",(h=N("UiPopup"),p=O(r),d=O(r),v=O(u),f=O(u),k=O(u),h((g=i((P=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),c=0;c<e;c++)s[c]=arguments[c];return i=t.call.apply(t,[this].concat(s))||this,n(o(i),"lbTitle",g,o(i)),n(o(i),"lbDesc",B,o(i)),n(o(i),"btnOK",z,o(i)),n(o(i),"btnYes",Y,o(i)),n(o(i),"btnNo",m,o(i)),l(o(i),"cbPopup",null),l(o(i),"initialized",!1),l(o(i),"leave",!1),i}e(i,t);var s=i.prototype;return s.init=function(){this.lbTitle.string="",this.lbDesc.string="",this.btnOK.node.active=!1,this.btnYes.node.active=!1,this.btnNo.node.active=!1,this.btnOK.node.on("click",this.onButtonOkClicked,this),this.btnYes.node.on("click",this.onButtonYesClicked,this),this.btnNo.node.on("click",this.onButtonNoClicked,this)},s.set=function(t,i,e,n,o){void 0===o&&(o=null),!1===this.initialized&&(this.init(),this.initialized=!0),this.lbTitle.string=t,this.lbDesc.string=i,this.leave=n,this.setButton(e),null!=o&&(this.cbPopup=o),this.node.active=!0},s.setButton=function(t){switch(t){case 0:this.btnOK.node.active=!0,this.btnYes.node.active=!1,this.btnNo.node.active=!1;break;case 1:this.btnOK.node.active=!1,this.btnYes.node.active=!0,this.btnNo.node.active=!0;break;default:this.btnOK.node.active=!0,this.btnYes.node.active=!1,this.btnNo.node.active=!1}},s.closePopup=function(){this.node.active=!1},s.onButtonOkClicked=function(t){null!=this.cbPopup&&this.cbPopup(),this.node.active=!1,!0===this.leave&&b.room.leave()},s.onButtonYesClicked=function(t){null!=this.cbPopup&&this.cbPopup(),this.node.active=!1,!0===this.leave&&b.room.leave()},s.onButtonNoClicked=function(t){this.node.active=!1},i}(a)).prototype,"lbTitle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(P.prototype,"lbDesc",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(P.prototype,"btnOK",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(P.prototype,"btnYes",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(P.prototype,"btnNo",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/UiTable.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Board.ts","./SeatSelectUi.ts","./AudioManager.ts","./UiPot.ts","./NetworkManager.ts","./UiPlayerAction.ts","./UiEntity.ts","./UiNotice.ts","./UiPopup.ts","./UiPass.ts","./UiHandsHistory.ts","./PokerEvaluator.ts","./UiBuyIn.ts","./HistoryManager.ts","./UiBuyChips.ts"],(function(t){"use strict";var e,i,n,s,a,o,r,l,u,h,c,d,m,p,y,S,C,g,b,f,v,R,P,E,U,A,B,H,M,T,N,_,I,k,O,w,D,F;return{setters:[function(t){e=t.defineProperty,i=t.applyDecoratedDescriptor,n=t.inheritsLoose,s=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.asyncToGenerator},function(t){r=t.cclegacy,l=t._decorator,u=t.Label,h=t.Button,c=t.Node,d=t.sys,m=t.Sprite,p=t.Color,y=t.instantiate,S=t.Vec3,C=t.screen,g=t.director,b=t.UITransform,f=t.tween,v=t.bezier,R=t.Component},function(t){P=t.CommonUtils},function(t){E=t.Board},function(t){U=t.SeatSelectUi},function(t){A=t.AudioManager},function(t){B=t.UiPot},function(t){H=t.NetworkManager},function(t){M=t.UiPlayerAction},function(t){T=t.UiEntity},function(t){N=t.UiNotice},function(t){_=t.UiPopup},function(t){I=t.UiPass},function(t){k=t.UiHandsHistory},function(t){O=t.exportToGlobal},function(t){w=t.UiBuyIn},function(t){D=t.HistoryManager},function(t){F=t.UiBuyChips}],execute:function(){var x,L,W,Y,V,z,G,j,Q,K,J,q,X,Z,$,tt,et,it,nt,st,at,ot,rt,lt,ut,ht,ct,dt,mt,pt,yt,St,Ct,gt,bt,ft,vt,Rt,Pt;r._RF.push({},"9e13dw/NndLHYxmru057jCA","UiTable",void 0);var Et=l.ccclass,Ut=l.property,At=["Ac","Kc","Qc","Jc","Tc","9c","8c","7c","6c","5c","4c","3c","2c","Ad","Kd","Qd","Jd","Td","9d","8d","7d","6d","5d","4d","3d","2d","Ah","Kh","Qh","Jh","Th","9h","8h","7h","6h","5h","4h","3h","2h","As","Ks","Qs","Js","Ts","9s","8s","7s","6s","5s","4s","3s","2s"];t("UiTable",(x=Et("UiTable"),L=Ut(I),W=Ut(w),Y=Ut(F),V=Ut(N),z=Ut(_),G=Ut(k),j=Ut(u),Q=Ut(B),K=Ut(h),J=Ut(c),q=Ut(h),X=Ut(c),Z=Ut(h),$=Ut(h),tt=Ut(c),et=Ut(c),it=Ut(U),x((Pt=Rt=function(t){function i(){for(var i,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,s(a(i),"uiPass",at,a(i)),s(a(i),"uiBuyIn",ot,a(i)),s(a(i),"uiBuyChips",rt,a(i)),s(a(i),"uiNotice",lt,a(i)),s(a(i),"uiPopup",ut,a(i)),s(a(i),"uiHandsHistory",ht,a(i)),s(a(i),"lbTimeNotice",ct,a(i)),e(a(i),"roundState",""),e(a(i),"sprPotRoot",null),e(a(i),"sprPotChip",null),e(a(i),"sprSitBackRoot",null),e(a(i),"entityUiElements",[]),e(a(i),"sprCommunityCards",[null,null,null,null,null]),e(a(i),"vecCommunityCardsOriginal",[null,null,null,null,null]),e(a(i),"numCommunityCards",[-1,-1,-1,-1,-1]),e(a(i),"uiPlayerAction",null),e(a(i),"ndCardDispensingRoot",null),e(a(i),"lbRemainTime",null),e(a(i),"lbReadyMessage",null),e(a(i),"datePassEnd",null),e(a(i),"startTime",0),e(a(i),"deltaTime",0),e(a(i),"btnFullScreen",null),e(a(i),"btnMinScreen",null),e(a(i),"btnBgmOn",null),e(a(i),"btnBgmOff",null),e(a(i),"btnExit",null),e(a(i),"btnAddChips",null),e(a(i),"objPotMoveToWinnerChips",{}),e(a(i),"objPotReturnChips",{}),e(a(i),"cardRes",{}),e(a(i),"curPotValue",-1),e(a(i),"myChips",-1),e(a(i),"myBet",-1),e(a(i),"mySeat",-1),e(a(i),"myWaitStatus",!1),e(a(i),"startBetFromByServer",-1),e(a(i),"betMin",-1),e(a(i),"seatMax",6),e(a(i),"seatPlayers",[]),e(a(i),"enableSeats",[]),e(a(i),"myPrimaryCardIdx",-1),e(a(i),"mySecondaryCardIdx",-1),e(a(i),"onShowMyHandCards",null),e(a(i),"dealerSeatPos",-1),e(a(i),"sbSeatPos",-1),e(a(i),"bbSeatPos",-1),e(a(i),"room",null),e(a(i),"msgWINNERS",""),e(a(i),"playersCARD",null),e(a(i),"isFold",!1),e(a(i),"isAllin",!1),s(a(i),"potUi",dt,a(i)),s(a(i),"btnShowCard",mt,a(i)),s(a(i),"sitOutRoot",pt,a(i)),s(a(i),"btnSitOut",yt,a(i)),s(a(i),"sitBackRoot",St,a(i)),s(a(i),"btnSitBack",Ct,a(i)),s(a(i),"btnHistory",gt,a(i)),s(a(i),"windowControlRoot",bt,a(i)),s(a(i),"exitControlRoot",ft,a(i)),e(a(i),"historyManager",new D),s(a(i),"seatSelectUi",vt,a(i)),i}n(i,t);var r=i.prototype;return r.start=function(){this.seatMax=i.seatMaxFromServer,globalThis.lib={},O(globalThis.lib),this.btnAddChips=this.node.getChildByPath("buyinController/btn_buyin").getComponent(h),this.btnAddChips.node.on("click",this.onAddChipsClicked.bind(this),this),this.btnExit=this.exitControlRoot.getChildByPath("btn_exit").getComponent(h),this.btnExit.node.on("click",this.onClickExit.bind(this),this),this.lbTimeNotice.node.active=!1,E.table=this,this.cardRes=i.preLoadCardRes,this.childRegistered(),this.seatSelectUi.init(this.seatMax,this.onClickSeatSelect.bind(this)),null!=H.Instance().room?(this.registerRoomEvent(H.Instance().room),this.hide(),this.sendMsg("ONLOAD",{})):console.error(" UiTable.onLoad - Room is null But Change to GameScene")},r.childRegistered=function(){var t=this;1==d.isMobile?(this.uiPlayerAction=this.node.getChildByPath("playerActionMobile").getComponent(M),this.uiPlayerAction.hide()):(this.uiPlayerAction=this.node.getChildByPath("playerAction").getComponent(M),this.uiPlayerAction.hide()),this.ndCardDispensingRoot=this.node.getChildByPath("cardDispensingRoot");var e=this.node.getChildByPath("entities_9p"),i=this.node.getChildByPath("entities_6p"),n="entities_"+this.seatMax+"p";e.name===n?(e.active=!0,i.active=!1):(e.active=!1,i.active=!0),this.entityUiElements=[];var s=this.node.getChildByPath(n+"/entity_me").getComponent(T);s.isMe=!0,this.entityUiElements.push(s);for(var a=1;a<this.seatMax;a++){var o=this.node.getChildByPath(n+"/entity_00"+a).getComponent(T);o.isMe=!1,this.entityUiElements.push(o)}for(var r=1;r<this.entityUiElements.length;r++){var l=this.entityUiElements[r];null!=l&&l.setEscapee()}for(var c=0;c<this.sprCommunityCards.length;c++){var g=this.node.getChildByPath("communityCards/"+(c+1)).getComponent(m);this.sprCommunityCards[c]=g,this.vecCommunityCardsOriginal[c]=g.node.position}this.sprPotRoot=this.node.getChildByPath("pot").getComponent(m),this.sprPotRoot.node.active=!1,this.sprPotRoot.color=new p(255,255,255,0),this.sprPotChip=this.node.getChildByPath("pot/spr_chip").getComponent(m),this.sprPotChip.node.active=!1;var b=this.node.getChildByPath("winnerChips");Object.keys(this.objPotMoveToWinnerChips).forEach((function(e){for(var i=t.objPotMoveToWinnerChips[e],n=0;n<i.sprChips.length;n++){var s=i.sprChips[n];s.node.destroy(),s.node.removeFromParent()}i.sprChips=[]})),this.objPotMoveToWinnerChips={};for(var f=b.children.length,v=0;v<10;v++){for(var R=[],P=0;P<f;P++){var E=b.children[P];if(0!=E.isValid){E.active=!1;var U=y(E);U.setParent(E.parent),U.position=new S(E.position),U.scale=new S(E.scale),U.name="sprChip_"+v+"_"+P,R.push(U.getComponent(m))}}this.objPotMoveToWinnerChips[v]={sprChips:R}}var B=this.node.getChildByPath("returnChips");Object.keys(this.objPotReturnChips).forEach((function(e){for(var i=t.objPotReturnChips[e],n=0;n<i.sprChips.length;n++){var s=i.sprChips[n];s.node.destroy(),s.node.removeFromParent()}i.sprChips=[]})),this.objPotReturnChips={};for(var H=B.children.length,N=0;N<10;N++){for(var _=[],I=0;I<H;I++){var k=B.children[I];if(0!=k.isValid){k.active=!1;var O=y(k);O.setParent(k.parent),O.position=new S(k.position),O.scale=new S(k.scale),O.name="sprChip_"+N+"_"+I,_.push(O.getComponent(m))}}this.objPotReturnChips[N]={sprChips:_}}this.btnFullScreen=this.windowControlRoot.getChildByPath("btn_full").getComponent(h),this.btnFullScreen.node.on("click",this.onClickFull.bind(this),this),this.btnFullScreen.node.active=C.supportsFullScreen,this.btnMinScreen=this.windowControlRoot.getChildByPath("btn_min").getComponent(h),this.btnMinScreen.node.on("click",this.onClickMin.bind(this),this),this.btnMinScreen.node.active=!1;var w=C.fullScreen();this.btnFullScreen.node.active=!w,this.btnMinScreen.node.active=w,this.lbRemainTime=this.node.getChildByPath("timer/Label").getComponent(u),this.lbRemainTime.node.active=!0,this.lbReadyMessage=this.node.getChildByPath("lbReadyMessage").getComponent(u),this.lbReadyMessage.string="",this.lbReadyMessage.node.active=!1;var D=!0;null!=A.instance&&(D=A.instance.getLocalStorageBgmToggleValue()),this.btnBgmOff=this.node.getChildByPath("bgmController/btn_off").getComponent(h),this.btnBgmOff.node.on("click",this.onClickBgmOff.bind(this),this),this.btnBgmOff.node.active=D,this.btnBgmOn=this.node.getChildByPath("bgmController/btn_on").getComponent(h),this.btnBgmOn.node.on("click",this.onClickBgmOn.bind(this),this),this.btnBgmOn.node.active=!D,this.btnShowCard.node.off("click"),this.btnShowCard.node.on("click",this.OnClickShow.bind(this),this),this.btnSitOut.node.off("click"),this.btnSitOut.node.on("click",this.OnClickSitOut.bind(this),this),this.btnSitBack.node.off("click"),this.btnSitBack.node.on("click",this.OnClickSitBack.bind(this),this),this.btnHistory.node.off("click"),this.btnHistory.node.on("click",this.onClickHistory.bind(this),this)},r.onClickSeatSelect=function(t){this.sendMsg("SEAT_SELECT",{selected:t})},r.onSHOW_SELECT_SEAT=function(t){var e=t.limitTime;P.setDenomination(t.denomination),this.seatSelectUi.startSeatsSelect(e)},r.onSELECT_SEAT_ERROR=function(t){console.error(t.message),this.seatSelectUi.onResultFail()},r.onUPDATE_SELECT_SEAT=function(t){this.seatSelectUi.updateSeatInfo(t.entities,t.seatInfo,t.bbSeat,t.sbSeat,t.dealerSeat)},r.OnClickSitOut=function(){this.uiPopup.set("Sit Out","Do you want to sit out from next hand?\n\nHands will not be dealt to you while you are sitting out.\nYour timer does not stop during you sit out.",1,!1,this.sitOut.bind(this))},r.OnClickSitBack=function(){this.sendMsg("SIT_BACK",{seat:this.mySeat}),this.sitBackRoot.active=!1},r.onAddChipsClicked=function(){this.btnAddChips.interactable=!1,this.sendMsg("ADD_CHIPS_REQUEST",{seat:this.mySeat})},r.onBuyInClicked=function(){E.balance<E.big*E.minStakeRatio?this.uiNotice.notice("Your balance is less than the minimum stack.",0,!1):this.myChips>=E.big*E.minStakeRatio?this.uiNotice.notice("Please wait\nuntil your chip count falls below "+P.getCurrencyString(E.big*E.minStakeRatio),0,!1):!1!==this.isFold?(this.uiHandsHistory.closePopup(),this.uiNotice.closePopup(),this.uiBuyIn.reBuyIn(E.balance,E.small,E.big,this.myChips,this.mySeat,null)):this.uiNotice.notice("Chip purchase is only between hands and during sit out.",0,!1)},r.onClickFull=function(){var t=this;this.btnFullScreen.interactable=!1,this.btnMinScreen.interactable=!1,C.requestFullScreen(document.getElementById("Cocos3dGameContainer"),(function(e){if(null!=t.btnFullScreen&&null!=t.btnMinScreen){var i=C.fullScreen();t.btnFullScreen.node.active=!i,t.btnMinScreen.node.active=i,t.btnFullScreen.interactable=!0,t.btnMinScreen.interactable=!0}}))},r.onClickMin=function(){var t=o(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.btnFullScreen.interactable=!1,this.btnMinScreen.interactable=!1,t.next=4,C.exitFullScreen();case 4:if(e=C.fullScreen(),null!=this.btnFullScreen&&null!=this.btnMinScreen){t.next=7;break}return t.abrupt("return");case 7:this.btnFullScreen.node.active=!e,this.btnMinScreen.node.active=e,this.btnFullScreen.interactable=!0,this.btnMinScreen.interactable=!0;case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onClickBgmOn=function(){this.setBgmOnOff(!0)},r.onClickBgmOff=function(){this.setBgmOnOff(!1)},r.setBgmOnOff=function(t){this.btnBgmOn.node.active=!t,this.btnBgmOff.node.active=t,1==t?(A.instance.setLocalStorageBgmToggleOnOff(!0),A.instance.resumeBGM()):(A.instance.setLocalStorageBgmToggleOnOff(!1),A.instance.pauseBGM())},r.onClickHistory=function(){this.uiHandsHistory.ShowHandsHistory(this.historyManager.GetHandsHistory(),this.cardRes)},r.onClickExit=function(){var t=this;1==this.seatSelectUi.node.active?this.uiNotice.notice("Do you want to quit?",1,!1,!0,(function(){var e;t.seatSelectUi.end(),null===(e=t.room)||void 0===e||e.leave(!0)})):this.uiNotice.notice("Do you want to quit?\n\nYour hand will be automatically folded if the game is progress.",1,!1,!0)},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.sitOut=function(){this.sendMsg("SIT_OUT",{seat:this.mySeat}),this.sitOutRoot.active=!1},r.update=function(t){},r.registerRoomEvent=function(t){var e=this;this.room=t,t.onMessage("NEW_ENTITY",this.onNEW_ENTITY.bind(this)),t.onMessage("HANDLE_ESCAPEE",this.onHANDLE_ESCAPEE.bind(this)),t.onMessage("SUSPEND_ROUND",this.onSUSPEND_ROUND.bind(this)),t.onMessage("READY_ROUND",this.onREADY_ROUND.bind(this)),t.onMessage("PREPARE_ROUND",this.onPREPARE_ROUND.bind(this)),t.onMessage("BLIND_BET",this.onBLIND_BET.bind(this)),t.onMessage("CARD_DISPENSING",this.onCARD_DISPENSING.bind(this)),t.onMessage("SHOW_FLOP",this.onSHOW_FLOP.bind(this)),t.onMessage("SHOW_TURN",this.onSHOW_TURN.bind(this)),t.onMessage("SHOW_RIVER",this.onSHOW_RIVER.bind(this)),t.onMessage("CLEAR_ROUND",this.onCLEAR_ROUND.bind(this)),t.onMessage("YOUR_TURN",this.onYOUR_TURN.bind(this)),t.onMessage("FOLD",this.onFOLD.bind(this)),t.onMessage("CHECK",this.onCHECK.bind(this)),t.onMessage("CALL",this.onCALL.bind(this)),t.onMessage("BET",this.onBET.bind(this)),t.onMessage("RAISE",this.onRAISE.bind(this)),t.onMessage("SHOW_CARD",this.onSHOW_CARD.bind(this)),t.onMessage("PLAYER_CARDS",this.onPLAYER_CARDS.bind(this)),t.onMessage("WINNERS",this.onWINNERS.bind(this)),t.onMessage("BUY_IN",this.onBUY_IN.bind(this)),t.onMessage("RES_BUY_IN",this.onRES_BUY_IN.bind(this)),t.onMessage("RES_RE_BUY",this.onRES_RE_BUY.bind(this)),t.onMessage("RE_BUY_IN",this.onRE_BUY_IN.bind(this)),t.onMessage("RES_ADD_CHIPS_REQUEST",this.onRES_ADD_CHIPS_REQUEST.bind(this)),t.onMessage("RES_ADD_CHIPS",this.onRES_ADD_CHIPS.bind(this)),t.onMessage("RES_ADD_CHIPS_PEND",this.onRES_ADD_CHIPS_PEND.bind(this)),t.onMessage("BUY_PASS",this.onBuyPass.bind(this)),t.onMessage("RES_BUY_PASS",this.resBuyPass.bind(this)),t.onMessage("TIME_OVER",this.onTIME_OVER.bind(this)),t.onMessage("REMAIN_TIME",this.onRemainTime.bind(this)),t.onMessage("ping",this.onPing.bind(this)),t.onMessage("SIT_OUT",this.onSitOut.bind(this)),t.onMessage("SIT_BACK",this.onSitBack.bind(this)),t.onMessage("SHOW_SELECT_SEAT",this.onSHOW_SELECT_SEAT.bind(this)),t.onMessage("UPDATE_SELECT_SEAT",this.onUPDATE_SELECT_SEAT.bind(this)),t.onMessage("SELECT_SEAT_ERROR",this.onSELECT_SEAT_ERROR.bind(this)),this.room.onMessage("JOIN",(function(i){e.enterRoom(t,i)})),this.room.onMessage("REJOIN",(function(i){e.rejoinRoom(t,i)})),t.onLeave((function(t){console.log("onLeave code : "+t),e.leaveRoom(t),e.hide(),H.Instance().room.removeAllListeners(),H.Instance().leaveReason=t,g.loadScene("login")}))},r.rejoinRoom=function(t,e){var i=this,n=e.yourself;E.balance=n.balance,E.big=e.big,E.small=e.small,E.minStakeRatio=e.minStakeRatio,E.maxStakeRatio=e.maxStakeRatio,E.passPrice=e.passPrice,this.room=t,this.mySeat=n.seat,this.myChips=n.chips,this.myWaitStatus=n.wait,this.isFold=!1,this.seatPlayers=[],this.msgWINNERS="",this.playersCARD=null,this.isAllin=!1,this.curPotValue=e.pot,this.betMin=e.minBet,this.startBetFromByServer=e.minBet,this.dealerSeatPos=e.dealer,this.sbSeatPos=e.sb,this.bbSeatPos=e.bb;for(var s=0;s<this.seatMax;s++){var a=this.mySeat+s;this.seatPlayers.push(a%this.seatMax)}!0===n.isSitOut?(this.sitOutRoot.active=!1,this.sitBackRoot.active=!0):(this.sitOutRoot.active=!0,this.sitBackRoot.active=!1),this.btnShowCard.node.active=!1,this.clearUiTimer(),this.setUiEntities(e.entities),this.enableSeats=[];for(var o=function(t){var n=i.seatPlayers[t],s=e.entities.find((function(t){return t.seat==n})),a=i.entityUiElements[t];if(null==s)return null==a||a.setEscapee(),"continue";i.enableSeats.push(s.seat)},r=0;r<this.seatPlayers.length;r++)o(r);this.setUiCommunityCards(e.openCards),this.historyManager.ResetHistory(),this.btnHistory.node.active=!1,this.myPrimaryCardIdx=e.primCard,this.mySecondaryCardIdx=e.secCard;var l=this.getUiEntityFromSeat(this.mySeat);-1!=this.myPrimaryCardIdx&&-1!=this.mySecondaryCardIdx&&(this.setAniOpenHand(l.sprHandCards[0],this.cardRes[this.myPrimaryCardIdx+1],(function(){})),this.setAniOpenHand(l.sprHandCards[1],this.cardRes[this.mySecondaryCardIdx+1],(function(){l.sprHandCardShadow.node.active=!0;var t=i.getHandRank(i.myPrimaryCardIdx,i.mySecondaryCardIdx,i.numCommunityCards);l.setUiHandRank(t)})),!0===n.fold&&l.setUiHandCardsFold()),0!=e.centerCardState&&e.entities.forEach((function(t){var e=t.seat,n=i.getUiEntityFromSeat(e);e!==i.mySeat&&!0!==t.wait&&(n.sprHiddenCards[0].node.active=!0,n.sprHiddenCards[1].node.active=!0)})),e.remainTimeMS>0&&(this.lbRemainTime.string=this.getRemainTimeString2(e.remainTimeMS));var u=this.getUiEntityFromSeat(this.dealerSeatPos);null==u||u.setUiPosSymbol("dealer");var h=this.getUiEntityFromSeat(this.sbSeatPos);null==h||h.setUiPosSymbol("sb");var c=this.getUiEntityFromSeat(this.bbSeatPos);null==c||c.setUiPosSymbol("bb"),this.potUi.UpdatePotTotal(this.curPotValue),this.show()},r.enterRoom=function(t,e){var i=this,n=e.yourself;E.balance=n.balance,E.big=e.big,E.small=e.small,E.minStakeRatio=e.minStakeRatio,E.maxStakeRatio=e.maxStakeRatio,E.passPrice=e.passPrice,console.log("enterRoom",n,n.balance),this.room=t,this.mySeat=n.seat,this.myChips=n.chips,this.myWaitStatus=n.wait,this.isFold=!1,this.seatPlayers=[],this.msgWINNERS="",this.playersCARD=null,this.isAllin=!1,this.dealerSeatPos=e.dealer,this.sbSeatPos=e.sb,this.bbSeatPos=e.bb,this.curPotValue=e.pot,this.potUi.UpdatePotTotal(this.curPotValue);for(var s=0;s<this.seatMax;s++){var a=this.mySeat+s;this.seatPlayers.push(a%this.seatMax)}this.clearUiTimer(),this.setUiEntities(e.entities),this.setUiCommunityCards(e.openCards),this.historyManager.ResetHistory(),this.btnHistory.node.active=!1,!0===n.isSitOut?(this.sitOutRoot.active=!1,this.sitBackRoot.active=!0):(this.sitOutRoot.active=!0,this.sitBackRoot.active=!1),this.btnShowCard.node.active=!1,e.remainTimeMS>0&&(this.lbRemainTime.string=this.getRemainTimeString2(e.remainTimeMS));var o=this.getUiEntityFromSeat(this.dealerSeatPos);null==o||o.setUiPosSymbol("dealer");var r=this.getUiEntityFromSeat(this.sbSeatPos);null==r||r.setUiPosSymbol("sb");var l=this.getUiEntityFromSeat(this.bbSeatPos);null==l||l.setUiPosSymbol("bb");var u=e.gameState;0!=u&&1!=u&&e.entities.forEach((function(t){var e=t.seat,n=i.getUiEntityFromSeat(e);e!==i.mySeat&&!0!==t.wait&&(n.sprHiddenCards[0].node.active=!0,n.sprHiddenCards[1].node.active=!0,!1!==t.fold&&n.setUiHandCardsFold())}))},r.leaveRoom=function(t){console.log("execute leaveRoom",t),this.room=null,this.clearUiEntities(),this.clearUiCommunityCards(),this.clearUiPot(),this.clearUiTimer(),this.uiPlayerAction.hide(),this.uiPopup.node.active=!1,this.uiPass.node.active=!1,this.uiBuyIn.node.active=!1,this.uiHandsHistory.closePopup(),this.isAllin=!1,this.historyManager.ResetHistory(),this.btnHistory.node.active=!1},r.setUiEntities=function(t){for(var e=this,i=function(i){var n=e.seatPlayers[i],s=null==t?void 0:t.find((function(t){return t.seat===n})),a=e.getUiEntityFromSeat(n);null==a||a.setUi(s)},n=0;n<this.seatPlayers.length;n++)i(n)},r.clearUiEntities=function(){for(var t=0;t<this.seatPlayers.length;t++){var e=this.seatPlayers[t],i=this.getUiEntityFromSeat(e);null==i||i.setUi(null)}},r.setUiPot=function(t){this.sprPotRoot.node.active=!0,this.sprPotRoot.color=new p(255,255,255,255),null===t&&void 0===t||(this.potUi.Show(t),this.sprPotChip.node.active=!1)},r.clearUiPot=function(){this.sprPotRoot.node.active=!1,this.sprPotChip.node.active=!1,this.potUi.Hide()},r.clearUiTimer=function(){this.lbRemainTime.string="00:00",this.datePassEnd=null,this.startTime=0,this.deltaTime=0},r.clearPosSymbol=function(){this.entityUiElements.forEach((function(t){return t.clearUiPosSymbol()}))},r.setUiCommunityCards=function(t){for(var e=0;e<this.sprCommunityCards.length;e++){var n=this.sprCommunityCards[e];e>=t.length?(i.setUiCard(n,null),this.numCommunityCards[e]=-1):(i.setUiCard(n,this.getCardImg(t[e]+1)),this.numCommunityCards[e]=t[e])}},r.clearUiCommunityCards=function(){this.sprCommunityCards.forEach((function(t){t.spriteFrame=null}));for(var t=0;t<this.numCommunityCards.length;t++)this.numCommunityCards[t]=-1},i.setUiCard=function(t,e){var i=t.getComponent(b),n=i.width,s=i.height;t.spriteFrame=e,t.node.active=!0,i.width=n,i.height=s},r.getUiEntityFromSeat=function(t){var e=this.seatPlayers.findIndex((function(e){return e==t}));if(-1!=e)return this.entityUiElements[e];console.log("getUiEntityFromSeat : not found index ",e,t,this.seatPlayers)},r.getHandRank=function(t,e,i){if(-1===t||-1===e)return"";var n=[];i.forEach((function(t){-1!=t&&n.push(At[t])})),n.push(At[t]),n.push(At[e]);var s=n.join();return globalThis.lib.Hand.solve(s.split(",")).descr},r.setUiMyHandRank=function(){var t=this.getHandRank(this.myPrimaryCardIdx,this.mySecondaryCardIdx,this.numCommunityCards),e=this.getUiEntityFromSeat(this.mySeat);null==e||e.setUiHandRank(t)},r.clearUiEntitiesAction=function(){this.entityUiElements.forEach((function(t){t.clearUiAction()}))},r.clearUiEntitiesBetValue=function(){this.entityUiElements.forEach((function(t){t.clearUiBetValue()}))},r.getCardImg=function(t){return this.cardRes[t]},r.isEnableSeat=function(t){return null!=this.enableSeats.find((function(e){return e==t}))},r.sendMsg=function(t,e){this.room.send(t,e)},r.onNEW_ENTITY=function(t){var e=t.newEntity,i=this.getUiEntityFromSeat(e.seat);null==i||i.setUi(e)},r.onCARD_DISPENSING=function(t){console.log("CARD_DISPENSING",t),this.myPrimaryCardIdx=t.primaryCard,this.mySecondaryCardIdx=t.secondaryCard,this.historyManager.SetPlayerCards([this.myPrimaryCardIdx,this.mySecondaryCardIdx]),this.setAniCardDispensing()},r.onYOUR_TURN=function(t){var e=this;console.log("YOUR_TURN",t);for(var i=t.player,n=t.duration,s=0;s<this.seatPlayers.length;s++){var a=this.entityUiElements[s];i!=this.seatPlayers[s]?null==a||a.endTurn():null==a||a.startTurn(n)}if(this.mySeat==i){var o=t.maxBet,r=t.currBet,l=t.minRaise,u=t.chips,h=t.currPot,c=t.isLast,d=t.action;this.uiPlayerAction.show(this.betMin,o,l,h,r,u,c,d),this.uiPlayerAction.cbCheck=function(){var t={seat:e.mySeat};console.log("send CHECK",t),e.sendMsg("CHECK",t),e.uiPlayerAction.hide()},this.uiPlayerAction.cbCall=function(t){var i={betAmount:t,seat:e.mySeat};console.log("send CALL",i),e.sendMsg("CALL",i),e.uiPlayerAction.hide()},this.uiPlayerAction.cbBet=function(t){var i={betAmount:t,seat:e.mySeat};console.log("bet action => send BET",i),e.sendMsg("BET",i),e.uiPlayerAction.hide()},this.uiPlayerAction.cbRaise=function(t){var i={betAmount:t,seat:e.mySeat};console.log("raise action => send RAISE",i),e.sendMsg("RAISE",i),e.uiPlayerAction.hide()},this.uiPlayerAction.cbAllIn=function(t){var i={betAmount:t,seat:e.mySeat};e.sendMsg("ALLIN",i),e.uiPlayerAction.hide()},this.uiPlayerAction.cbFold=function(){var t={seat:e.mySeat};console.log("fold action => send FOLD",t),e.sendMsg("FOLD",t),e.uiPlayerAction.hide()}}else this.uiPlayerAction.hide()},r.onBLIND_BET=function(t){console.log("BLIND_BET",t),this.roundState="BLIND_BET",this.betMin=t.maxBet,this.clearUiEntitiesAction(),this.clearUiEntitiesBetValue();var e=t.smallBlind;if(null!=e){var i=this.getUiEntityFromSeat(e.seat);null!=i&&(null==i||i.setUiBetValue(e.currBet,p.GRAY),null==i||i.setUiBlindBet(e.chips,!0,!1),this.historyManager.BlindBet(i.lbNickName.string,"small",e.currBet)),this.mySeat==e.seat&&(this.myChips=e.chips)}var n=t.bigBlind;if(null!=n){var s=this.getUiEntityFromSeat(n.seat);null!=s&&(null==s||s.setUiBetValue(n.currBet,p.GRAY),null==s||s.setUiBlindBet(n.chips,!1,!0),this.historyManager.BlindBet(s.lbNickName.string,"big",n.currBet)),this.mySeat==n.seat&&(this.myChips=n.chips)}var a=t.missSb,o=t.missBb;if(null!=o)for(var r=0;r<o.length;r++){var l=this.getUiEntityFromSeat(o[r].seat);null!=l&&(null==l||l.setUiBetValue(n.currBet,p.GRAY),null==l||l.setUiBlindBet(o[r].chips,!1,!0),this.historyManager.BlindBet(l.lbNickName.string,"missBb",o[r].currBet))}if(null!=a)for(var u=0;u<a.length;u++){var h=this.getUiEntityFromSeat(a[u].seat);if(null!=h){for(var c=!1,d=0;d<o.length;d++)if(a[u].seat==o[d].seat){c=!0;break}!1===c?(null==h||h.setUiBlindBet(a[u].chips,!0,!1),this.historyManager.BlindBet(h.lbNickName.string,"missSb",a[u].currBet)):(null==h||h.setSbMissButton(!1),this.historyManager.BlindBet(h.lbNickName.string,"missSb",a[u].currBet))}}for(var m=t.player,y=0;y<m.length;y++){var S=this.getUiEntityFromSeat(m[y]);null!=S&&(null==S||S.clearMissButton())}this.curPotValue=t.pot,this.potUi.UpdatePotTotal(this.curPotValue),this.historyManager.SetLiteral("*** HOLE CARDS ***")},r.onSUSPEND_ROUND=function(t){var e=this;console.log("SUSPEND_ROUND",t),this.roundState="SUSPEND_ROUND",this.lbReadyMessage.node.active=!1;var i=t.entities;this.myPrimaryCardIdx=-1,this.mySecondaryCardIdx=-1,this.enableSeats=[];for(var n=function(t){var n=e.seatPlayers[t],s=i.find((function(t){return t.seat==n})),a=e.entityUiElements[t];if(null==s)return null==a||a.setEscapee(),"continue";null==a||a.setUiPrepareRound(s),null==a||a.setSbMissButton(!1),null==a||a.setBbMissButton(!1),n==e.mySeat&&(e.myWaitStatus=s.wait,e.isFold=!1),e.enableSeats.push(s.seat)},s=0;s<this.seatPlayers.length;s++)n(s)},r.onREADY_ROUND=function(t){var e=this;console.log("READY_ROUND",t),this.roundState="READY_ROUND";var i=t.timeMS/1e3,n="A new game will start in "+i+" seconds";this.lbReadyMessage.string=n,this.lbReadyMessage.node.active=!0;var s=setInterval((function(){i--,n="A new game will start in "+i+" seconds",e.lbReadyMessage.string=n,i<0&&(e.lbReadyMessage.node.active=!1,clearInterval(s))}),1e3)},r.onPREPARE_ROUND=function(t){var e,i=this;console.log("PREPARE_ROUND",t),this.roundState="PREPARE_ROUND",this.lbReadyMessage.node.active=!1,this.dealerSeatPos=t.dealerSeatPos,this.sbSeatPos=t.sbSeatPos,this.bbSeatPos=t.bbSeatPos;var n=t.entities;this.startBetFromByServer=t.startBet,this.betMin=t.startBet,this.myPrimaryCardIdx=-1,this.mySecondaryCardIdx=-1,this.enableSeats=[],this.isAllin=!1,this.historyManager.InitializeHistory(t,this.mySeat);for(var s=function(t){var e=i.seatPlayers[t],s=n.find((function(t){return t.seat==e})),a=i.entityUiElements[t];if(null==s)return null==a||a.setEscapee(),"continue";e==i.mySeat&&(i.myWaitStatus=s.wait,i.isFold=!1);var o=s.missSb,r=s.missBb;if(a.setSbMissButton(o),a.setBbMissButton(r),1==s.wait)return a.setUiWait(),"continue";null==a||a.setUiSitBack(),i.enableSeats.push(s.seat),null==a||a.setUiPrepareRound(s)},a=0;a<this.seatPlayers.length;a++)s(a);null===(e=A.instance)||void 0===e||e.playShufflingCards(),this.clearUiCommunityCards(),this.clearUiPot(),this.clearPosSymbol();var o=this.getUiEntityFromSeat(this.dealerSeatPos);null==o||o.setUiPosSymbol("dealer");var r=this.getUiEntityFromSeat(this.sbSeatPos);null==r||r.setUiPosSymbol("sb");var l=this.getUiEntityFromSeat(this.bbSeatPos);null==l||l.setUiPosSymbol("bb")},r.onHANDLE_ESCAPEE=function(t){console.log("HANDLE_ESCAPEE",t);var e=t.seat,i=this.getUiEntityFromSeat(e);null==i||i.setEscapee()},r.onSHOW_FLOP=function(t){var e=this;console.log("SHOW_FLOP",t),this.roundState="SHOW_FLOP",this.clearUiEntitiesAction(),this.setAniChipsMoveToPot(!1,t.dpPot);var i=t.cards;this.historyManager.CommunityCards(this.roundState,null,i);for(var n=function(t){var n=i[t],s=e.sprCommunityCards[t];e.numCommunityCards[t]=n,setTimeout((function(){e.setAniDropOpenCard(s,100,e.getCardImg(0),e.getCardImg(n+1),2==t?function(){0!=e.isEnableSeat(e.mySeat)&&e.setUiMyHandRank()}:null)}),1e3+50*t)},s=0;s<3;s++)n(s)},r.onSHOW_TURN=function(t){var e=this;console.log("SHOW_TURN",t),this.roundState="SHOW_TURN",this.clearUiEntitiesAction(),this.setAniChipsMoveToPot(!1,t.dpPot);var i=t.cards;this.numCommunityCards[3]=i[0],this.historyManager.CommunityCards(this.roundState,this.numCommunityCards.slice(0,3),i),setTimeout((function(){e.setAniDropOpenCard(e.sprCommunityCards[3],100,e.getCardImg(0),e.getCardImg(i[0]+1),(function(){0!=e.isEnableSeat(e.mySeat)&&e.setUiMyHandRank()}))}),1e3)},r.onSHOW_RIVER=function(t){var e=this;console.log("SHOW_RIVER",t),this.roundState="SHOW_RIVER",this.clearUiEntitiesAction(),this.setAniChipsMoveToPot(!1,t.dpPot);var i=t.cards;this.numCommunityCards[4]=i[0],this.historyManager.CommunityCards(this.roundState,this.numCommunityCards.slice(0,4),i.slice(0,1)),setTimeout((function(){e.setAniDropOpenCard(e.sprCommunityCards[4],100,e.getCardImg(0),e.getCardImg(i[0]+1),(function(){0!=e.isEnableSeat(e.mySeat)&&e.setUiMyHandRank()}))}),1e3)},r.ShowAll=function(){var t=o(regeneratorRuntime.mark((function t(e,i){var n,s,a,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isAllin=!0,this.setAniChipsMoveToPot(!0,i),t.t0=this.roundState,t.next="BLIND_BET"===t.t0?5:"SHOW_FLOP"===t.t0?6:"SHOW_TURN"===t.t0?7:9;break;case 5:this.historyManager.CommunityCards("SHOW_FLOP",null,e.slice(0,3));case 6:this.historyManager.CommunityCards("SHOW_TURN",e.slice(0,3),e.slice(3,4));case 7:return this.historyManager.CommunityCards("SHOW_RIVER",e.slice(0,4),e.slice(4,5)),t.abrupt("break",9);case 9:return n=0,t.next=12,new Promise((function(t){return setTimeout(t,1500)}));case 12:s=regeneratorRuntime.mark((function t(i){var s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=o.numCommunityCards[i],e[i]!=s){t.next=4;break}return console.log("Card number equal is continue",e[i],s),t.abrupt("return","continue");case 4:return n++,a=0,a=i<3?50:i<4?1e3:2e3,t.next=9,new Promise((function(t){return setTimeout(t,a)}));case 9:console.log("start win animation : ani drop open card ",n),o.setAniDropOpenCard(o.sprCommunityCards[i],100,o.getCardImg(0),o.getCardImg(e[i]+1),(function(){0!=o.isEnableSeat(o.mySeat)&&(o.numCommunityCards[i]=e[i],o.enableSeats.forEach((function(t){var e=o.getUiEntityFromSeat(t);if(1!=e.isFold){var i=o.playersCARD[t],n=o.getHandRank(i.primaryCard,i.secondaryCard,o.numCommunityCards);e.setUiHandRank(n)}})))}));case 11:case"end":return t.stop()}}),t)})),a=0;case 14:if(!(a<this.numCommunityCards.length)){t.next=22;break}return t.delegateYield(s(a),"t1",16);case 16:if("continue"!==t.t1){t.next=19;break}return t.abrupt("continue",19);case 19:a++,t.next=14;break;case 22:this.entityUiElements.forEach((function(t){return t.endTurn()})),this.setUiWinners(),this.uiPlayerAction.hide();case 25:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.onCLEAR_ROUND=function(t){var e=this;console.log("onCLEAR_ROUND",t),this.isAllin=!1;var i=t.entities;this.historyManager.SaveHistory(i),1==this.historyManager.IsPrepare()?this.btnHistory.node.active=!0:this.btnHistory.node.active=!1;for(var n=function(t){var n=e.seatPlayers[t],s=e.getUiEntityFromSeat(n),a=i.find((function(t){return t.seat==n}));if(null==a)return null==s||s.setEscapee(),"continue";null==s||s.setUiPrepareRound(a),n==e.mySeat&&(e.myChips=a.chips)},s=0;s<this.seatPlayers.length;s++)n(s);this.setUiHideHiddenCard(),this.clearUiCommunityCards(),this.clearUiPot();var a=i.find((function(t){return t.seat==e.mySeat}));if(console.log("let me = entities.find( elem => elem.seat == this.mySeat )",a),null!=a){if(E.balance=a.balance,0==a.enoughChip){if(this.uiNotice.closePopup(),this.uiHandsHistory.closePopup(),this.uiBuyChips.closePopup(),console.log("me.enoughChip balance:%d, chips:%d, big:%d, min:%d",E.balance,a.chips,E.big,E.minStakeRatio),E.balance+a.chips<E.big*E.minStakeRatio)return void this.uiNotice.notice("Not enough balance.\r\nYour balance is less than the minimum stack.\r\nThe game will end.",0,!1,!0);var o=this;this.uiNotice.closePopup(),console.log("balance: %d, small: %d, big: %d, myChips: %d, mySeat: %d",E.balance,E.small,E.big,this.myChips,this.mySeat),this.uiBuyIn.reBuyIn(E.balance,E.small,E.big,this.myChips,this.mySeat,(function(t){var e;t||(null===(e=o.room)||void 0===e||e.leave())}))}this.btnShowCard.node.active=!1}},r.onCHECK=function(t){var e;console.log("CHECK",t),null===(e=A.instance)||void 0===e||e.playCheck();var i=t.seat,n=this.getUiEntityFromSeat(i);null!=n&&(null==n||n.setUiAction("check"),this.historyManager.Check(n.lbNickName.string))},r.onRAISE=function(t){var e;console.log("RAISE",t),null===(e=A.instance)||void 0===e||e.playRaise(),this.clearUiEntitiesAction(),this.curPotValue=t.pot;var i=t.seat,n=this.getUiEntityFromSeat(i);if(null!=n){var s=Number.parseInt(t.chips);null==n||n.setUiChips(s),this.mySeat==i&&(this.myChips=s),1==t.allin?null==n||n.setUiAllIn():null==n||n.setUiAction("raise"),this.historyManager.Raise(n.lbNickName.string,t.bet,t.allin),this.potUi.UpdatePotTotal(this.curPotValue),null==n||n.setUiBetValue(t.bet,p.GRAY)}},r.onFOLD=function(t){var e;console.log("FOLD",t),null===(e=A.instance)||void 0===e||e.playFold();var i=t.seat,n=this.getUiEntityFromSeat(i);null!=n&&(n.clearUiAction(),this.historyManager.Fold(i,this.roundState),this.mySeat!=i?n.clearUiHandCards():(n.setUiHandCardsFold(),this.isFold=!0),n.setUiFold(),this.mySeat!=i&&(n.sprHiddenCards[0].color=p.GRAY,n.sprHiddenCards[1].color=p.GRAY))},r.onCALL=function(t){var e;console.log("CALL",t),null===(e=A.instance)||void 0===e||e.playCall(),this.curPotValue=t.pot;var i=t.seat,n=this.getUiEntityFromSeat(i);if(null!=n){var s=Number.parseInt(t.chips);null==n||n.setUiChips(s),this.mySeat==i&&(this.myChips=s),1==t.allin?null==n||n.setUiAllIn():null==n||n.setUiAction("call"),this.historyManager.Call(n.lbNickName.string,t.bet,t.allin),this.potUi.UpdatePotTotal(this.curPotValue),null==n||n.setUiBetValue(t.bet,p.GRAY)}},r.onBET=function(t){var e;console.log("BET",t),null===(e=A.instance)||void 0===e||e.playBet(),this.clearUiEntitiesAction(),this.curPotValue=t.pot;var i=t.seat,n=this.getUiEntityFromSeat(i);if(null!=n){var s=Number.parseInt(t.chips);null==n||n.setUiChips(s),this.mySeat==i&&(this.myChips=s),1==t.allin?null==n||n.setUiAllIn():null==n||n.setUiAction("bet"),this.historyManager.Bet(n.lbNickName.string,t.bet,t.allin),this.potUi.UpdatePotTotal(this.curPotValue),null==n||n.setUiBetValue(t.bet,p.GRAY)}},r.onSitOut=function(t){var e=t.seat;if(null!=e)if(e===this.mySeat)this.sitOutRoot.active=!1,this.sitBackRoot.active=!0;else{var i=this.getUiEntityFromSeat(e);null==i||i.setUiSitOut()}},r.onSitBack=function(t){var e=t.seat;if(null!=e)if(e===this.mySeat)this.sitOutRoot.active=!0,this.sitBackRoot.active=!1;else{var i=this.getUiEntityFromSeat(e);null==i||i.setUiSitBack()}},r.onSHOW_CARD=function(t){var e;console.log("onSHOW_CARD",t);var i=t.seat,n=t.cards;if(0!=this.isEnableSeat(i)&&this.mySeat!=i){this.playersCARD={};var s=this.getUiEntityFromSeat(i);if(null!=s){var a=n[0],o=n[1];this.playersCARD[i]={primaryCard:a,secondaryCard:o},s.sprHandCards[0].spriteFrame=this.cardRes[a+1],s.sprHandCards[1].spriteFrame=this.cardRes[o+1],s.sprHandCards[0].node.active=!0,s.sprHandCards[1].node.active=!0,s.sprHandCardShadow.node.active=!0;var r=this.getHandRank(a,o,this.numCommunityCards);s.setUiHandRank(r),s.sprHiddenCards[0].node.active=!1,s.sprHiddenCards[1].node.active=!1,this.historyManager.ForceShowCard(i,n,r),null===(e=A.instance)||void 0===e||e.playShowHand()}}else if(this.mySeat==i){var l=this.getHandRank(n[0],n[1],this.numCommunityCards);this.historyManager.ForceShowCard(i,t.cards,l)}},r.onPLAYER_CARDS=function(t){var e=this;console.log("onPLAYER_CARDS",t);var i=t.cards,n=t.winners,s=t.allin,a=Object.keys(i);this.playersCARD={},this.historyManager.SetLiteral("*** SHOW DOWN ***"),a.forEach((function(a){var o=Number.parseInt(a);if(0!=e.isEnableSeat(o)){var r=e.getUiEntityFromSeat(o);if(null!=r){e.playersCARD[o]={primaryCard:i[a][0],secondaryCard:i[a][1]};var l=i[a][0],u=i[a][1],h=[i[a][0],i[a][1]],c=!0;0==s&&0==n[o]&&(c=!1);var d="";if(d=1==s?e.getHandRank(l,u,t.communities):e.getHandRank(l,u,e.numCommunityCards),e.historyManager.ShowCards(o,r.lbNickName.string,h,d,c),e.mySeat!=o)if(0!=c){e.setAniOpenHand(r.sprHandCards[0],e.cardRes[l+1],(function(){})),e.setAniOpenHand(r.sprHandCards[1],e.cardRes[u+1],(function(){r.sprHandCardShadow.node.active=!0;var t=e.getHandRank(l,u,e.numCommunityCards);r.setUiHandRank(t)}));var m=new S(r.vecHiddenCards[0]);m.y-=30,e.setAniHideHiddenCard(r.sprHiddenCards[0],m,.1,(function(){})),(m=new S(r.vecHiddenCards[1])).y-=30,e.setAniHideHiddenCard(r.sprHiddenCards[1],m,.1,(function(){}))}else r.setUiMuck()}else console.error("onPlayerCard - UiEntity is Null seat Number : "+o)}else console.error("onPlayerCard - is Not enableSeat seat Number : "+o)})),this.entityUiElements.forEach((function(t){return t.endTurn()})),this.clearUiEntitiesAction(),this.clearUiEntitiesBetValue(),this.uiPlayerAction.hide()},r.onWINNERS=function(t){var e=this;console.log("WINNERS",t),this.msgWINNERS=t;var i=-1!=this.myPrimaryCardIdx&&-1!=this.mySecondaryCardIdx;!1===t.isAllInMatch?this.setUiWinners():this.ShowAll(t.cards,t.dpPot),this.uiPlayerAction.hide();for(var n=function(i){var n=t.dpPot[i],s=[],a=[];e.historyManager.SetWinners(n,t.skip);for(var o=function(t){var i=e.getUiEntityFromSeat(n.players[t]),o=null!=n.winner.find((function(e){return e==n.players[t]}));if(null==i)return console.error("onWinner - uiEnt is null seat : "+n.players[t]),"continue";1==o&&s.push(i.lbNickName.string),a.push(i.lbNickName.string)},r=0;r<n.players.length;r++)o(r);e.historyManager.Winner(i,a,s,n.total,t.skip)},s=0;s<t.dpPot.length;s++)n(s);var a=t.dpPot.length;if(1==this.isAllin?this.historyManager.SetBoard(t.cards,this.curPotValue,a,t.skip):this.historyManager.SetBoard(this.numCommunityCards,this.curPotValue,a,t.skip),0!=i){t.winners.find((function(t){return t.seat===e.mySeat}));if(0!=t.skip)this.btnShowCard.node.active=!0;else{if(null==this.btnShowCard)return;if(1==this.isAllin){this.btnShowCard.node.active=!1;for(var o=t.folders,r=0;r<o.length;r++)if(o[r]==this.mySeat){this.btnShowCard.node.active=!0;break}}else{var l=0;l=setTimeout((function(){e.btnShowCard.node.active=!0,clearTimeout(l)}),1500)}}}},r.OnClickShow=function(){if(this.btnShowCard.node.active=!1,null!=this.msgWINNERS){var t={seat:this.mySeat};this.sendMsg("SHOW_CARD",t)}},r.setUiHideHiddenCard=function(){var t=this;this.enableSeats.forEach((function(e){var i=t.getUiEntityFromSeat(e);if(null!=i&&t.mySeat!=e){var n=new S(i.vecHiddenCards[0]);n.y-=30,t.setAniHideHiddenCard(i.sprHiddenCards[0],n,.1,(function(){})),(n=new S(i.vecHiddenCards[1])).y-=30,t.setAniHideHiddenCard(i.sprHiddenCards[1],n,.1,(function(){}))}}))},r.setUiWinners=function(){var t,e=this;console.log("setUiWinners"),this.myPrimaryCardIdx=-1,this.mySecondaryCardIdx=-1;var i=this.msgWINNERS.winners;this.entityUiElements.forEach((function(t){return t.endTurn()})),this.ResultPotAnimation(i,this.msgWINNERS.dpPot).then((function(){e.setAniPotUiFadeOut()})),null===(t=A.instance)||void 0===t||t.playWin()},r.ResultPotAnimation=function(){var t=o(regeneratorRuntime.mark((function t(e,i){var n,s,a,o,r,l,u,h,c,d,m,p,y,S,C,g=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==this.msgWINNERS.skip){t.next=6;break}for(n=0;n<e.length;n++)s=e[n],null==(a=this.getUiEntityFromSeat(s.seat))&&console.error("resultPotAnim - uiEntity is null seat : "+s.seat),null==a||a.setUiPlay(),!0===(o=s.fold)?null==a||a.SetReturn(s.winAmount):null==a||a.setAniWinner(s.winAmount),this.setAniPotMoveToWinner(this.potUi.maxPotLabelRoot,s.seat,n,s.chips,!0,o);return this.potUi.UpdatePotTotal(0),t.next=5,new Promise((function(t){return setTimeout(t,2e3)}));case 5:return t.abrupt("return");case 6:this.setUiPot(i),r=this.potUi.GetPots(),l=this.potUi.svPots,u=[],h=[],c=0,l.forEach((function(t){c+=t.total,t.players.length<=1?u.push(t):h.push(t)})),d=h.length,this.potUi.UpdatePotTotal(c),this.potUi.SetPotCount(d),m=0,p=function(t){var i=u[t];if(i.players.length>1)return"continue";c-=i.total,g.potUi.UpdatePotTotal(c);var n=g.getUiEntityFromSeat(i.players[0]);null==n||n.setUiPlay(),null==n||n.SetReturn(i.total);var s=e.find((function(t){return t.seat==i.players[0]}));g.setAniPotMoveToWinner(g.potUi.maxPotLabel.node,i.players[0],m,null==s?i.total:s.chips,0==m,!0,.8),m++},y=0;case 19:if(!(y<u.length)){t.next=26;break}if("continue"!==p(y)){t.next=23;break}return t.abrupt("continue",23);case 23:y++,t.next=19;break;case 26:return t.next=28,new Promise((function(t){return setTimeout(t,1500)}));case 28:S=regeneratorRuntime.mark((function t(i){var n,s,a,o,l,u,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=h[i],s=function(t){var i=null==n.rake?n.total/n.winner.length:(n.total-n.rake)/n.winner.length,s=g.getUiEntityFromSeat(n.winner[t]);null==s&&console.error("resultPotAnim NonSkip - uiEntity is null seat : "+n.winner[t]),null==s||s.setUiPlay(),n.winner.length>1?null==s||s.SetDraw(i):null==s||s.setAniWinner(i);var a=e.find((function(e){return e.seat==n.winner[t]}));g.setAniPotMoveToWinner(r[0].showRoot,n.winner[t],t,null==a?n.total:a.chips,0==t,!1)},a=0;a<n.winner.length;a++)s(a);d--,g.potUi.SetPotCount(d),c-=n.total,g.potUi.UpdatePotTotal(c),o=i+1,l=0;case 9:if(!(l<r.length)){t.next=21;break}if(u=r[l],!(o>=h.length)){t.next=14;break}return u.showRoot.active=!1,t.abrupt("continue",18);case 14:m=h[o],u.showRoot.active=!0,u.valueLabel.string=null==m.rake?m.total.toLocaleString().split(".")[0]:(m.total-m.rake).toLocaleString().split(".")[0]+" / "+m.rake,o++;case 18:l++,t.next=9;break;case 21:return t.next=23,new Promise((function(t){return setTimeout(t,2e3)}));case 23:case"end":return t.stop()}}),t)})),C=0;case 30:if(!(C<h.length)){t.next=35;break}return t.delegateYield(S(C),"t0",32);case 32:C++,t.next=30;break;case 35:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.setAniDropOpenCard=function(t,e,i,n,s){var a,o,r=t.getComponent(b);r.width,r.height;null===(a=A.instance)||void 0===a||a.playShowCenterCard(),null===(o=A.instance)||void 0===o||o.playUpendCenterCard(),t.spriteFrame=n,null!=s&&s()},r.setAniCardDispensing=function(){var t=this,e=0;if(null!=this.ndCardDispensingRoot){for(var i=function(i){var n=t.seatPlayers[i];if(0==t.isEnableSeat(n))return"continue";e++;var s=t.entityUiElements[i];setTimeout((function(){var e,i=s.sprHiddenCards[0],a=t.ndCardDispensingRoot.parent.getComponent(b).convertToWorldSpaceAR(t.ndCardDispensingRoot.position);a=i.node.parent.getComponent(b).convertToNodeSpaceAR(a),null===(e=A.instance)||void 0===e||e.playCardDispensing(),t.setAniMoveToPos(i,a,s.vecHiddenCards[0],.6,t.getCardImg(0),n==t.mySeat?function(){var t;return null===(t=A.instance)||void 0===t?void 0:t.playPutHandCard()}:null)}),100*e)},n=0;n<this.seatPlayers.length;n++)i(n);for(var s=function(i){var n=t.seatPlayers[i];if(0==t.isEnableSeat(n))return"continue";e++;var s=t.entityUiElements[i];setTimeout((function(){var e,i=s.sprHiddenCards[1],a=t.ndCardDispensingRoot.parent.getComponent(b).convertToWorldSpaceAR(t.ndCardDispensingRoot.position);a=i.node.parent.getComponent(b).convertToNodeSpaceAR(a),null===(e=A.instance)||void 0===e||e.playCardDispensing(),t.setAniMoveToPos(i,a,s.vecHiddenCards[1],.6,t.getCardImg(0),n==t.mySeat?function(){var t;return null===(t=A.instance)||void 0===t?void 0:t.playPutHandCard()}:null)}),100*e)},a=0;a<this.seatPlayers.length;a++)s(a);setTimeout((function(){var e;if(-1!=t.myPrimaryCardIdx){var i=t.getUiEntityFromSeat(t.mySeat);if(null!=i){null===(e=A.instance)||void 0===e||e.playHideHandHiddenCard();var n=new S(i.vecHiddenCards[0]);n.y-=30,t.setAniHideHiddenCard(i.sprHiddenCards[0],n,.1,(function(){})),(n=new S(i.vecHiddenCards[1])).y-=30,t.setAniHideHiddenCard(i.sprHiddenCards[1],n,.1,(function(){var t;null===(t=A.instance)||void 0===t||t.playUpendHandCard()})),t.setAniOpenHand(i.sprHandCards[0],t.cardRes[t.myPrimaryCardIdx+1],(function(){})),t.setAniOpenHand(i.sprHandCards[1],t.cardRes[t.mySecondaryCardIdx+1],(function(){i.sprHandCardShadow.node.active=!0;var e=t.getHandRank(t.myPrimaryCardIdx,t.mySecondaryCardIdx,t.numCommunityCards);i.setUiHandRank(e)}))}}}),1e3)}else console.error("return cardDispensingRoot ")},r.setAniMoveToPos=function(t,e,i,n,s,a){t.node.active=!0,t.spriteFrame=s,t.color=new p(255,255,255,255),t.node.position=i,null!=a&&a()},r.setAniOpenHand=function(t,e,i){t.node.active=!0,t.spriteFrame=e,null!=i&&i()},r.setAniHideHiddenCard=function(t,e,i,n){0!=t.node.active&&(t.node.active=!1,null!=n&&n())},r.setAniChipsMoveToPot=function(t,e){var i,n=this,s=-1;(this.entityUiElements.forEach((function(t){s=t.setAniChipsMoveToPot(n.potUi.maxPotLabelRoot)})),-1!=s)&&(null===(i=A.instance)||void 0===i||i.playChipMoveStart());setTimeout((function(){n.setUiPot(e)}),1e3*s)},r.setAniPotMoveToWinner=function(t,e,i,n,s,a,o){void 0===o&&(o=1);var r=!1===a?this.objPotMoveToWinnerChips[i]:this.objPotReturnChips[i],l=this.getUiEntityFromSeat(e);if(null!=l)if(!0!==a){var u=[];u.push(null==t?this.potUi.maxPotLabelRoot:t),l.bezierPoints.forEach((function(t){return u.push(t)})),u.push(l.node);for(var h=0;h<r.sprChips.length;h++){for(var c=r.sprChips[h],d=.05*h,m=[],y=0;y<u.length;y++){var S=u[y].parent.getComponent(b).convertToWorldSpaceAR(u[y].position);S=c.node.parent.getComponent(b).convertToNodeSpaceAR(S),m.push(S)}var C=h==r.sprChips.length-1;this.setTweenFadeInOutFromToMove(c,new p(p.WHITE),m,d,o,this.easeOutQuart,(function(){var t;1==s&&(null===(t=A.instance)||void 0===t||t.playChipMoveStart())}),C?function(){var t;(null==l||l.setUiChips(n),1==s)&&(null===(t=A.instance)||void 0===t||t.playChipMoveEnd())}:function(){var t;1==s&&(null===(t=A.instance)||void 0===t||t.playChipMoveEnd())})}}else for(var g=0;g<r.sprChips.length;g++){var f=r.sprChips[g],v=.05*g,R=null==t?this.potUi.maxPotLabelRoot:t,P=R.parent.getComponent(b).convertToWorldSpaceAR(R.position);P=f.node.parent.getComponent(b).convertToNodeSpaceAR(P);var E=l.node.parent.getComponent(b).convertToWorldSpaceAR(l.node.position);E=l.node.parent.getComponent(b).convertToNodeSpaceAR(E);var U=g==r.sprChips.length-1;this.setTweenMoveFromTo(f,new p(p.WHITE),P,E,v,.8,this.easeOutQuart,(function(){var t;1==s&&(null===(t=A.instance)||void 0===t||t.playChipMoveStart())}),U?function(){var t;(null==l||l.setUiChips(n),1==s)&&(null===(t=A.instance)||void 0===t||t.playChipMoveEnd())}:function(){var t;1==s&&(null===(t=A.instance)||void 0===t||t.playChipMoveEnd())})}},r.setAniPotUiFadeOut=function(){var t=this;if(0!=this.sprPotRoot.color.a){f(this.sprPotRoot.node).delay(.1).call((function(){t.sprPotRoot.color=new p(255,255,255,255)})).to(.2,{},{onUpdate:function(e,i){t.sprPotRoot.color=new p(255,255,255,255*(1-i))},onComplete:function(e){t.clearUiPot(),t.sprPotRoot.color=new p(255,255,255,0)}}).union().start()}},r.setTweenMoveFromTo=function(t,e,i,n,s,a,o,r,l){t.node.active=!0,t.color=new p(e.r,e.g,e.b,0);var u=f(t.node).set({position:i}).delay(s);null!=r&&u.call(r),u.to(a,{position:n},{onUpdate:function(i,n){var s=v(0,.25,.25,1,n),a=v(255,255,255,0,s);a>e.a&&(a=e.a),t.color=new p(e.r,e.g,e.b,a)}}),null!=l&&u.call(l),u.union(),u.start()},r.setTweenFadeInOutFromToMove=function(t,e,i,n,s,a,o,r){t.node.active=!0,t.color=new p(e.r,e.g,e.b,0);var l=f(t.node).set({position:i[0]}).delay(n);null!=o&&l.call(o),l.to(s,{},{onUpdate:function(n,s){var a=v(0,.25,.25,1,s),o=v(i[0].x,i[1].x,i[2].x,i[3].x,a),r=v(i[0].y,i[1].y,i[2].y,i[3].y,a);t.node.position=new S(o,r,0);var l=v(255,255,255,0,a);l>e.a&&(l=e.a),t.color=new p(e.r,e.g,e.b,l)}}),null!=r&&l.call(r),l.union(),l.start()},r.easeOutQuart=function(t){return 1-Math.pow(1-t,4)},r.getBezierSampleValue=function(t,e){var i=v(t[0].x,t[1].x,t[2].x,t[3].x,e),n=v(t[0].y,t[1].y,t[2].y,t[3].y,e);return new S(i,n,0)},r.onBUY_IN=function(t){var e=this;if(null!==this.uiBuyIn){E.balance=Number.parseInt(t.balance),E.small=Number.parseInt(t.small),E.big=Number.parseInt(t.big),E.id=Number.parseInt(t.id),E.passPrice=t.passPrice,E.minStakeRatio=t.minStakeRatio,E.maxStakeRatio=t.maxStakeRatio;var i=this;this.uiNotice.closePopup(),this.uiHandsHistory.closePopup(),this.seatSelectUi.pause(),this.uiBuyIn.buyIn(E.balance,E.small,E.big,t.myChips,t.passPrice,E.id,(function(t){if(!t)return i.room.send("CANCEL_BUY_IN"),e.seatSelectUi.unpause(),void e.seatSelectUi.onResultFail()}))}else console.error("buyIn property is null.")},r.onRES_BUY_IN=function(t){var e=this,i=t.ret;if(-1===i){this.uiNotice.notice("There is not enough balance to purchase the minimum buy-in amount.",0,!1,!0,(function(){var t,i;!0===e.seatSelectUi.node.active?(console.log("onResBuyIn Leave"),e.seatSelectUi.end(),null===(t=e.room)||void 0===t||t.leave()):null===(i=e.room)||void 0===i||i.leave()}))}else{var n;if(this.uiBuyIn.buyInDone(),this.seatSelectUi.end(),this.show(),0!==i)return console.error("[ onResBuyIn ] error : "+t.message),void(null===(n=this.room)||void 0===n||n.leave())}},r.onRES_RE_BUY=function(t){if(console.log("onRE_BUY",t),this.uiBuyIn.reBuyInDone(),this.seatSelectUi.end(),0==t.resultCode){E.balance=Number.parseInt(t.balance);var e=this.getUiEntityFromSeat(this.mySeat),i=Number.parseInt(t.chips);e.setUiChips(i),this.myChips=i}else console.error("onRE_BUY",t.resultCode,t.msg)},r.onRE_BUY_IN=function(t){console.log("onRE_BUY_IN",t)},r.onRES_ADD_CHIPS_REQUEST=function(t){console.log("onRES_ADD_CHIPS_REQUEST",t),this.btnAddChips.interactable=!0;var e=t.code;if(-1!==e)if(e>0){var i=this.getAddChipsErrorMessage(e);this.uiNotice.notice(i,0,!0)}else{var n=t.balance,s=t.initChips,a=t.amount;this.uiBuyChips.addChips(this.mySeat,n,s,a,(function(t){}))}},r.onRES_ADD_CHIPS=function(t){console.log("onRES_ADD_CHIPS",t),this.uiBuyChips.addChipsInDone(),this.seatSelectUi.end();var e=t.code;if(0===e){var i=t.pending,n=t.balance,s=t.chips,a=t.amount;if(!0===i){this.uiNotice.notice("Your stack will be updated when the current hand is finished",0,!0)}else{var o=this.getUiEntityFromSeat(this.mySeat);E.balance=n,o.setUiChips(s),this.myChips=s;var r=P.getCurrencyString(a)+" chips added";this.uiNotice.notice(r,0,!0)}}else{var l=this.getAddChipsErrorMessage(e);this.uiNotice.notice(l,0,!0,!1)}},r.onRES_ADD_CHIPS_PEND=function(t){console.log("onRES_ADD_CHIPS_PEND",t);var e=t.code;if(0===e){var i=this.getUiEntityFromSeat(this.mySeat),n=t.balance,s=t.chips,a=t.amount;E.balance=n,i.setUiChips(s),this.myChips=s;var o=P.getCurrencyString(a)+" chips added";this.uiNotice.notice(o,0,!0)}else{var r=this.getAddChipsErrorMessage(e);this.uiNotice.notice(r,0,!0)}},r.onBuyPass=function(t){E.balance=t.balance,E.passPrice=t.passPrice,E.passTerm=t.passTerm;var e=t.chips;this.uiHandsHistory.closePopup(),this.uiNotice.closePopup(),this.uiPass.notice(this.mySeat,e,E.passPrice,E.passTerm)},r.resBuyPass=function(t){if(console.log("resBuyPass",t),0==t.resultCode){this.lbRemainTime.string=this.getRemainTimeString2(t.remainTimeMS),E.balance=Number.parseInt(t.balance);var e=this.getUiEntityFromSeat(this.mySeat),i=Number.parseInt(t.chips);e.setUiChips(i),this.myChips=i,this.uiHandsHistory.closePopup(),this.uiPass.closePopup()}else console.error("resBuyPass",t.resultCode,t.msg)},r.onTIME_OVER=function(t){this.myChips=t.chips,E.balance=t.balance,this.uiHandsHistory.closePopup(),this.uiNotice.closePopup();if(t.enoughChip)this.uiPass.notice(this.mySeat,this.myChips,E.passPrice,E.passTerm);else{if(this.uiNotice.closePopup(),this.uiHandsHistory.closePopup(),this.uiBuyChips.closePopup(),E.balance+this.myChips<E.big*E.minStakeRatio)return void this.uiNotice.notice("You've run out of time.\r\nYour balance is less than the minimum stack.\r\nThe game will end.",0,!1,!0);var e=this;this.uiBuyIn.reBuyIn(E.balance,E.small,E.big,this.myChips,this.mySeat,(function(t){var i;t?e.uiPass.notice(e.mySeat,e.myChips,E.passPrice,E.passTerm):null===(i=e.room)||void 0===i||i.leave()}))}},r.onPing=function(t){this.room.send("pong",{seat:this.mySeat})},r.leave=function(){var t;console.log("onClickExit"),null===(t=this.room)||void 0===t||t.leave()},r.getRemainTimeString2=function(t){t<0&&(t=0);var e=new Date(t+999),i=e.getMinutes(),n=e.getSeconds();return 0>i&&(i=0),0>n&&(n=0),(i+"").padStart(2,"0")+":"+(n+"").padStart(2,"0")},r.onRemainTime=function(t){var e=Number.parseInt(t.timer);this.lbRemainTime.string=this.getRemainTimeString2(e)},r.getAddChipsErrorMessage=function(t){var e="UNKNOWN MESSAGE";switch(t){case-1:e="PLAYER IS NULL OR UNDEFINED";break;case 1:e="RES_RE_BUY_REQUEST_ERROR1: USE RE-BUY FALSE";break;case 2:e="Already requested add chips";break;case 3:e="Already have enough chips.";break;case 4:e="There is no balance";break;case 5:e="You cannot add chips";break;case 6:e="RES_RE_BUY_REQUEST_ERROR4: MAX RE-BUY COUNT OVER"}return e},i}(R),e(Rt,"seatMaxFromServer",6),e(Rt,"preLoadCardRes",{}),at=i((st=Pt).prototype,"uiPass",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=i(st.prototype,"uiBuyIn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=i(st.prototype,"uiBuyChips",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=i(st.prototype,"uiNotice",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=i(st.prototype,"uiPopup",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=i(st.prototype,"uiHandsHistory",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=i(st.prototype,"lbTimeNotice",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=i(st.prototype,"potUi",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=i(st.prototype,"btnShowCard",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=i(st.prototype,"sitOutRoot",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=i(st.prototype,"btnSitOut",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=i(st.prototype,"sitBackRoot",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=i(st.prototype,"btnSitBack",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=i(st.prototype,"btnHistory",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=i(st.prototype,"windowControlRoot",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=i(st.prototype,"exitControlRoot",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=i(st.prototype,"seatSelectUi",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=st))||nt));r._RF.pop()}}}));

System.register("chunks:///_virtual/UiEntity.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./AudioManager.ts"],(function(t){"use strict";var i,e,n,s,o,a,r,h,d,l,c,p,u,v,C,m,g,B;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,a=t.Label,r=t.Sprite,h=t.Vec3,d=t.Node,l=t.UITransform,c=t.Color,p=t.resources,u=t.tween,v=t.Quat,C=t.bezier,m=t.Component},function(t){g=t.CommonUtils},function(t){B=t.AudioManager}],execute:function(){var b;s._RF.push({},"a2264CpZzlHRZkpTJ778opi","UiEntity",void 0);var A=o.ccclass;t("UiEntity",A("UiEntity")(b=function(t){function s(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,e(n(i),"isChildRegistered",!1),e(n(i),"sprAvatar",null),e(n(i),"lbNickName",null),e(n(i),"lbChips",null),e(n(i),"lbSitOut",null),e(n(i),"sprHandCards",[null,null]),e(n(i),"sprHandCardShadow",null),e(n(i),"sprHiddenCards",[null,null]),e(n(i),"vecHiddenCards",[null,null]),e(n(i),"sprSelected",null),e(n(i),"sprTimer",null),e(n(i),"timerBeginColor",c.YELLOW),e(n(i),"timerEndColor",c.RED),e(n(i),"timerDeltaTime",0),e(n(i),"turnDuration",20),e(n(i),"playTimeLimitSound",!1),e(n(i),"posSymbols",{}),e(n(i),"dealable",null),e(n(i),"sprMissSb",null),e(n(i),"sprMissBb",null),e(n(i),"actions",{}),e(n(i),"actionFold",null),e(n(i),"actionAllIn",null),e(n(i),"sprActionValueRoot",null),e(n(i),"oriBetChipRootColor",new c(c.WHITE)),e(n(i),"oriBetChipRootPos",new h(h.ZERO)),e(n(i),"sprBetValueBackground",null),e(n(i),"lbBetValue",null),e(n(i),"sprBetChip",null),e(n(i),"sprMuck",null),e(n(i),"oriBetChipPos",new h(h.ZERO)),e(n(i),"sprBetChipAniGoToPotUi",null),e(n(i),"lbHandRank",null),e(n(i),"ndHandRankBackground",null),e(n(i),"isFold",!1),e(n(i),"isMe",!1),e(n(i),"isUiSitOut",!1),e(n(i),"sprFoldCover",null),e(n(i),"bezierPoints",[]),e(n(i),"sprWinAni1",null),e(n(i),"sprWinAni2",null),e(n(i),"sprWinAni3",null),e(n(i),"vecWinAni3",new h),e(n(i),"ndWinBadge",null),e(n(i),"lbWinAmount",null),e(n(i),"ndDrawBadge",null),e(n(i),"lbDrawAmount",null),e(n(i),"ndReturnBadge",null),e(n(i),"lbReturnAmount",null),e(n(i),"winTweens",[]),e(n(i),"timeOutNum",-1),i}i(s,t);var o=s.prototype;return o.childRegistered=function(){var t=this;if(1!=this.isChildRegistered){this.isChildRegistered=!0,this.lbNickName=this.node.getChildByPath("lb_name").getComponent(a),this.lbNickName.string="empty",this.lbChips=this.node.getChildByPath("lb_chips").getComponent(a),this.lbChips.node.active=!1,this.lbSitOut=this.node.getChildByPath("lb_sitOut").getComponent(a),this.lbSitOut.node.active=!1,this.sprTimer=this.node.getChildByPath("spr_timer").getComponent(r),this.sprTimer.node.active=!1,this.sprSelected=this.node.getChildByPath("spr_selected").getComponent(r),this.sprSelected.node.active=!1,this.sprAvatar=this.node.getChildByPath("spr_avatar").getComponent(r),this.sprAvatar.node.active=!1,this.sprHandCards[0]=this.node.getChildByPath("spr_handCard01").getComponent(r),this.sprHandCards[0].node.active=!1,this.sprHandCards[1]=this.node.getChildByPath("spr_handCard02").getComponent(r),this.sprHandCards[1].node.active=!1,this.sprHandCardShadow=this.node.getChildByPath("spr_handCard03").getComponent(r),this.sprHandCardShadow.node.active=!1,this.sprHiddenCards[0]=this.node.getChildByPath("spr_hiddenCard01").getComponent(r),this.vecHiddenCards[0]=new h(this.sprHiddenCards[0].node.position),this.sprHiddenCards[0].node.active=!1,this.sprHiddenCards[1]=this.node.getChildByPath("spr_hiddenCard02").getComponent(r),this.vecHiddenCards[1]=new h(this.sprHiddenCards[1].node.position),this.sprHiddenCards[1].node.active=!1,this.ndHandRankBackground=this.node.getChildByPath("spr_handRank"),this.ndHandRankBackground.active=!1,this.lbHandRank=this.node.getChildByPath("lb_handRank").getComponent(a),this.lbHandRank.node.on(d.EventType.SIZE_CHANGED,(function(){var i=t.lbHandRank.node.getComponent(l),e=t.ndHandRankBackground.getComponent(l);e.setContentSize(i.contentSize.width+40,e.height)}),this),this.lbHandRank.node.active=!1,this.sprFoldCover=this.node.getChildByPath("spr_fold"),this.sprFoldCover.active=!1,this.actionFold=this.node.getChildByPath("spr_action_fold").getComponent(r),this.actionFold.node.active=!1,this.actionAllIn=this.node.getChildByPath("spr_action_allin").getComponent(r),this.actionAllIn.node.active=!1,this.actions.call=this.node.getChildByPath("spr_action_call").getComponent(r),this.actions.call.node.active=!1,this.actions.check=this.node.getChildByPath("spr_action_check").getComponent(r),this.actions.check.node.active=!1,this.actions.bet=this.node.getChildByPath("spr_action_bet").getComponent(r),this.actions.bet.node.active=!1,this.actions.raise=this.node.getChildByPath("spr_action_raise").getComponent(r),this.actions.raise.node.active=!1,this.posSymbols.dealer=this.node.getChildByPath("spr_dealer").getComponent(r),this.posSymbols.dealer.node.active=!1,this.posSymbols.sb=this.node.getChildByPath("spr_s,blind").getComponent(r),this.posSymbols.sb.node.active=!1,this.posSymbols.bb=this.node.getChildByPath("spr_b,blind").getComponent(r),this.posSymbols.bb.node.active=!1,this.dealable=this.node.getChildByPath("dealable").getComponent(r),this.dealable.node.active=!1,this.sprMissSb=this.node.getChildByPath("spr_missSb").getComponent(r),this.sprMissSb.node.active=!1,this.sprMissBb=this.node.getChildByPath("spr_missBb").getComponent(r),this.sprMissBb.node.active=!1,this.sprActionValueRoot=this.node.getChildByPath("spr_action_value").getComponent(r),this.sprActionValueRoot.node.active=!1,this.sprBetValueBackground=this.node.getChildByPath("spr_action_value").getComponent(r),this.sprBetValueBackground.node.active=!1,this.lbBetValue=this.node.getChildByPath("spr_action_value/Label").getComponent(a),this.lbBetValue.node.active=!1,this.sprBetChip=this.node.getChildByPath("spr_action_value/spr_chip").getComponent(r),this.sprBetChip.node.active=!1,this.sprMuck=this.node.getChildByPath("sprMuck").getComponent(r),this.sprMuck.node.active=!1,this.sprBetChipAniGoToPotUi=this.node.getChildByPath("sprBetChipAniGoToPotUi").getComponent(r),this.sprBetChipAniGoToPotUi.node.active=!1,this.oriBetChipPos=new h(this.sprBetChip.node.position),this.oriBetChipRootColor=new c(this.sprActionValueRoot.color),this.oriBetChipRootPos=new h(this.sprActionValueRoot.node.position),this.bezierPoints=[];for(var i=0;i<2;i++){var e=this.node.getChildByPath("bezierPt"+(i+1));this.bezierPoints.push(e)}this.sprWinAni1=this.node.getChildByPath("spr_winAni1").getComponent(r),this.sprWinAni1.node.active=!0,this.sprWinAni1.color=new c(255,255,255,1),this.sprWinAni2=this.node.getChildByPath("spr_winAni2").getComponent(r),this.sprWinAni2.node.active=!0,this.sprWinAni2.color=new c(255,255,255,1),this.sprWinAni3=this.node.getChildByPath("spr_winAni3").getComponent(r),this.sprWinAni3.node.active=!0,this.sprWinAni3.color=new c(255,255,255,1),this.vecWinAni3=new h(this.sprWinAni3.node.position),this.ndWinBadge=this.node.getChildByPath("spr_winBg").getComponent(r),this.ndWinBadge.node.active=!1,this.lbWinAmount=this.node.getChildByPath("spr_winBg/lb_value").getComponent(a),this.lbWinAmount.node.active=!0,this.ndDrawBadge=this.node.getChildByPath("spr_drawBg").getComponent(r),this.ndDrawBadge.node.active=!1,this.lbDrawAmount=this.node.getChildByPath("spr_drawBg/lb_value").getComponent(a),this.lbDrawAmount.node.active=!0,this.ndReturnBadge=this.node.getChildByPath("spr_returnBg").getComponent(r),this.ndReturnBadge.node.active=!1,this.lbReturnAmount=this.node.getChildByPath("spr_returnBg/lb_value").getComponent(a),this.lbReturnAmount.node.active=!0}},o.onLoad=function(){this.childRegistered()},o.setUi=function(t){var i=this;if(this.childRegistered(),null!=t){var e="new/cha"+(t.seat+1)+"/spriteFrame";p.load(e,(function(t,e){null!=t&&console.error(t),i.setAvatarImg(e)})),this.setNickName(t.name),this.setUiChips(t.chips),this.endTurn(),this.clearUiAction(),this.clearUiBetValue(),this.clearUiHandCards(),this.clearUiHandRank(),this.clearMissButton(),this.clearUiMuck(),this.isFold=t.fold,1!=this.isFold?1!=t.wait?this.setUiPlay():this.setUiWait():this.setUiFold()}else this.setEscapee()},o.setUiPrepareRound=function(t){null!=t?(this.setUiChips(t.chips),this.isFold=!1,this.actionAllIn.node.active=!1,this.actionFold.node.active=!1,this.endTurn(),this.clearUiAction(),this.clearUiBetValue(),this.clearUiHandCards(),this.clearUiHandRank(),this.clearUiMuck(),1!=t.wait?this.setUiPlay():this.setUiWait()):console.error("setUiPrepareRound : entity is null")},o.setEscapee=function(){this.lbNickName.string="empty",this.lbChips.node.active=!1,this.lbSitOut.node.active=!1,this.sprTimer.node.active=!1,this.sprSelected.node.active=!1,this.sprAvatar.node.active=!1,this.sprHandCards[0].node.active=!1,this.sprHandCards[1].node.active=!1,this.sprHandCardShadow.node.active=!1,this.sprHiddenCards[0].node.active=!1,this.sprHiddenCards[1].node.active=!1,this.ndHandRankBackground.active=!1,this.lbHandRank.node.active=!1,this.sprFoldCover.active=!0,this.actionFold.node.active=!1,this.actionAllIn.node.active=!1,this.actions.call.node.active=!1,this.actions.check.node.active=!1,this.actions.bet.node.active=!1,this.actions.raise.node.active=!1,this.posSymbols.dealer.node.active=!1,this.posSymbols.sb.node.active=!1,this.posSymbols.bb.node.active=!1,this.dealable.node.active=!1,this.clearMissButton(),this.sprActionValueRoot.node.active=!1,this.sprBetValueBackground.node.active=!1,this.lbBetValue.node.active=!1,this.sprBetChip.node.active=!1,this.sprMuck.node.active=!1,this.ResetBadges()},o.setUiWait=function(){this.sprFoldCover.active=!0,this.sprTimer.node.active=!0,this.sprTimer.color=c.GRAY,this.sprTimer.fillRange=1,this.sprTimer.node.active=!0,this.clearUiAction(),this.clearUiBetValue()},o.setUiPlay=function(){this.actionAllIn.node.active=!1,this.actionFold.node.active=!1,this.sprFoldCover.active=!1,this.sprSelected.node.active=!1,this.sprTimer.node.active=!0,this.sprTimer.color=c.GRAY,this.sprTimer.fillRange=1,this.sprTimer.node.active=!1,this.clearUiAction(),this.clearUiBetValue()},o.setNickName=function(t){this.lbNickName.string=t},o.setUiChips=function(t){this.lbChips.color=c.WHITE,this.lbChips.string=g.getCurrencyString(t),1==this.isUiSitOut?this.setUiSitOut():this.setUiSitBack()},o.setUiBlindBet=function(t,i,e){var n=this,s=-1;1==this.isUiSitOut?this.setUiSitOut():this.setUiSitBack(),!0===e?(this.lbChips.color=new c(100,150,180),this.lbChips.string="POST BB"):!0===i&&(this.lbChips.color=new c(100,150,180),this.lbChips.string="POST SB"),!0===e||!0===i?s=setTimeout((function(){clearTimeout(s),n.setUiChips(t)}),2e3):this.setUiChips(t)},o.setUiPosSymbol=function(t){var i=this;Object.keys(this.posSymbols).forEach((function(e){var n=i.posSymbols[e];e==t&&(n.node.active=!0)}))},o.setDealable=function(t){this.dealable.node.active=t},o.clearUiPosSymbol=function(){var t=this;Object.keys(this.posSymbols).forEach((function(i){t.posSymbols[i].node.active=!1}))},o.setUiAction=function(t){var i=this;Object.keys(this.actions).forEach((function(e){i.actions[e].node.active=e==t}))},o.clearUiAction=function(){var t=this;Object.keys(this.actions).forEach((function(i){t.actions[i].node.active=!1}))},o.setUiBetValue=function(t,i){if(this.sprActionValueRoot.node.active=t>0,this.lbBetValue.string=g.getCurrencyString(t),this.lbBetValue.node.active=t>0,this.sprBetChip.node.active=t>0,t>0){var e=this.node.parent.getComponent(l).convertToWorldSpaceAR(this.node.position);e=this.sprActionValueRoot.node.parent.getComponent(l).convertToNodeSpaceAR(e);var n=this.sprActionValueRoot.node.parent.getComponent(l).convertToWorldSpaceAR(this.oriBetChipRootPos);n=this.sprActionValueRoot.node.parent.getComponent(l).convertToNodeSpaceAR(n);var s=new h(0,0,0);h.lerp(s,e,n,.8),this.setTweenFadeInFromToMove(this.sprActionValueRoot,this.oriBetChipRootColor,s,n,.2,1.5,this.easeOutBack,null)}null!=i&&(this.sprActionValueRoot.color=i)},o.clearUiBetValue=function(){this.sprActionValueRoot.node.active=!1,this.lbBetValue.string="0",this.lbBetValue.node.active=!1,this.sprBetChip.node.active=!1},o.setUiMuck=function(){this.sprMuck.node.active=!0},o.clearUiMuck=function(){this.sprMuck.node.active=!1},o.clearUiHandCards=function(){this.sprHandCards[0].spriteFrame=null,this.sprHandCards[0].node.active=!1,this.sprHandCards[1].spriteFrame=null,this.sprHandCards[1].node.active=!1,this.sprHandCardShadow.node.active=!1,this.sprHandCards[0].color=c.WHITE,this.sprHandCards[1].color=c.WHITE},o.setUiHandCardsFold=function(){this.sprHandCards[0].color=c.GRAY,this.sprHandCards[1].color=c.GRAY},o.setUiHandRank=function(t){""!==t&&null!==t&&(this.ndHandRankBackground.active=!0,this.lbHandRank.string=t,this.lbHandRank.node.active=!0)},o.clearUiHandRank=function(){this.ndHandRankBackground.active=!1,this.lbHandRank.node.active=!1,this.lbHandRank.string=""},o.setAvatarImg=function(t){this.sprAvatar.spriteFrame=t,this.sprAvatar.node.active=null!=t},o.clearAvatarImg=function(){this.sprAvatar.spriteFrame=null,this.sprAvatar.node.active=!1},o.setSbMissButton=function(t){this.sprMissSb.node.active=t},o.setBbMissButton=function(t){this.sprMissBb.node.active=t},o.clearMissButton=function(){this.sprMissSb.node.active=!1,this.sprMissBb.node.active=!1},o.startTurn=function(t){this.turnDuration=t/1e3,this.sprSelected.node.active=!0,this.sprTimer.node.active=!0,this.sprTimer.fillRange=1,this.sprTimer.color=this.timerBeginColor,this.sprTimer.node.active=!0,this.timerDeltaTime=this.turnDuration,this.playTimeLimitSound=!0},o.endTurn=function(){this.sprSelected.node.active=!1,this.sprTimer.node.active=!1,this.sprTimer.fillRange=0,this.sprTimer.node.active=!1,this.timerDeltaTime=0,B.instance.stopTimeLimitFourSec()},o.setUiFold=function(){this.clearUiAction(),this.isFold=!0,this.sprTimer.fillRange=0,this.sprTimer.node.active=!1,this.sprFoldCover.active=!0,this.sprSelected.node.active=!1,this.timerDeltaTime=0,this.actionFold.node.active=!0},o.setUiAllIn=function(){this.clearUiAction(),this.sprTimer.fillRange=0,this.sprTimer.node.active=!1,this.sprSelected.node.active=!1,this.timerDeltaTime=0,this.actionAllIn.node.active=!0},o.setUiSitOut=function(){this.isUiSitOut=!0,this.lbChips.node.active=!1,this.lbSitOut.node.active=!0},o.setUiSitBack=function(){this.isUiSitOut=!1,this.lbChips.node.active=!0,this.lbSitOut.node.active=!1},o._getCurrencyValue=function(t){return t.toLocaleString().split(".")[0]},o.update=function(t){this.updateTimer(t)},o.updateTimer=function(t){0>=this.timerDeltaTime||(this.timerDeltaTime-=t,0>this.timerDeltaTime&&(this.timerDeltaTime=0,this.sprTimer.node.active=!1),1==this.isMe&&4>=this.timerDeltaTime&&this.playTimeLimitSound&&(this.playTimeLimitSound=!1,B.instance.playTimeLimitFourSec()),this.sprTimer.fillRange=this.timerDeltaTime/this.turnDuration,c.lerp(this.sprTimer.color,this.timerEndColor,this.timerBeginColor,this.timerDeltaTime/this.turnDuration))},o.setAniChipsMoveToPot=function(t){var i=this;if(0==this.sprActionValueRoot.node.active)return-1;var e=this.sprBetChipAniGoToPotUi,n=this.sprBetChip.node.parent.getComponent(l).convertToWorldSpaceAR(this.oriBetChipPos);n=e.node.parent.getComponent(l).convertToNodeSpaceAR(n);var s=t.parent.getComponent(l).convertToWorldSpaceAR(t.position);s=e.node.parent.getComponent(l).convertToNodeSpaceAR(s);return this.clearUiBetValue(),this.setTweenFadeInFromToMove(e,new c(c.WHITE),n,s,.3,1.5,this.easeOutQuad,(function(){i.sprBetChipAniGoToPotUi.node.active=!1})),.3},o.ResetBadges=function(){clearTimeout(this.timeOutNum),this.ndWinBadge.node.active=!1,this.ndDrawBadge.node.active=!1,this.ndReturnBadge.node.active=!1,this.lbDrawAmount.string="",this.lbWinAmount.string="",this.lbReturnAmount.string=""},o.SetDraw=function(t){var i=this;this.ResetBadges(),this.ndDrawBadge.node.active=!0,this.lbDrawAmount.string="+"+g.getCurrencyString(t),this.timeOutNum=setTimeout((function(){i.ResetBadges()}),2e3)},o.SetReturn=function(t){var i=this;this.ResetBadges(),this.ndReturnBadge.node.active=!0,this.lbReturnAmount.string="+"+g.getCurrencyString(t),this.timeOutNum=setTimeout((function(){i.ResetBadges()}),1200)},o.setAniWinner=function(t){var i=this;this.winTweens.forEach((function(t){return t.stop()})),this.winTweens=[],this.ResetBadges(),this.ndWinBadge.node.active=!0,this.lbWinAmount.string="+"+g.getCurrencyString(t);var e=u(this.sprWinAni1.node).call((function(){i.sprWinAni1.color=new c(255,255,255,1)})).to(.5,{},{onUpdate:function(t,e){var n=255*e;n>255&&(n=255),1>n&&(n=1),i.sprWinAni1.color=new c(255,255,255,n)}}).union(),n=u(this.sprWinAni3.node).call((function(){i.sprWinAni3.color=new c(255,255,255,1),i.sprWinAni3.node.position=new h(i.vecWinAni3)})).set({position:new h(this.vecWinAni3),scale:new h(.5,.5,.5)}).to(.5,{scale:new h(1,1,1)},{easing:"backOut",onUpdate:function(t,e){var n=255*e;n>255&&(n=255),1>n&&(n=1),i.sprWinAni3.color=new c(255,255,255,n)}}).to(3,{},{easing:"linear",onUpdate:function(t,e){var n=255*(1-e);n>255&&(n=255),1>n&&(n=1),i.sprWinAni3.color=new c(255,255,255,n),i.sprWinAni1.color=new c(255,255,255,n)}}).union(),s=v.IDENTITY.clone(),o=u(this.sprWinAni2.node).call((function(){i.sprWinAni2.color=new c(255,255,255,1),i.sprWinAni2.node.scale=new h(1.15,1.15,1.15),i.sprWinAni2.node.setRotation(s)})).to(2,{scale:new h(.7,.7,.7)},{onUpdate:function(t,e){v.fromEuler(s,0,0,4320*e),i.sprWinAni2.node.setRotation(s);var n=C(0,500,255,0,e);n>178.5&&(n=178.5),1>n&&(n=1),i.sprWinAni2.color=new c(255,255,255,n)}}).union();e.start(),n.start(),o.start(),this.winTweens.push(e),this.winTweens.push(o),this.winTweens.push(n),this.timeOutNum=setTimeout((function(){i.ResetBadges()}),2e3)},o.setTweenFadeInFromToMove=function(t,i,e,n,s,o,a,r){t.node.active=!0,t.color=new c(i.r,i.g,i.b,0);var h=u(t.node).set({position:e}).to(s,{position:n},{easing:a,onUpdate:function(e,n){var s=i.a*n*o;s>i.a&&(s=i.a),t.color=new c(i.r,i.g,i.b,s)}});null!=r&&h.call(r),h.union(),h.start()},o.easeOutBack=function(t){var i=1.70158;return 1+2.70158*Math.pow(t-1,3)+i*Math.pow(t-1,2)},o.easeOutQuad=function(t){return 1-(1-t)*(1-t)},s}(m))||b);s._RF.pop()}}}));

System.register("chunks:///_virtual/Main.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UiTable.ts","./UiLogin.ts"],(function(e){"use strict";var n,i,r,t,o,a,s,u,l,c,p,d,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.systemEvent,u=e.SystemEvent,l=e.resources,c=e.Component},function(e){p=e.AudioManager},function(e){d=e.UiTable},function(e){f=e.UiLogin}],execute:function(){var h,g,y,b,v,L,D;o._RF.push({},"a2850+F0GhBDYzlCs9BRkPZ","Main",void 0);var M=a.ccclass,m=a.property;e("Main",(h=M("Main"),g=m(f),y=m(p),h((L=n((v=function(e){function n(){for(var n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,r(t(n),"uiLogin",L,t(n)),r(t(n),"audioManager",D,t(n)),n}i(n,e);var o=n.prototype;return o.start=function(){s.on(u.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),52!=Object.keys(d.preLoadCardRes).length?this.preLoadCardRes(this.onPreloadDone.bind(this)):this.onPreloadDone()},o.preLoadCardRes=function(e){for(var n=0;n<53;n++){var i="playingCards/"+n+"/spriteFrame";l.load(i,(function(n,i){null!=n&&console.error(n),d.preLoadCardRes[i.name]=i,52==Object.keys(d.preLoadCardRes).length&&e()}))}},o.onKeyDown=function(e){},o.onPreloadDone=function(){this.uiLogin.show()},n}(c)).prototype,"uiLogin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(v.prototype,"audioManager",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/UiBuyIn.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Board.ts"],(function(t){"use strict";var n,i,e,l,r,u,s,a,o,c,h,b,y,m,I,B;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.defineProperty},function(t){u=t.cclegacy,s=t._decorator,a=t.Label,o=t.Button,c=t.SliderComponent,h=t.EventHandler,b=t.Sprite,y=t.Color,m=t.Component},function(t){I=t.CommonUtils},function(t){B=t.Board}],execute:function(){var d,p,k,f,g,C,v,S,M,x,T,O,z,R,w,A,D,U,V,_,E,q,L,P,Y;u._RF.push({},"b1db3l4YKtDOKyV3WfZjITX","UiBuyIn",void 0);var F=s.ccclass,H=s.property;t("UiBuyIn",(d=F("UiBuyIn"),p=H(a),k=H(a),f=H(a),g=H(o),C=H(a),v=H(o),S=H(o),M=H(o),x=H(c),T=H(a),O=H(a),d((w=n((R=function(t){function n(){for(var n,i=arguments.length,u=new Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=t.call.apply(t,[this].concat(u))||this,e(l(n),"lbBalance",w,l(n)),e(l(n),"lbStakes",A,l(n)),e(l(n),"lbMinBuyIn",D,l(n)),e(l(n),"btnMin",U,l(n)),e(l(n),"lbMaxBuyIn",V,l(n)),e(l(n),"btnMax",_,l(n)),e(l(n),"btnOk",E,l(n)),e(l(n),"btnClose",q,l(n)),e(l(n),"sliderStack",L,l(n)),e(l(n),"lbBuyIn",P,l(n)),e(l(n),"lbTimer",Y,l(n)),r(l(n),"minBuyIn",0),r(l(n),"maxBuyIn",0),r(l(n),"buyInAmount",0),r(l(n),"playerID",0),r(l(n),"enoughBalance",!0),r(l(n),"mySeat",-1),r(l(n),"callback",null),r(l(n),"reqReBuy",!1),r(l(n),"initialized",!1),r(l(n),"timerId",0),r(l(n),"count",0),r(l(n),"isOpen",!1),n}i(n,t);var u=n.prototype;return u.init=function(){if(!1!==this.nullCheck(this.lbBalance,"lbBalance")&&!1!==this.nullCheck(this.lbStakes,"lbStakes")&&!1!==this.nullCheck(this.lbMinBuyIn,"lbMinBuyIn")&&!1!==this.nullCheck(this.btnMin,"btnMin")&&!1!==this.nullCheck(this.lbMaxBuyIn,"lbMaxBuyIn")&&!1!==this.nullCheck(this.btnMax,"btnMax")&&!1!==this.nullCheck(this.btnOk,"btnOk")&&!1!==this.nullCheck(this.sliderStack,"sliderStack")&&!1!==this.nullCheck(this.btnClose,"btnClose")&&!1!==this.nullCheck(this.lbBuyIn,"lbBuyIn")){var t=new h;t.target=this.node,t.component="UiBuyIn",t.handler="onSliderStackEvent",this.sliderStack.slideEvents.push(t),this.btnOk.node.on("click",this.onButtonOkClicked,this),this.btnClose.node.on("click",this.onButtonCloseClicked,this),this.btnMin.node.on("click",this.onButtonMinClicked,this),this.btnMax.node.on("click",this.onButtonMaxClicked,this),this.initialized=!0}},u.buyIn=function(t,n,i,e,l,r,u){var s=this;!1===this.initialized&&this.init();var a=B.big*B.minStakeRatio-e;this.enoughBalance=t>=a,this.callback=u,this.reqReBuy=!1,this.updateButtonInteract(),this.playerID=r,this.setControlValue(t,n,i,e),this.checkTimerId(),this.count=0,this.lbTimer.string=60..toString(),this.isOpen=!0,this.timerId=setInterval((function(){return s.checkTimer()}),1e3)},u.reBuyIn=function(t,n,i,e,l,r){var u=this;!1===this.initialized&&this.init();var s=B.big*B.minStakeRatio-e;this.enoughBalance=t>=s,this.mySeat=l,this.callback=r,this.reqReBuy=!0,this.updateButtonInteract(),this.setControlValue(t,n,i,e),this.checkTimerId(),this.count=0,this.lbTimer.string=60..toString(),this.isOpen=!0,this.timerId=setInterval((function(){return u.checkTimer()}),1e3)},u.updateButtonInteract=function(){this.btnOk.interactable=this.enoughBalance;var t=this.btnOk.getComponent(b);null!=t&&(t.color=this.enoughBalance?y.WHITE:y.GRAY)},u.setControlValue=function(t,n,i,e){this.lbBalance.string=I.getCurrencyString(t)+" ( "+I.getCurrencyString(e)+" chips )",this.lbStakes.string=I.getCurrencyString(n)+" / "+I.getCurrencyString(i),this.maxBuyIn=i*B.maxStakeRatio-e,this.maxBuyIn>=t&&(this.maxBuyIn=t),this.minBuyIn=i*B.minStakeRatio-e,this.minBuyIn>=t&&(this.minBuyIn=t),this.lbMinBuyIn.string=I.getCurrencyString(this.minBuyIn),this.lbMaxBuyIn.string=I.getCurrencyString(this.maxBuyIn),this.setBuyInValue(1,!0),!1===this.node.active&&(this.node.active=!0)},u.setBuyInValue=function(t,n){t<=0&&(t=0);var i=0,e=this.minBuyIn+(B.big-this.minBuyIn%B.big),l=this.maxBuyIn-e;if(t>=1)this.buyInAmount=this.maxBuyIn,i=1;else if(t<=0)this.buyInAmount=this.minBuyIn,i=0;else{var r=Math.floor(t*l);i=(r-=r%B.big)/l,this.buyInAmount=e+r}if(l<=0)return this.buyInAmount=this.maxBuyIn,this.lbBuyIn.string=I.getCurrencyString(this.buyInAmount),void(this.sliderStack.progress=1);this.lbBuyIn.string=I.getCurrencyString(this.buyInAmount),!0===n&&(this.sliderStack.progress=i)},u.onButtonOkClicked=function(t){this.reqReBuy?B.room.send("RE_BUY",{seat:this.mySeat,amount:this.buyInAmount}):B.room.send("BUY_IN",{id:this.playerID,buyInAmount:this.buyInAmount}),this.clearTimer(),this.isOpen=!1,null===this.callback&&(this.node.active=!1)},u.buyInDone=function(){this.node.active=!1,null!==this.callback&&this.callback(!0),this.clearTimer(),this.isOpen=!1,this.callback=null},u.reBuyInDone=function(){this.reqReBuy=!1,this.node.active=!1,null!==this.callback&&this.callback(!0),this.clearTimer(),this.isOpen=!1,this.callback=null},u.onButtonCloseClicked=function(t){null!==this.callback&&this.callback(!1),this.clearTimer(),this.callback=null,this.isOpen=!1,this.node.active=!1},u.onSliderStackEvent=function(t){this.setBuyInValue(t.progress,!0)},u.onButtonMinClicked=function(t){this.setBuyInValue(0,!0)},u.onButtonMaxClicked=function(t){this.setBuyInValue(1,!0)},u.nullCheck=function(t,n){return null!==t||(console.error("[ UiBuyIn ] property is null. property name : ",n),!1)},u.toLocale=function(t,n){return t?(t=String(parseInt(t))).replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,"):"0"},u.getDivided=function(t,n){var i=1,e=n;if(0===n)return 0;for(var l=t=Math.round(t);l>=10;)l/=10,i+=1;var r=0;return i>e&&(r=1,(i-=3)>e&&(r=2,(i-=3)>e&&(r=3))),r},u.getStringByDivided=function(t,n){var i=["","K","M","B","T"],e=t/Math.pow(10,3*n);return e>=10?this.toLocale(Math.round(e),!1)+i[n]:e.toFixed(1)+i[n]},u.update=function(t){},u.checkTimer=function(){0!=this.isOpen&&(this.count++,this.count>=60?(console.log("BuyIn Popui is close cause by timeout",60,this.count),this.leaveRoom()):this.lbTimer.string=(60-this.count).toString())},u.clearTimer=function(){clearInterval(this.timerId),this.count=0,this.timerId=0},u.checkTimerId=function(){0!=this.timerId&&(clearInterval(this.timerId),this.timerId=0)},u.leaveRoom=function(){this.clearTimer(),this.callback=null,this.node.active=!1,this.isOpen=!1,B.table.leave()},n}(m)).prototype,"lbBalance",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(R.prototype,"lbStakes",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(R.prototype,"lbMinBuyIn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(R.prototype,"btnMin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(R.prototype,"lbMaxBuyIn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(R.prototype,"btnMax",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(R.prototype,"btnOk",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(R.prototype,"btnClose",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(R.prototype,"sliderStack",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(R.prototype,"lbBuyIn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(R.prototype,"lbTimer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=R))||z));u._RF.pop()}}}));

System.register("chunks:///_virtual/UiHandsHistory.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts"],(function(t){"use strict";var e,i,n,r,s,a,o,l,h,u,c,d,g,y,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.defineProperty},function(t){a=t.cclegacy,o=t._decorator,l=t.ScrollView,h=t.Button,u=t.Label,c=t.Node,d=t.Sprite,g=t.Color,y=t.UITransform,p=t.Component},function(t){m=t.CommonUtils}],execute:function(){var b,f,C,v,S,P,w,k,H,B,R,M,D,z,L,T,x,F,O,_,I,U,K,A,W,j,N,V,Y,q,E;a._RF.push({},"b1e635Ct+RBHrvzF8adrtlp","UiHandsHistory",void 0);var G=o.ccclass,J=o.property;t("UiHandsHistory",(b=G("UiHandsHistory"),f=J(l),C=J(l),v=J(h),S=J(h),P=J(h),w=J(h),k=J(h),H=J(u),B=J(u),R=J(u),M=J(c),D=J(c),z=J(c),L=J(u),b((F=e((x=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(r(e),"svHistorySummary",F,r(e)),n(r(e),"svHistoryDetail",O,r(e)),n(r(e),"btnOK",_,r(e)),n(r(e),"btnSummary",I,r(e)),n(r(e),"btnLeft",U,r(e)),n(r(e),"btnRight",K,r(e)),n(r(e),"btnDetail",A,r(e)),n(r(e),"lbTitle",W,r(e)),n(r(e),"lbPots",j,r(e)),n(r(e),"lbResult",N,r(e)),n(r(e),"nCommunityCards",V,r(e)),n(r(e),"nPlayer",Y,r(e)),n(r(e),"nPlayerCards",q,r(e)),n(r(e),"lbHistory",E,r(e)),s(r(e),"sprCommunityCards",[null,null,null,null,null]),s(r(e),"players",[null,null,null,null,null,null,null,null,null]),s(r(e),"initialized",!1),s(r(e),"chips",0),s(r(e),"hands",[]),s(r(e),"history",[]),s(r(e),"cardRes",{}),s(r(e),"curPage",-1),s(r(e),"maxPage",-1),s(r(e),"myResult",""),e}i(e,t);var a=e.prototype;return a._init=function(){for(var t=0;t<this.sprCommunityCards.length;t++)this.sprCommunityCards[t]=this.nCommunityCards.getChildByPath("card"+(t+1)).getComponent(d);for(var e=0;e<this.players.length;e++)this.players[e]=this.nPlayer.getChildByPath("seat"+(e+1)),this.players[e].active=!1;this.lbTitle.string="",this.lbPots.string="",this.lbResult.string="",this.btnSummary.node.active=!1,this.btnDetail.node.active=!1,this.btnOK.node.off("click"),this.btnOK.node.on("click",this.onButtonOkClicked,this),this.btnDetail.node.off("click"),this.btnDetail.node.on("click",this.onButtonDetailClicked,this),this.btnSummary.node.off("click"),this.btnSummary.node.on("click",this.onButtonSummaryClicked,this),this.btnLeft.node.off("click"),this.btnLeft.node.on("click",this.onButtonLeftClicked,this),this.btnRight.node.off("click"),this.btnRight.node.on("click",this.onButtonRightClicked,this)},a.ShowHandsHistory=function(t,e){t.length>0&&(!1===this.initialized&&(this.cardRes=e,this._init(),this.initialized=!0),this.btnSummary.node.active=!0,this.hands=t.slice(),this.curPage=0,this.maxPage=this.hands.length,this.btnLeft.node.active=this.maxPage>1,this.SetHand(),this.SetMode("summary"),this.svHistorySummary.scrollToTop(0),this.svHistoryDetail.scrollToTop(0),this.node.active=!0)},a.SetHand=function(){this.SetSummary(),this.SetDetail(),this.SetBoard(),this.btnLeft.node.active=this.curPage<this.maxPage-1,this.btnRight.node.active=this.curPage>0},a.SetBoard=function(){if(!(this.hands.length<=0||null==this.hands[this.curPage])){for(var t=this.hands[this.curPage],e=0;e<this.sprCommunityCards.length;e++)e>=t.cards.length||this.SetCard(this.sprCommunityCards[e],t.cards[e]);var i=this.nPlayerCards.getChildByPath("card1").getComponent(d),n=this.nPlayerCards.getChildByPath("card2").getComponent(d);this.SetCard(i,t.playerCards[0]),this.SetCard(n,t.playerCards[1]);var r=this.curPage+1,s=this.hands.length;this.lbTitle.string="Previous Hands History ("+r.toString()+"/"+s.toString()+"): "+t.title,this.lbPots.string=t.pots,this.lbResult.string=this.myResult}},a.SetSummary=function(){var t=this.hands[this.curPage].players;this.myResult="";for(var e=0;e<this.players.length;e++)e>=t.length?this.players[e].active=!1:1==this.SetPlayer(this.players[e],t[e])&&(this.players[e].active=!0)},a.SetDetail=function(){this.lbHistory.string=this.hands[this.curPage].details},a.SetPlayer=function(t,e){if(e.seat<0)return!1;if(1==e.isMe)if(1==e.wait||1==e.sitOut)this.SetMyResult(e.isMe,"You didn't participate in this game.");else{var i=Math.abs(e.startChips-e.endChips);e.startChips==e.endChips?this.SetMyResult(e.isMe,"Chips is not changed."):e.startChips>e.endChips?this.SetMyResult(e.isMe,"Lost ("+m.getCurrencyString(i)+") Chips"):this.SetMyResult(e.isMe,"Collected ("+m.getCurrencyString(i)+") Chips")}var n=this.hands[this.curPage].buttons,r=this.hands[this.curPage].skip,s=t.getComponent(d);e.isMe,s.color=new g(50,50,50,255);var a=t.getChildByPath("btn"),o=a.getChildByPath("lbDealer").getComponent(u),l=a.getChildByPath("lbSBlind").getComponent(u),h=a.getChildByPath("lbBBlind").getComponent(u);o.node.active=!1,l.node.active=!1,h.node.active=!1,e.seat==n[0]&&(o.node.active=!0),e.seat==n[1]?l.node.active=!0:e.seat==n[2]&&(h.node.active=!0),t.getChildByPath("lbSeat").getComponent(u).string=e.name;var c=t.getChildByPath("spr_card1").getComponent(d),y=t.getChildByPath("spr_card2").getComponent(d);0==e.isMuck&&(this.SetCard(c,e.cardIndex[0]),this.SetCard(y,e.cardIndex[1]));var p=t.getChildByPath("sprMuck").getComponent(d);p.node.active=!1;var b=t.getChildByPath("sprShow").getComponent(d);b.node.active=!1;var f=t.getChildByPath("trophy").getComponent(d);f.node.active=!1;var C=t.getChildByPath("lbResult").getComponent(u);if(C.string="",e.fold>-1){switch(e.fold){case 0:C.string="Folded before Flop";break;case 1:C.string="Folded on the Flop";break;case 2:C.string="Folded on the Turn";break;case 3:C.string="Folded on the River"}1==e.forceShow&&(C.string+=" and shows cards")}else 1==e.isWinner?1==r?(C.string="Collected ("+m.getCurrencyString(e.winAmount)+")",f.node.active=!0,1==e.forceShow&&(C.string+=" and shows cards")):(C.string="Won ("+m.getCurrencyString(e.winAmount)+") with ["+e.rank+"]",f.node.active=!0):1==e.isDraw?C.string="Chop the pot with ["+e.rank+"]":1==e.wait||1==e.sitOut?(C.string="Wait State",1==e.sitOut&&(C.string="Sitting Out")):0==e.forceShow&&1==e.isMuck?C.string="Lost and mucks cards":(C.string="Lost with ["+e.rank+"]",1==e.forceShow&&(C.string+=" and shows cards"));return 1==e.isMuck&&(p.node.active=!0),1==e.forceShow&&(b.node.active=!0,p.node.active=!1,this.SetCard(c,e.cardIndex[0]),this.SetCard(y,e.cardIndex[1])),!0},a.SetMyResult=function(t,e){0!=t&&(this.myResult=e)},a.SetCard=function(t,e){var i=t.getComponent(y),n=i.width,r=i.height;t.spriteFrame=this.cardRes[e+1],t.node.active=!0,i.width=n,i.height=r},a.closePopup=function(){this.node.active=!1,this.lbHistory.string=""},a.onButtonOkClicked=function(t){this.closePopup()},a.onButtonDetailClicked=function(t){this.SetMode("detail")},a.onButtonSummaryClicked=function(t){this.SetMode("summary")},a.onButtonLeftClicked=function(t){this.curPage<this.maxPage&&(this.curPage++,t.node.active=!1,this.SetHand())},a.onButtonRightClicked=function(t){this.curPage>0&&(this.curPage--,t.node.active=!1,this.SetHand())},a.SetMode=function(t){switch(this.svHistoryDetail.node.active=!1,this.svHistorySummary.node.active=!1,this.btnDetail.node.active=!1,this.btnSummary.node.active=!1,t){case"summary":this.svHistorySummary.node.active=!0,this.btnDetail.node.active=!0;break;case"detail":this.svHistoryDetail.node.active=!0,this.btnSummary.node.active=!0;break;default:console.log("Invaild Hands History Mode")}},e}(p)).prototype,"svHistorySummary",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(x.prototype,"svHistoryDetail",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(x.prototype,"btnOK",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"btnSummary",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(x.prototype,"btnLeft",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(x.prototype,"btnRight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(x.prototype,"btnDetail",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(x.prototype,"lbTitle",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(x.prototype,"lbPots",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(x.prototype,"lbResult",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(x.prototype,"nCommunityCards",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(x.prototype,"nPlayer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(x.prototype,"nPlayerCards",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(x.prototype,"lbHistory",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=x))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/colyseus.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0),n.define(t.meta.url,(function(t,i,r,o,s){n.createRequireWithReqMap({},i);!function(){!function(e,n){"object"==typeof t&&void 0!==r?n(t):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).Colyseus={})}(this,(function(e){ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return null!==e&&"object"==typeof e&&e.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window)
/*! *****************************************************************************
            Copyright (c) Microsoft Corporation.
              Permission to use, copy, modify, and/or distribute this software for any
            purpose with or without fee is hereby granted.
              THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
            REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
            INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
            LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
            OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
            PERFORMANCE OF THIS SOFTWARE.
            ***************************************************************************** */;var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}function i(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{f(i.next(e))}catch(e){o(e)}}function a(e){try{f(i.throw(e))}catch(e){o(e)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}f((i=i.apply(e,t||[])).next())}))}function r(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function o(e,t){t.headers=e.headers||{},t.statusMessage=e.statusText,t.statusCode=e.status,t.data=e.response}function s(e,t,n){return new Promise((function(i,r){n=n||{};var s,a,f,h=new XMLHttpRequest,c=n.body,u=n.headers||{};for(s in n.timeout&&(h.timeout=n.timeout),h.ontimeout=h.onerror=function(e){e.timeout="timeout"==e.type,r(e)},h.open(e,t.href||t),h.onload=function(){for(f=h.getAllResponseHeaders().trim().split(/[\r\n]+/),o(h,h);a=f.shift();)a=a.split(": "),h.headers[a.shift().toLowerCase()]=a.join(": ");if((a=h.headers["content-type"])&&~a.indexOf("application/json"))try{h.data=JSON.parse(h.data,n.reviver)}catch(e){return o(h,e),r(e)}(h.status>=400?r:i)(h)},typeof FormData<"u"&&c instanceof FormData||c&&"object"==typeof c&&(u["content-type"]="application/json",c=JSON.stringify(c)),h.withCredentials=!!n.withCredentials,u)h.setRequestHeader(s,u[s]);h.send(c)}))}var a=s.bind(s,"GET"),f=s.bind(s,"POST"),h=s.bind(s,"PATCH"),c=s.bind(s,"DELETE"),u=a,d=h,p=f,l=s.bind(s,"PUT"),v=s,y={del:c,get:u,patch:d,post:p,put:l,send:v},g=Object.freeze(Object.assign(Object.create(null),y,{default:y,del:c,get:u,patch:d,post:p,put:l,send:v})),m=function(e){function t(t,n){var i=e.call(this,n)||this;return i.name="ServerError",i.code=t,i}return n(t,e),t}(Error);function _(e,t){if(this._offset=t,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(e))throw new Error("Invalid argument");this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength)}}function w(e,t,n){for(var i=0,r=0,o=n.length;r<o;r++)(i=n.charCodeAt(r))<128?e.setUint8(t++,i):i<2048?(e.setUint8(t++,192|i>>6),e.setUint8(t++,128|63&i)):i<55296||i>=57344?(e.setUint8(t++,224|i>>12),e.setUint8(t++,128|i>>6&63),e.setUint8(t++,128|63&i)):(r++,i=65536+((1023&i)<<10|1023&n.charCodeAt(r)),e.setUint8(t++,240|i>>18),e.setUint8(t++,128|i>>12&63),e.setUint8(t++,128|i>>6&63),e.setUint8(t++,128|63&i))}function A(e,t,n){var i=typeof n,r=0,o=0,s=0,a=0,f=0,h=0;if("string"===i){if((f=function(e){for(var t=0,n=0,i=0,r=e.length;i<r;i++)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(n))<32)e.push(160|f),h=1;else if(f<256)e.push(217,f),h=2;else if(f<65536)e.push(218,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("String too long");e.push(219,f>>24,f>>16,f>>8,f),h=5}return t.push({_str:n,_length:f,_offset:e.length}),h+f}if("number"===i)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(e.push(n),1):n<256?(e.push(204,n),2):n<65536?(e.push(205,n>>8,n),3):n<4294967296?(e.push(206,n>>24,n>>16,n>>8,n),5):(s=n/Math.pow(2,32)>>0,a=n>>>0,e.push(207,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):n>=-32?(e.push(n),1):n>=-128?(e.push(208,n),2):n>=-32768?(e.push(209,n>>8,n),3):n>=-2147483648?(e.push(210,n>>24,n>>16,n>>8,n),5):(s=Math.floor(n/Math.pow(2,32)),a=n>>>0,e.push(211,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):(e.push(203),t.push({_float:n,_length:8,_offset:e.length}),9);if("object"===i){if(null===n)return e.push(192),1;if(Array.isArray(n)){if((f=n.length)<16)e.push(144|f),h=1;else if(f<65536)e.push(220,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("Array too large");e.push(221,f>>24,f>>16,f>>8,f),h=5}for(r=0;r<f;r++)h+=A(e,t,n[r]);return h}if(n instanceof Date){var c=n.getTime();return s=Math.floor(c/Math.pow(2,32)),a=c>>>0,e.push(215,0,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),10}if(n instanceof ArrayBuffer){if((f=n.byteLength)<256)e.push(196,f),h=2;else if(f<65536)e.push(197,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("Buffer too large");e.push(198,f>>24,f>>16,f>>8,f),h=5}return t.push({_bin:n,_length:f,_offset:e.length}),h+f}if("function"==typeof n.toJSON)return A(e,t,n.toJSON());var u=[],d="",p=Object.keys(n);for(r=0,o=p.length;r<o;r++)"function"!=typeof n[d=p[r]]&&u.push(d);if((f=u.length)<16)e.push(128|f),h=1;else if(f<65536)e.push(222,f>>8,f),h=3;else{if(!(f<4294967296))throw new Error("Object too large");e.push(223,f>>24,f>>16,f>>8,f),h=5}for(r=0;r<f;r++)h+=A(e,t,d=u[r]),h+=A(e,t,n[d]);return h}if("boolean"===i)return e.push(n?195:194),1;if("undefined"===i)return e.push(212,0,0),3;throw new Error("Could not encode")}function $(e){var t=[],n=[],i=A(t,n,e),r=new ArrayBuffer(i),o=new DataView(r),s=0,a=0,f=-1;n.length>0&&(f=n[0]._offset);for(var h,c=0,u=0,d=0,p=t.length;d<p;d++)if(o.setUint8(a+d,t[d]),d+1===f){if(c=(h=n[s])._length,u=a+f,h._bin)for(var l=new Uint8Array(h._bin),v=0;v<c;v++)o.setUint8(u+v,l[v]);else h._str?w(o,u,h._str):void 0!==h._float&&o.setFloat64(u,h._float);a+=c,n[++s]&&(f=n[s]._offset)}return r}_.prototype._array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this._parse();return t},_.prototype._map=function(e){for(var t={},n=0;n<e;n++)t[this._parse()]=this._parse();return t},_.prototype._str=function(e){var t=function(e,t,n){for(var i="",r=0,o=t,s=t+n;o<s;o++){var a=e.getUint8(o);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0)>=65536?(r-=65536,i+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):i+=String.fromCharCode(r)}else i+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0);else i+=String.fromCharCode((31&a)<<6|63&e.getUint8(++o));else i+=String.fromCharCode(a)}return i}(this._view,this._offset,e);return this._offset+=e,t},_.prototype._bin=function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},_.prototype._parse=function(){var e,t=this._view.getUint8(this._offset++),n=0,i=0,r=0,o=0;if(t<192)return t<128?t:t<144?this._map(15&t):t<160?this._array(15&t):this._str(31&t);if(t>223)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:return n=this._view.getUint8(this._offset),i=this._view.getInt8(this._offset+1),this._offset+=2,[i,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),i=this._view.getInt8(this._offset+2),this._offset+=3,[i,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),i=this._view.getInt8(this._offset+4),this._offset+=5,[i,this._bin(n)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return r=this._view.getUint32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,r+o;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return r=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,r+o;case 212:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?void(this._offset+=1):[i,this._bin(1)];case 213:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(2)];case 214:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(4)];case 215:return i=this._view.getInt8(this._offset),this._offset+=1,0===i?(r=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(r+o)):[i,this._bin(8)];case 216:return i=this._view.getInt8(this._offset),this._offset+=1,[i,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};var E,O,I=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},b=function(){function e(e){this.events=e}return e.prototype.send=function(e){e instanceof ArrayBuffer?this.ws.send(e):Array.isArray(e)&&this.ws.send(new Uint8Array(e).buffer)},e.prototype.connect=function(e){this.ws=new I(e,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},e.prototype.close=function(e,t){this.ws.close(e,t)},e}(),x=function(){function e(){this.events={},this.transport=new b(this.events)}return e.prototype.send=function(e){this.transport.send(e)},e.prototype.connect=function(e){this.transport.connect(e)},e.prototype.close=function(e,t){this.transport.close(e,t)},e}(),R={};function T(e,t){R[e]=t}function C(e){var t=R[e];if(!t)throw new Error("missing serializer: "+e);return t}e.Protocol=void 0,(E=e.Protocol||(e.Protocol={}))[E.HANDSHAKE=9]="HANDSHAKE",E[E.JOIN_ROOM=10]="JOIN_ROOM",E[E.ERROR=11]="ERROR",E[E.LEAVE_ROOM=12]="LEAVE_ROOM",E[E.ROOM_DATA=13]="ROOM_DATA",E[E.ROOM_STATE=14]="ROOM_STATE",E[E.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",E[E.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",e.ErrorCode=void 0,(O=e.ErrorCode||(e.ErrorCode={}))[O.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",O[O.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",O[O.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",O[O.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",O[O.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",O[O.AUTH_FAILED=4215]="AUTH_FAILED",O[O.APPLICATION_ERROR=4216]="APPLICATION_ERROR";var P=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){return this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.handlers.forEach((function(n){return n.apply(e,t)}))},e.prototype.invokeAsync=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all(this.handlers.map((function(n){return n.apply(e,t)})))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}();function S(){var e=new P;function t(t){return e.register(t,null===this)}return t.once=function(t){e.register((function n(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t.apply(this,i),e.remove(n)}))},t.remove=function(t){return e.remove(t)},t.invoke=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invoke.apply(e,t)},t.invokeAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invokeAsync.apply(e,t)},t.clear=function(){return e.clear()},t}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var N,D=function(e){var t={exports:{}};return e(t,t.exports),t.exports}((function(e,t){!function(e){
/*! *****************************************************************************
                Copyright (c) Microsoft Corporation.
                  Permission to use, copy, modify, and/or distribute this software for any
                purpose with or without fee is hereby granted.
                  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
                REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
                AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
                INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
                LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
                OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
                PERFORMANCE OF THIS SOFTWARE.
                ***************************************************************************** */
var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}function i(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function r(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var o,s=255,a=213;e.OPERATION=void 0,(o=e.OPERATION||(e.OPERATION={}))[o.ADD=128]="ADD",o[o.REPLACE=0]="REPLACE",o[o.DELETE=64]="DELETE",o[o.DELETE_AND_ADD=192]="DELETE_AND_ADD",o[o.TOUCH=1]="TOUCH",o[o.CLEAR=10]="CLEAR";var f=function(){function e(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return e.prototype.getNextUniqueId=function(){return this.nextUniqueId++},e.prototype.addRef=function(e,t,n){void 0===n&&(n=!0),this.refs.set(e,t),n&&(this.refCounts[e]=(this.refCounts[e]||0)+1)},e.prototype.removeRef=function(e){this.refCounts[e]=this.refCounts[e]-1,this.deletedRefs.add(e)},e.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},e.prototype.garbageCollectDeletedRefs=function(){var e=this;this.deletedRefs.forEach((function(t){if(e.refCounts[t]<=0){var n=e.refs.get(t);if(n instanceof xe)for(var i in n._definition.schema)"string"!=typeof n._definition.schema[i]&&n[i]&&n[i].$changes&&e.removeRef(n[i].$changes.refId);else{var r=n.$changes.parent._definition,o=r.schema[r.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(o)[0]&&Array.from(n.values()).forEach((function(t){return e.removeRef(t.$changes.refId)}))}e.refs.delete(t),delete e.refCounts[t]}})),this.deletedRefs.clear()},e}(),h=function(){function t(e,t,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=e,this.setParent(t,n)}return t.prototype.setParent=function(e,t,n){var i=this;if(this.indexes||(this.indexes=this.ref instanceof xe?this.ref._definition.indexes:{}),this.parent=e,this.parentIndex=n,t)if(this.root=t,this.ref instanceof xe){var r=this.ref._definition;for(var o in r.schema){var s=this.ref[o];if(s&&s.$changes){var a=r.indexes[o];s.$changes.setParent(this.ref,t,a)}}}else"object"==typeof this.ref&&this.ref.forEach((function(e,t){if(e instanceof xe){var n=e.$changes,r=i.ref.$changes.indexes[t];n.setParent(i.ref,i.root,r)}}))},t.prototype.operation=function(e){this.changes.set(--this.currentCustomOperation,e)},t.prototype.change=function(t,n){void 0===n&&(n=e.OPERATION.ADD);var i="number"==typeof t?t:this.indexes[t];this.assertValidIndex(i,t);var r=this.changes.get(i);r&&r.op!==e.OPERATION.DELETE&&r.op!==e.OPERATION.TOUCH||this.changes.set(i,{op:r&&r.op===e.OPERATION.DELETE?e.OPERATION.DELETE_AND_ADD:n,index:i}),this.allChanges.add(i),this.changed=!0,this.touchParents()},t.prototype.touch=function(t){var n="number"==typeof t?t:this.indexes[t];this.assertValidIndex(n,t),this.changes.has(n)||this.changes.set(n,{op:e.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},t.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},t.prototype.getType=function(e){if(this.ref._definition)return(t=this.ref._definition).schema[t.fieldsByIndex[e]];var t,n=(t=this.parent._definition).schema[t.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},t.prototype.getChildrenFilter=function(){var e=this.parent._definition.childFilters;return e&&e[this.parentIndex]},t.prototype.getValue=function(e){return this.ref.getByIndex(e)},t.prototype.delete=function(t){var n="number"==typeof t?t:this.indexes[t];if(void 0!==n){var i=this.getValue(n);this.changes.set(n,{op:e.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],i&&i.$changes&&(i.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema "+this.ref.constructor.name+": trying to delete non-existing index: "+t+" ("+n+")")},t.prototype.discard=function(t,n){var i=this;void 0===t&&(t=!1),void 0===n&&(n=!1),this.ref instanceof xe||this.changes.forEach((function(t){if(t.op===e.OPERATION.DELETE){var n=i.ref.getIndex(t.index);delete i.indexes[n]}})),this.changes.clear(),this.changed=t,n&&this.allChanges.clear(),this.currentCustomOperation=0},t.prototype.discardAll=function(){var e=this;this.changes.forEach((function(t){var n=e.getValue(t.index);n&&n.$changes&&n.$changes.discardAll()})),this.discard()},t.prototype.cache=function(e,t){this.caches[e]=t},t.prototype.clone=function(){return new t(this.ref,this.parent,this.root)},t.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},t.prototype.assertValidIndex=function(e,t){if(void 0===e)throw new Error('ChangeTree: missing index for field "'+t+'"')},t}(),c=function(e,t){var n=e.toString(),i=t.toString();return n<i?-1:n>i?1:0};function u(e){return e.$proxy=!0,e=new Proxy(e,{get:function(e,t){return"symbol"==typeof t||isNaN(t)?e[t]:e.at(t)},set:function(e,t,n){if("symbol"==typeof t||isNaN(t))e[t]=n;else{var i=Array.from(e.$items.keys()),r=parseInt(i[t]||t);null==n?e.deleteAt(r):e.setAt(r,n)}return!0},deleteProperty:function(e,t){return"number"==typeof t?e.deleteAt(t):delete e[t],!0}})}var d=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,e)}return t.is=function(e){return Array.isArray(e)},Object.defineProperty(t.prototype,"length",{get:function(){return this.$items.size},set:function(e){0===e?this.clear():this.splice(e,this.length-e)},enumerable:!1,configurable:!0}),t.prototype.push=function(){for(var e,t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){e=t.$refId++,t.setAt(e,n)})),e},t.prototype.pop=function(){var e=Array.from(this.$indexes.values()).pop();if(void 0!==e){this.$changes.delete(e),this.$indexes.delete(e);var t=this.$items.get(e);return this.$items.delete(e),t}},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.setAt=function(t,n){var i,r;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,t);var o=null!==(r=null===(i=this.$changes.indexes[t])||void 0===i?void 0:i.op)&&void 0!==r?r:e.OPERATION.ADD;this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,n),this.$changes.change(t,o)},t.prototype.deleteAt=function(e){var t=Array.from(this.$items.keys())[e];return void 0!==t&&this.$deleteAt(t)},t.prototype.$deleteAt=function(e){return this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.concat=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new(t.bind.apply(t,r([void 0],(e=Array.from(this.$items.values())).concat.apply(e,n))))},t.prototype.join=function(e){return Array.from(this.$items.values()).join(e)},t.prototype.reverse=function(){var e=this,t=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(n,i){e.setAt(t[i],n)})),this},t.prototype.shift=function(){var e=Array.from(this.$items.keys()).shift();if(void 0!==e){var t=this.$items.get(e);return this.$deleteAt(e),t}},t.prototype.slice=function(e,n){return new(t.bind.apply(t,r([void 0],Array.from(this.$items.values()).slice(e,n))))},t.prototype.sort=function(e){var t=this;void 0===e&&(e=c);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(e).forEach((function(e,i){t.setAt(n[i],e)})),this},t.prototype.splice=function(e,t){void 0===t&&(t=this.length-e);for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];for(var r=Array.from(this.$items.keys()),o=[],s=e;s<e+t;s++)o.push(this.$items.get(r[s])),this.$deleteAt(r[s]);return o},t.prototype.unshift=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.length,r=t.length,o=Array.from(this.$items.values());return t.forEach((function(t,n){e.setAt(n,t)})),o.forEach((function(t,n){e.setAt(r+n,t)})),i+r},t.prototype.indexOf=function(e,t){return Array.from(this.$items.values()).indexOf(e,t)},t.prototype.lastIndexOf=function(e,t){return void 0===t&&(t=this.length-1),Array.from(this.$items.values()).lastIndexOf(e,t)},t.prototype.every=function(e,t){return Array.from(this.$items.values()).every(e,t)},t.prototype.some=function(e,t){return Array.from(this.$items.values()).some(e,t)},t.prototype.forEach=function(e,t){Array.from(this.$items.values()).forEach(e,t)},t.prototype.map=function(e,t){return Array.from(this.$items.values()).map(e,t)},t.prototype.filter=function(e,t){return Array.from(this.$items.values()).filter(e,t)},t.prototype.reduce=function(e,t){return Array.from(this.$items.values()).reduce(e,t)},t.prototype.reduceRight=function(e,t){return Array.from(this.$items.values()).reduceRight(e,t)},t.prototype.find=function(e,t){return Array.from(this.$items.values()).find(e,t)},t.prototype.findIndex=function(e,t){return Array.from(this.$items.values()).findIndex(e,t)},t.prototype.fill=function(e,t,n){throw new Error("ArraySchema#fill() not implemented")},t.prototype.copyWithin=function(e,t,n){throw new Error("ArraySchema#copyWithin() not implemented")},t.prototype.toString=function(){return this.$items.toString()},t.prototype.toLocaleString=function(){return this.$items.toLocaleString()},t.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},t.prototype[Symbol.unscopables]=function(){return this.$items[Symbol.unscopables]()},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},t.prototype.includes=function(e,t){return Array.from(this.$items.values()).includes(e,t)},t.prototype.flatMap=function(e,t){throw new Error("ArraySchema#flatMap() is not supported.")},t.prototype.flat=function(e){throw new Error("ArraySchema#flat() is not supported.")},t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){return this.toArray().map((function(e){return"function"==typeof e.toJSON?e.toJSON():e}))},t.prototype.clone=function(e){return e?new(t.bind.apply(t,r([void 0],Array.from(this.$items.values())))):new(t.bind.apply(t,r([void 0],this.map((function(e){return e.$changes?e.clone():e})))))},t.prototype.triggerAll=function(){xe.prototype.triggerAll.apply(this)},t}();function p(e){return e.$proxy=!0,e=new Proxy(e,{get:function(e,t){return"symbol"!=typeof t&&void 0===e[t]?e.get(t):e[t]},set:function(e,t,n){return"symbol"!=typeof t&&-1===t.indexOf("$")&&"onAdd"!==t&&"onRemove"!==t&&"onChange"!==t?e.set(t,n):e[t]=n,!0},deleteProperty:function(e,t){return e.delete(t),!0}})}var l=function(){function t(e){var t=this;if(this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e)if(e instanceof Map)e.forEach((function(e,n){return t.set(n,e)}));else for(var n in e)this.set(n,e[n])}return t.is=function(e){return void 0!==e.map},t.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){var i=void 0!==this.$changes.indexes[t],r=i?this.$changes.indexes[t]:this.$refId++,o=i?e.OPERATION.REPLACE:e.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,r),i?s&&this.$items.get(t)!==n&&(o=e.OPERATION.ADD):(this.$changes.indexes[t]=r,this.$indexes.set(r,t)),this.$items.set(t,n),this.$changes.change(t,o),this},t.prototype.get=function(e){return this.$items.get(e)},t.prototype.delete=function(e){return this.$changes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return this.$items.has(e)},t.prototype.forEach=function(e){this.$items.forEach(e)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toJSON=function(){var e={};return this.forEach((function(t,n){e[n]="function"==typeof t.toJSON?t.toJSON():t})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e,t){e.$changes?n.set(t,e.clone()):n.set(t,e)}))),n},t.prototype.triggerAll=function(){xe.prototype.triggerAll.apply(this)},t}(),v={};function y(e,t){v[e]=t}function g(e){return v[e]}var m=function(){function e(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return e.create=function(t){var n=new e;return n.schema=Object.assign({},t&&t.schema||{}),n.indexes=Object.assign({},t&&t.indexes||{}),n.fieldsByIndex=Object.assign({},t&&t.fieldsByIndex||{}),n.descriptors=Object.assign({},t&&t.descriptors||{}),n.deprecated=Object.assign({},t&&t.deprecated||{}),n},e.prototype.addField=function(e,t){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=e,this.indexes[e]=n,this.schema[e]=Array.isArray(t)?{array:t[0]}:t},e.prototype.addFilter=function(e,t){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[e]]=t,this.indexesWithFilters.push(this.indexes[e]),!0},e.prototype.addChildrenFilter=function(e,t){var n=this.indexes[e],i=this.schema[e];if(g(Object.keys(i)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=t,!0;console.warn("@filterChildren: field '"+e+"' can't have children. Ignoring filter.")},e.prototype.getChildrenFilter=function(e){return this.childFilters&&this.childFilters[this.indexes[e]]},e.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},e}();function _(e){return e._context&&e._context.useFilters}var w=function(){function e(){this.types={},this.schemas=new Map,this.useFilters=!1}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e,t){void 0===t&&(t=this.schemas.size),e._definition=m.create(e._definition),e._typeid=t,this.types[t]=e,this.schemas.set(e,t)},e.create=function(t){return void 0===t&&(t=new e),function(e){return $(e,t)}},e}(),A=new w;function $(e,t){return void 0===t&&(t=A),function(n,i){var o=n.constructor;o._context=t,t.has(o)||t.add(o);var s=o._definition;if(s.addField(i,e),s.descriptors[i]){if(s.deprecated[i])return;try{throw new Error("@colyseus/schema: Duplicate '"+i+"' definition on '"+o.name+"'.\nCheck @type() annotation")}catch(e){var a=e.stack.split("\n")[4].trim();throw new Error(e.message+" "+a)}}var f=d.is(e),h=!f&&l.is(e);if("string"!=typeof e&&!xe.is(e)){var c=Object.values(e)[0];"string"==typeof c||t.has(c)||t.add(c)}var v="_"+i;s.descriptors[v]={enumerable:!1,configurable:!1,writable:!0},s.descriptors[i]={get:function(){return this[v]},set:function(e){e!==this[v]&&(null!=e?(!f||e instanceof d||(e=new(d.bind.apply(d,r([void 0],e)))),!h||e instanceof l||(e=new l(e)),void 0===e.$proxy&&(h?e=p(e):f&&(e=u(e))),this.$changes.change(i),e.$changes&&e.$changes.setParent(this,this.$changes.root,this._definition.indexes[i])):this.$changes.delete(i),this[v]=e)},enumerable:!0,configurable:!0}}}function E(e){return function(t,n){var i=t.constructor;i._definition.addFilter(n,e)&&(i._context.useFilters=!0)}}function O(e){return function(t,n){var i=t.constructor;i._definition.addChildrenFilter(n,e)&&(i._context.useFilters=!0)}}function I(e,t){return void 0===e&&(e=!0),function(t,n){var i=t.constructor._definition;i.deprecated[n]=!0,e&&(i.descriptors[n]={get:function(){throw new Error(n+" is deprecated.")},set:function(e){},enumerable:!1,configurable:!0})}}function b(e,t,n){for(var i in void 0===n&&(n=e._context||A),t)$(t[i],n)(e.prototype,i);return e}function x(e){for(var t=0,n=0,i=0,r=e.length;i<r;i++)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}function R(e,t,n){for(var i=0,r=0,o=n.length;r<o;r++)(i=n.charCodeAt(r))<128?e[t++]=i:i<2048?(e[t++]=192|i>>6,e[t++]=128|63&i):i<55296||i>=57344?(e[t++]=224|i>>12,e[t++]=128|i>>6&63,e[t++]=128|63&i):(r++,i=65536+((1023&i)<<10|1023&n.charCodeAt(r)),e[t++]=240|i>>18,e[t++]=128|i>>12&63,e[t++]=128|i>>6&63,e[t++]=128|63&i)}function T(e,t){e.push(255&t)}function C(e,t){e.push(255&t)}function P(e,t){e.push(255&t),e.push(t>>8&255)}function S(e,t){e.push(255&t),e.push(t>>8&255)}function N(e,t){e.push(255&t),e.push(t>>8&255),e.push(t>>16&255),e.push(t>>24&255)}function D(e,t){var n=t>>24,i=t>>16,r=t>>8,o=t;e.push(255&o),e.push(255&r),e.push(255&i),e.push(255&n)}function M(e,t){var n=Math.floor(t/Math.pow(2,32));D(e,t>>>0),D(e,n)}function k(e,t){var n=t/Math.pow(2,32)>>0;D(e,t>>>0),D(e,n)}function j(e,t){B(e,t)}function U(e,t){V(e,t)}var L=new Int32Array(2),F=new Float32Array(L.buffer),H=new Float64Array(L.buffer);function B(e,t){F[0]=t,N(e,L[0])}function V(e,t){H[0]=t,N(e,L[0]),N(e,L[1])}function z(e,t){return C(e,t?1:0)}function q(e,t){t||(t="");var n=x(t),i=0;if(n<32)e.push(160|n),i=1;else if(n<256)e.push(217),C(e,n),i=2;else if(n<65536)e.push(218),S(e,n),i=3;else{if(!(n<4294967296))throw new Error("String too long");e.push(219),D(e,n),i=5}return R(e,e.length,t),i+n}function J(e,t){return isNaN(t)?J(e,0):isFinite(t)?t!==(0|t)?(e.push(203),V(e,t),9):t>=0?t<128?(C(e,t),1):t<256?(e.push(204),C(e,t),2):t<65536?(e.push(205),S(e,t),3):t<4294967296?(e.push(206),D(e,t),5):(e.push(207),k(e,t),9):t>=-32?(e.push(224|t+32),1):t>=-128?(e.push(208),T(e,t),2):t>=-32768?(e.push(209),P(e,t),3):t>=-2147483648?(e.push(210),N(e,t),5):(e.push(211),M(e,t),9):J(e,t>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var K=Object.freeze({__proto__:null,utf8Write:R,int8:T,uint8:C,int16:P,uint16:S,int32:N,uint32:D,int64:M,uint64:k,float32:j,float64:U,writeFloat32:B,writeFloat64:V,boolean:z,string:q,number:J});function W(e,t,n){for(var i="",r=0,o=t,s=t+n;o<s;o++){var a=e[o];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(r=(7&a)<<18|(63&e[++o])<<12|(63&e[++o])<<6|(63&e[++o])<<0)>=65536?(r-=65536,i+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):i+=String.fromCharCode(r):i+=String.fromCharCode((15&a)<<12|(63&e[++o])<<6|(63&e[++o])<<0):i+=String.fromCharCode((31&a)<<6|63&e[++o]):i+=String.fromCharCode(a)}return i}function X(e,t){return G(e,t)<<24>>24}function G(e,t){return e[t.offset++]}function Q(e,t){return Y(e,t)<<16>>16}function Y(e,t){return e[t.offset++]|e[t.offset++]<<8}function Z(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function ee(e,t){return Z(e,t)>>>0}function te(e,t){return fe(e,t)}function ne(e,t){return he(e,t)}function ie(e,t){var n=ee(e,t);return Z(e,t)*Math.pow(2,32)+n}function re(e,t){var n=ee(e,t);return ee(e,t)*Math.pow(2,32)+n}var oe=new Int32Array(2),se=new Float32Array(oe.buffer),ae=new Float64Array(oe.buffer);function fe(e,t){return oe[0]=Z(e,t),se[0]}function he(e,t){return oe[0]=Z(e,t),oe[1]=Z(e,t),ae[0]}function ce(e,t){return G(e,t)>0}function ue(e,t){var n,i=e[t.offset++];i<192?n=31&i:217===i?n=G(e,t):218===i?n=Y(e,t):219===i&&(n=ee(e,t));var r=W(e,t.offset,n);return t.offset+=n,r}function de(e,t){var n=e[t.offset];return n<192&&n>160||217===n||218===n||219===n}function pe(e,t){var n=e[t.offset++];return n<128?n:202===n?fe(e,t):203===n?he(e,t):204===n?G(e,t):205===n?Y(e,t):206===n?ee(e,t):207===n?re(e,t):208===n?X(e,t):209===n?Q(e,t):210===n?Z(e,t):211===n?ie(e,t):n>223?-1*(255-n+1):void 0}function le(e,t){var n=e[t.offset];return n<128||n>=202&&n<=211}function ve(e,t){return e[t.offset]<160}function ye(e,t){return e[t.offset-1]===s&&(e[t.offset]<128||e[t.offset]>=202&&e[t.offset]<=211)}var ge=Object.freeze({__proto__:null,int8:X,uint8:G,int16:Q,uint16:Y,int32:Z,uint32:ee,float32:te,float64:ne,int64:ie,uint64:re,readFloat32:fe,readFloat64:he,boolean:ce,string:ue,stringCheck:de,number:pe,numberCheck:le,arrayCheck:ve,switchStructureCheck:ye}),me=function(){function t(e){var t=this;this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach((function(e){return t.add(e)}))}return t.is=function(e){return void 0!==e.collection},t.prototype.add=function(e){var t=this.$refId++;return void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,t),this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,e),this.$changes.change(t),t},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,i=this.$items.entries();(n=i.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return Array.from(this.$items.values()).some((function(t){return t===e}))},t.prototype.forEach=function(e){var t=this;this.$items.forEach((function(n,i,r){return e(n,i,t)}))},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach((function(t,n){e.push("function"==typeof t.toJSON?t.toJSON():t)})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e){e.$changes?n.add(e.clone()):n.add(e)}))),n},t.prototype.triggerAll=function(){xe.prototype.triggerAll.apply(this)},t}(),_e=function(){function t(e){var t=this;this.$changes=new h(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach((function(e){return t.add(e)}))}return t.is=function(e){return void 0!==e.set},t.prototype.add=function(t){var n,i;if(this.has(t))return!1;var r=this.$refId++;void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,r);var o=null!==(i=null===(n=this.$changes.indexes[r])||void 0===n?void 0:n.op)&&void 0!==i?i:e.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,t),this.$changes.change(r,o),r},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,i=this.$items.entries();(n=i.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){var n=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(e){n.$changes.root.removeRef(e.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){for(var t,n=this.$items.values(),i=!1;(t=n.next())&&!t.done;)if(e===t.value){i=!0;break}return i},t.prototype.forEach=function(e){var t=this;this.$items.forEach((function(n,i,r){return e(n,i,t)}))},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach((function(t,n){e.push("function"==typeof t.toJSON?t.toJSON():t)})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e){e.$changes?n.add(e.clone()):n.add(e)}))),n},t.prototype.triggerAll=function(){xe.prototype.triggerAll.apply(this)},t}(),we=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){return this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach((function(t){return t.apply(void 0,e)}))},e.prototype.invokeAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.all(this.handlers.map((function(t){return t.apply(void 0,e)})))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}(),Ae=function(){function e(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return e.prototype.addRefId=function(e){this.refIds.has(e)||(this.refIds.add(e),this.containerIndexes.set(e,new Set))},e.get=function(t){return void 0===t.$filterState&&(t.$filterState=new e),t.$filterState},e}(),$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Error);function Ee(e,t,n,i){var r,o=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(e)&&console.log('trying to encode "NaN" in '+n.constructor.name+"#"+i);break;case"string":r="string",o=!0;break;case"boolean":return}if(typeof e!==r&&(!o||o&&null!==e)){var s="'"+JSON.stringify(e)+"'"+(e&&e.constructor&&" ("+e.constructor.name+")"||"");throw new $e("a '"+r+"' was expected, but "+s+" was provided in "+n.constructor.name+"#"+i)}}function Oe(e,t,n,i){if(!(e instanceof t))throw new $e("a '"+t.name+"' was expected, but '"+e.constructor.name+"' was provided in "+n.constructor.name+"#"+i)}function Ie(e,t,n,i,r){Ee(n,e,i,r);var o=K[e];if(!o)throw new $e("a '"+e+"' was expected, but "+n+" was provided in "+i.constructor.name+"#"+r);o(t,n)}function be(e,t,n){return ge[e](t,n)}var xe=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Object.defineProperties(this,{$changes:{value:new h(this,void 0,new f),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),e[0]&&this.assign(e[0])}return t.onError=function(e){console.error(e)},t.is=function(e){return e._definition&&void 0!==e._definition.schema},t.prototype.assign=function(e){return Object.assign(this,e),this},Object.defineProperty(t.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),t.prototype.listen=function(e,t){var n=this;return this.$listeners[e]||(this.$listeners[e]=new we),this.$listeners[e].register(t),function(){return n.$listeners[e].remove(t)}},t.prototype.decode=function(n,i,r,o){void 0===i&&(i={offset:0}),void 0===r&&(r=this),void 0===o&&(o=new Map);var a=this.$changes.root,f=n.length,h=0,c=[];for(a.refs.set(h,this),o.set(h,c);i.offset<f;){var u=n[i.offset++];if(u!=s){var p=r.$changes,v=void 0!==r._definition,y=v?u>>6<<6:u;if(y!==e.OPERATION.CLEAR){var m=v?u%(y||255):pe(n,i),_=v?r._definition.fieldsByIndex[m]:"",w=p.getType(m),A=void 0,$=void 0,E=void 0;if(v?$=r["_"+_]:($=r.getByIndex(m),(y&e.OPERATION.ADD)===e.OPERATION.ADD?(E=r instanceof l?ue(n,i):m,r.setIndex(m,E)):E=r.getIndex(m)),(y&e.OPERATION.DELETE)===e.OPERATION.DELETE&&(y!==e.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(m),$&&$.$changes&&a.removeRef($.$changes.refId),A=null),void 0!==_){if(y===e.OPERATION.DELETE);else if(t.is(w)){var O=pe(n,i);if(A=a.refs.get(O),y!==e.OPERATION.REPLACE){var I=this.getSchemaType(n,i,w);A||((A=this.createTypeInstance(I)).$changes.refId=O,$&&(A.onChange=$.onChange,A.onRemove=$.onRemove,A.$listeners=$.$listeners,$.$changes.refId&&O!==$.$changes.refId&&a.removeRef($.$changes.refId))),a.addRef(O,A,A!==$)}}else if("string"==typeof w)A=be(w,n,i);else{var b=g(Object.keys(w)[0]),x=pe(n,i),R=a.refs.has(x)?$||a.refs.get(x):new b.constructor;if((A=R.clone(!0)).$changes.refId=x,$&&(A.onAdd=$.onAdd,A.onRemove=$.onRemove,A.onChange=$.onChange,$.$changes.refId&&x!==$.$changes.refId)){a.removeRef($.$changes.refId);for(var T=[],C=$.entries(),P=void 0;(P=C.next())&&!P.done;){var S=P.value,N=S[0],D=S[1];T.push({op:e.OPERATION.DELETE,field:N,value:void 0,previousValue:D})}o.set($.$changes.refId,T)}a.addRef(x,A,R!==$),b.getProxy&&(A=b.getProxy(A))}var M=$!==A;if(null!=A)if(A.$changes&&A.$changes.setParent(p.ref,p.root,m),r instanceof t)r[_]=A;else if(r instanceof l)N=E,r.$items.set(N,A);else if(r instanceof d)r.setAt(m,A);else if(r instanceof me){var k=r.add(A);r.setIndex(m,k)}else r instanceof _e&&!1!==(k=r.add(A))&&r.setIndex(m,k);M&&c.push({op:y,field:_,dynamicIndex:E,value:A,previousValue:$})}else{console.warn("@colyseus/schema: definition mismatch");for(var j={offset:i.offset};i.offset<f&&(!ye(n,i)||(j.offset=i.offset+1,!a.refs.has(pe(n,j))));)i.offset++}}else r.clear(!0)}else{h=pe(n,i);var U=a.refs.get(h);if(!U)throw new Error('"refId" not found: '+h);r=U,c=[],o.set(h,c)}}return this._triggerChanges(o),a.garbageCollectDeletedRefs(),o},t.prototype.encode=function(n,i,r){void 0===n&&(n=!1),void 0===i&&(i=[]),void 0===r&&(r=!1);for(var o=this.$changes,a=new WeakSet,f=[o],h=1,c=0;c<h;c++){var u=f[c],d=u.ref,p=d instanceof t;u.ensureRefId(),a.add(u),u!==o&&(u.changed||n)&&(C(i,s),J(i,u.refId));for(var v=n?Array.from(u.allChanges):Array.from(u.changes.values()),y=0,m=v.length;y<m;y++){var _=n?{op:e.OPERATION.ADD,index:v[y]}:v[y],w=_.index,A=p?d._definition.fieldsByIndex&&d._definition.fieldsByIndex[w]:w,$=i.length;if(_.op!==e.OPERATION.TOUCH)if(p)C(i,w|_.op);else{if(C(i,_.op),_.op===e.OPERATION.CLEAR)continue;J(i,w)}if(p||(_.op&e.OPERATION.ADD)!=e.OPERATION.ADD||d instanceof l&&q(i,u.ref.$indexes.get(w)),_.op!==e.OPERATION.DELETE){var E=u.getType(w),O=u.getValue(w);if(O&&O.$changes&&!a.has(O.$changes)&&(f.push(O.$changes),O.$changes.ensureRefId(),h++),_.op!==e.OPERATION.TOUCH){if(t.is(E))Oe(O,E,d,A),J(i,O.$changes.refId),(_.op&e.OPERATION.ADD)===e.OPERATION.ADD&&this.tryEncodeTypeId(i,E,O.constructor);else if("string"==typeof E)Ie(E,i,O,d,A);else{var I=g(Object.keys(E)[0]);Oe(d["_"+A],I.constructor,d,A),J(i,O.$changes.refId)}r&&u.cache(w,i.slice($))}}}n||r||u.discard()}return i},t.prototype.encodeAll=function(e){return this.encode(!0,[],e)},t.prototype.applyFilters=function(n,i){void 0===i&&(i=!1);for(var r=this,o=new Set,a=Ae.get(n),f=[this.$changes],h=1,c=[],u=function(u){var d=f[u];if(o.has(d.refId))return"continue";var p=d.ref,v=p instanceof t;C(c,s),J(c,d.refId);var y=a.refIds.has(d),g=i||!y;a.addRefId(d);var m=a.containerIndexes.get(d),_=g?Array.from(d.allChanges):Array.from(d.changes.values());!i&&v&&p._definition.indexesWithFilters&&p._definition.indexesWithFilters.forEach((function(t){!m.has(t)&&d.allChanges.has(t)&&(g?_.push(t):_.push({op:e.OPERATION.ADD,index:t}))}));for(var w=0,A=_.length;w<A;w++){var $=g?{op:e.OPERATION.ADD,index:_[w]}:_[w];if($.op!==e.OPERATION.CLEAR){var E=$.index;if($.op!==e.OPERATION.DELETE){var O=d.getValue(E),I=d.getType(E);if(v){if((b=p._definition.filters&&p._definition.filters[E])&&!b.call(p,n,O,r)){O&&O.$changes&&o.add(O.$changes.refId);continue}}else{var b,x=d.parent;if((b=d.getChildrenFilter())&&!b.call(x,n,p.$indexes.get(E),O,r)){O&&O.$changes&&o.add(O.$changes.refId);continue}}if(O.$changes&&(f.push(O.$changes),h++),$.op!==e.OPERATION.TOUCH)if($.op===e.OPERATION.ADD||v)c=c.concat(d.caches[E]),m.add(E);else if(m.has(E))c=c.concat(d.caches[E]);else{if(m.add(E),C(c,e.OPERATION.ADD),J(c,E),p instanceof l){var R=d.ref.$indexes.get(E);q(c,R)}O.$changes?J(c,O.$changes.refId):K[I](c,O)}else O.$changes&&!v&&(C(c,e.OPERATION.ADD),J(c,E),p instanceof l&&(R=d.ref.$indexes.get(E),q(c,R)),J(c,O.$changes.refId))}else v?C(c,$.op|E):(C(c,$.op),J(c,E))}else C(c,$.op)}},d=0;d<h;d++)u(d);return c},t.prototype.clone=function(){var e=new this.constructor,t=this._definition.schema;for(var n in t)"object"==typeof this[n]&&"function"==typeof this[n].clone?e[n]=this[n].clone():e[n]=this[n];return e},t.prototype.triggerAll=function(){if(0!==this.$changes.root.refs.size){var e=new Map;t.prototype._triggerAllFillChanges.call(this,this,e);try{t.prototype._triggerChanges.call(this,e)}catch(e){t.onError(e)}}},t.prototype.toJSON=function(){var e=this._definition.schema,t=this._definition.deprecated,n={};for(var i in e)t[i]||null===this[i]||void 0===this[i]||(n[i]="function"==typeof this[i].toJSON?this[i].toJSON():this["_"+i]);return n},t.prototype.discardAllChanges=function(){this.$changes.discardAll()},t.prototype.getByIndex=function(e){return this[this._definition.fieldsByIndex[e]]},t.prototype.deleteByIndex=function(e){this[this._definition.fieldsByIndex[e]]=void 0},t.prototype.tryEncodeTypeId=function(e,t,n){t._typeid!==n._typeid&&(C(e,a),J(e,n._typeid))},t.prototype.getSchemaType=function(e,t,n){var i;return e[t.offset]===a&&(t.offset++,i=this.constructor._context.get(pe(e,t))),i||n},t.prototype.createTypeInstance=function(e){var t=new e;return t.$changes.root=this.$changes.root,t},t.prototype._triggerAllFillChanges=function(n,i){if(!i.has(n.$changes.refId)){var r=[];if(i.set(n.$changes.refId||0,r),n instanceof t){var o=n._definition.schema;for(var s in o)void 0!==(u=n["_"+s])&&(r.push({op:e.OPERATION.ADD,field:s,value:u,previousValue:void 0}),void 0!==u.$changes&&t.prototype._triggerAllFillChanges.call(this,u,i))}else for(var a=n.entries(),f=void 0;(f=a.next())&&!f.done;){var h=f.value,c=h[0],u=h[1];r.push({op:e.OPERATION.ADD,field:c,dynamicIndex:c,value:u,previousValue:void 0}),void 0!==u.$changes&&t.prototype._triggerAllFillChanges.call(this,u,i)}}},t.prototype._triggerChanges=function(n){var i=this;n.forEach((function(n,r){var o,s,a,f,h,c,u,d,p,l,v,y;if(n.length>0){for(var g=i.$changes.root.refs.get(r),m=g instanceof t,_=0;_<n.length;_++){var w=n[_],A=g.$listeners&&g.$listeners[w.field];if(m||(w.op===e.OPERATION.ADD&&void 0===w.previousValue?null===(s=(o=g).onAdd)||void 0===s||s.call(o,w.value,null!==(a=w.dynamicIndex)&&void 0!==a?a:w.field):w.op===e.OPERATION.DELETE?void 0!==w.previousValue&&(null===(h=(f=g).onRemove)||void 0===h||h.call(f,w.previousValue,null!==(c=w.dynamicIndex)&&void 0!==c?c:w.field)):w.op===e.OPERATION.DELETE_AND_ADD?(void 0!==w.previousValue&&(null===(d=(u=g).onRemove)||void 0===d||d.call(u,w.previousValue,w.dynamicIndex)),null===(l=(p=g).onAdd)||void 0===l||l.call(p,w.value,w.dynamicIndex)):w.op!==e.OPERATION.REPLACE&&w.value===w.previousValue||null===(y=(v=g).onChange)||void 0===y||y.call(v,w.value,w.dynamicIndex)),(w.op&e.OPERATION.DELETE)===e.OPERATION.DELETE&&w.previousValue instanceof t&&w.previousValue.onRemove&&w.previousValue.onRemove(),A)try{A.invoke(w.value,w.previousValue)}catch(e){t.onError(e)}}if(m&&g.onChange)try{g.onChange(n)}catch(e){t.onError(e)}}}))},t._definition=m.create(),t}();function Re(e){for(var t=[e.$changes],n=1,i={},r=i,o=function(e){var n=t[e];n.changes.forEach((function(e){var t=n.ref,i=e.index,o=t._definition?t._definition.fieldsByIndex[i]:t.$indexes.get(i);r[o]=n.getValue(i)}))},s=0;s<n;s++)o(s);return i}var Te=new w,Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),i([$("string",Te)],t.prototype,"name",void 0),i([$("string",Te)],t.prototype,"type",void 0),i([$("number",Te)],t.prototype,"referencedType",void 0),t}(xe),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fields=new d,t}return n(t,e),i([$("number",Te)],t.prototype,"id",void 0),i([$([Ce],Te)],t.prototype,"fields",void 0),t}(xe),Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=new d,t}return n(t,e),t.encode=function(e){var n=e.constructor,i=new t;i.rootType=n._typeid;var r=function(e,t){for(var n in t){var r=new Ce;r.name=n;var o=void 0;if("string"==typeof t[n])o=t[n];else{var s=t[n],a=void 0;xe.is(s)?(o="ref",a=t[n]):"string"==typeof s[o=Object.keys(s)[0]]?o+=":"+s[o]:a=s[o],r.referencedType=a?a._typeid:-1}r.type=o,e.fields.push(r)}i.types.push(e)},o=n._context.types;for(var s in o){var a=new Pe;a.id=Number(s),r(a,o[s]._definition.schema)}return i.encodeAll()},t.decode=function(e,i){var r=new w,o=new t;o.decode(e,i);var s=o.types.reduce((function(e,t){var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(xe),o=t.id;return e[o]=i,r.add(i,o),e}),{});o.types.forEach((function(e){var t=s[e.id];e.fields.forEach((function(e){var n;if(void 0!==e.referencedType){var i=e.type,o=s[e.referencedType];if(!o){var a=e.type.split(":");i=a[0],o=a[1]}"ref"===i?$(o,r)(t.prototype,e.name):$(((n={})[i]=o,n),r)(t.prototype,e.name)}else $(e.type,r)(t.prototype,e.name)}))}));var a=s[o.rootType],f=new a;for(var h in a._definition.schema){var c=a._definition.schema[h];"string"!=typeof c&&(f[h]="function"==typeof c?new c:new(g(Object.keys(c)[0]).constructor))}return f},i([$([Pe],Te)],t.prototype,"types",void 0),i([$("number",Te)],t.prototype,"rootType",void 0),t}(xe);y("map",{constructor:l,getProxy:p}),y("array",{constructor:d,getProxy:u}),y("set",{constructor:_e}),y("collection",{constructor:me}),e.ArraySchema=d,e.CollectionSchema=me,e.Context=w,e.MapSchema=l,e.Reflection=Se,e.ReflectionField=Ce,e.ReflectionType=Pe,e.Schema=xe,e.SchemaDefinition=m,e.SetSchema=_e,e.decode=ge,e.defineTypes=b,e.deprecated=I,e.dumpChanges=Re,e.encode=K,e.filter=E,e.filterChildren=O,e.hasFilter=_,e.registerType=y,e.type=$,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),M=function(){function t(e,t){var n=this;this.onStateChange=S(),this.onError=S(),this.onLeave=S(),this.onJoin=S(),this.hasJoined=!1,this.onMessageHandlers={events:{},emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(this.events[e]||[]).forEach((function(e){return e.apply(void 0,n)}))},on:function(e,t){var n=this;return(this.events[e]=this.events[e]||[]).push(t),function(){return n.events[e]=(n.events[e]||[]).filter((function(e){return e!==t}))}}},this.id=null,this.name=e,t&&(this.serializer=new(C("schema")),this.rootSchema=t,this.serializer.state=new t),this.onError((function(e,t){return console.warn("colyseus.js - onError => ("+e+") "+t)})),this.onLeave((function(){return n.removeAllListeners()}))}return t.prototype.connect=function(e){var t=this;this.connection=new x,this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=function(e){if(!t.hasJoined)return console.warn("Room connection was closed unexpectedly ("+e.code+"): "+e.reason),void t.onError.invoke(e.code,e.reason);t.onLeave.invoke(e.code),t.destroy()},this.connection.events.onerror=function(e){console.warn("Room, onError ("+e.code+"): "+e.reason),t.onError.invoke(e.code,e.reason)},this.connection.connect(e)},t.prototype.leave=function(t){void 0===t&&(t=!0),this.connection?t?this.connection.send([e.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.invoke(4e3)},t.prototype.onMessage=function(e,t){return this.onMessageHandlers.on(this.getMessageHandlerKey(e),t)},t.prototype.send=function(t,n){var i,r=[e.Protocol.ROOM_DATA];if("string"==typeof t?D.encode.string(r,t):D.encode.number(r,t),void 0!==n){var o=$(n);(i=new Uint8Array(r.length+o.byteLength)).set(new Uint8Array(r),0),i.set(new Uint8Array(o),r.length)}else i=new Uint8Array(r);this.connection.send(i.buffer)},Object.defineProperty(t.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),t.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},t.prototype.onMessageCallback=function(t){var n=Array.from(new Uint8Array(t.data)),i=n[0];if(i===e.Protocol.JOIN_ROOM){var r=1;if(this.serializerId=function(e,t){for(var n=e[t++],i="",r=0,o=t,s=t+n;o<s;o++){var a=e[o];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&e[++o])<<12|(63&e[++o])<<6|(63&e[++o])<<0)>=65536?(r-=65536,i+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):i+=String.fromCharCode(r)}else i+=String.fromCharCode((15&a)<<12|(63&e[++o])<<6|(63&e[++o])<<0);else i+=String.fromCharCode((31&a)<<6|63&e[++o]);else i+=String.fromCharCode(a)}return i}(n,r),r+=function(e){void 0===e&&(e="");for(var t=0,n=0,i=0,r=e.length;i<r;i++)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n+1}(this.serializerId),!this.serializer){var o=C(this.serializerId);this.serializer=new o}n.length>r&&this.serializer.handshake&&this.serializer.handshake(n,{offset:r}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([e.Protocol.JOIN_ROOM])}else if(i===e.Protocol.ERROR){var s={offset:1},a=D.decode.number(n,s),f=D.decode.string(n,s);this.onError.invoke(a,f)}else if(i===e.Protocol.LEAVE_ROOM)this.leave();else if(i===e.Protocol.ROOM_DATA_SCHEMA){var h={offset:1};(f=new(u=this.serializer.getState().constructor._context.get(D.decode.number(n,h)))).decode(n,h),this.dispatchMessage(u,f)}else if(i===e.Protocol.ROOM_STATE)n.shift(),this.setState(n);else if(i===e.Protocol.ROOM_STATE_PATCH)n.shift(),this.patch(n);else if(i===e.Protocol.ROOM_DATA){var c={offset:1},u=D.decode.stringCheck(n,c)?D.decode.string(n,c):D.decode.number(n,c);f=n.length>c.offset?function(e,t){void 0===t&&(t=0);var n=new _(e,t),i=n._parse();if(n._offset!==e.byteLength)throw new Error(e.byteLength-n._offset+" trailing bytes");return i}(t.data,c.offset):void 0;this.dispatchMessage(u,f)}},t.prototype.setState=function(e){this.serializer.setState(e),this.onStateChange.invoke(this.serializer.getState())},t.prototype.patch=function(e){this.serializer.patch(e),this.onStateChange.invoke(this.serializer.getState())},t.prototype.dispatchMessage=function(e,t){var n=this.getMessageHandlerKey(e);this.onMessageHandlers.events[n]?this.onMessageHandlers.emit(n,t):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",e,t):console.warn("onMessage not registered for type '"+e+"'.")},t.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},t.prototype.getMessageHandlerKey=function(e){switch(typeof e){case"function":return"$"+e._typeid;case"string":return e;case"number":return"i"+e;default:throw new Error("invalid message type.")}},t}();function k(){return N||(N="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]},removeItem:function(e){delete this.cache[e]}}),N}var j,U="colyseus-auth-token";e.Platform=void 0,(j=e.Platform||(e.Platform={})).ios="ios",j.android="android";var L,F=function(){function e(e){var t,n,i,r=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=e.replace("ws","http"),t=U,n=function(e){return r.token=e},i=k().getItem(t),"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return n(e)})):n(i)}return Object.defineProperty(e.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),e.prototype.login=function(e){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:return t=Object.assign({},e),this.hasToken&&(t.token=this.token),[4,this.request("post","/auth",t)];case 1:for(i in n=r.sent(),this.token=n.token,o=U,s=this.token,k().setItem(o,s),n)this.hasOwnProperty(i)&&(this[i]=n[i]);return this.registerPingService(),[2,this]}var o,s}))}))},e.prototype.save=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return e.sent(),[2,this]}}))}))},e.prototype.getFriends=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,e.sent()]}}))}))},e.prototype.getOnlineFriends=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,e.sent()]}}))}))},e.prototype.getFriendRequests=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,e.sent()]}}))}))},e.prototype.sendFriendRequest=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("post","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.acceptFriendRequest=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("put","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.declineFriendRequest=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("del","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.blockUser=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("post","/friends/block",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.unblockUser=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.request("put","/friends/block",{userId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.request=function(e,t,n,o,s){return void 0===n&&(n={}),void 0===s&&(s={}),i(this,void 0,void 0,(function(){var i,a,f,h;return r(this,(function(r){switch(r.label){case 0:for(a in s.Accept="application/json",this.hasToken&&(s.Authorization="Bearer "+this.token),i=[],n)i.push(a+"="+n[a]);return f=i.length>0?"?"+i.join("&"):"",h={headers:s},o&&(h.body=o),[4,g[e](""+this.endpoint+t+f,h)];case 1:return[2,r.sent().data]}}))}))},e.prototype.logout=function(){var e;this.token=void 0,e=U,k().removeItem(e),this.unregisterPingService()},e.prototype.registerPingService=function(e){var t=this;void 0===e&&(e=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval((function(){return t.request("get","/auth")}),e)},e.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},e}(),H=function(e){function t(n,i){var r=e.call(this,n)||this;return r.code=i,Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error),B="undefined"!=typeof window&&void 0!==(null===(L=null===window||void 0===window?void 0:window.location)||void 0===L?void 0:L.hostname)?window.location.protocol.replace("http","ws")+"//"+window.location.hostname+(window.location.port&&":"+window.location.port):"ws://127.0.0.1:2567",V=function(){function e(e){void 0===e&&(e=B),this.endpoint=e}return Object.defineProperty(e.prototype,"auth",{get:function(){return this._auth||(this._auth=new F(this.endpoint)),this._auth},enumerable:!1,configurable:!0}),e.prototype.joinOrCreate=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.create=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("create",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.join=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("join",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.joinById=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.reconnect=function(e,t,n){return i(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,{sessionId:t},n)];case 1:return[2,i.sent()]}}))}))},e.prototype.getAvailableRooms=function(e){return void 0===e&&(e=""),i(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return t=this.endpoint.replace("ws","http")+"/matchmake/"+e,[4,u(t,{headers:{Accept:"application/json"}})];case 1:return[2,n.sent().data]}}))}))},e.prototype.consumeSeatReservation=function(e,t){return i(this,void 0,void 0,(function(){var n;return r(this,(function(i){return(n=this.createRoom(e.room.name,t)).id=e.room.roomId,n.sessionId=e.sessionId,n.connect(this.buildEndpoint(e.room,{sessionId:n.sessionId})),[2,new Promise((function(e,t){var i=function(e,n){return t(new m(e,n))};n.onError.once(i),n.onJoin.once((function(){n.onError.remove(i),e(n)}))}))]}))}))},e.prototype.createMatchMakeRequest=function(e,t,n,o){return void 0===n&&(n={}),i(this,void 0,void 0,(function(){var i,s;return r(this,(function(r){switch(r.label){case 0:return i=this.endpoint.replace("ws","http")+"/matchmake/"+e+"/"+t,this._auth&&this._auth.hasToken&&(n.token=this._auth.token),[4,p(i,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((s=r.sent().data).error)throw new H(s.error,s.code);return[2,this.consumeSeatReservation(s,o)]}}))}))},e.prototype.createRoom=function(e,t){return new M(e,t)},e.prototype.buildEndpoint=function(e,t){void 0===t&&(t={});var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(i+"="+t[i]);return this.endpoint+"/"+e.processId+"/"+e.roomId+"?"+n.join("&")},e}(),z=function(){function e(){}return e.prototype.setState=function(e){this.state.decode(e)},e.prototype.getState=function(){return this.state},e.prototype.patch=function(e){this.state.decode(e)},e.prototype.teardown=function(){var e,t;null===(t=null===(e=this.state)||void 0===e?void 0:e.$changes)||void 0===t||t.root.clearRefs()},e.prototype.handshake=function(e,t){this.state?(new D.Reflection).decode(e,t):this.state=D.Reflection.decode(e,t)},e}(),q=function(){function e(){}return e.prototype.setState=function(e){},e.prototype.getState=function(){return null},e.prototype.patch=function(e){},e.prototype.teardown=function(){},e.prototype.handshake=function(e){},e}();T("schema",z),T("none",q),e.Auth=F,e.Client=V,e.Room=M,e.SchemaSerializer=z,e.registerSerializer=T,Object.defineProperty(e,"__esModule",{value:!0})}))}(),e("default",r.exports)}));e("__cjsMetaURL",t.meta.url)}}}));

System.register("chunks:///_virtual/PokerEvaluator.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(s){"use strict";var a,t,i;return{setters:[function(s){a=s.defineProperty,t=s.inheritsLoose},function(s){i=s.cclegacy}],execute:function(){s("exportToGlobal",(function(s){s.Card=e,s.Hand=n,s.Game=A,s.RoyalFlush=l,s.NaturalRoyalFlush=d,s.WildRoyalFlush=c,s.FiveOfAKind=u,s.StraightFlush=h,s.FourOfAKindPairPlus=o,s.FourOfAKind=g,s.FourWilds=f,s.TwoThreeOfAKind=p,s.ThreeOfAKindTwoPair=w,s.FullHouse=k,s.Flush=v,s.Straight=H,s.ThreeOfAKind=m,s.ThreePair=b,s.TwoPair=V,s.OnePair=y,s.HighCard=S,s.PaiGowPokerHelper=Q})),i._RF.push({},"defbfDo/AJPR6SUVlguNfXH","PokerEvaluator",void 0);var r=["1","2","3","4","5","6","7","8","9","T","J","Q","K","A"],e=function(){function s(s){a(this,"value",void 0),a(this,"suit",void 0),a(this,"rank",void 0),a(this,"wildValue",void 0),this.value=s.substr(0,1),this.suit=s.substr(1,1).toLowerCase(),this.rank=r.indexOf(this.value),this.wildValue=s.substr(0,1)}return s.prototype.toString=function(){return this.wildValue.replace("T","10")+this.suit},s.sort=function(s,a){return s.rank>a.rank?-1:s.rank<a.rank?1:0},s}(),n=function(){function s(s,t,i,r){a(this,"cardPool",[]),a(this,"cards",[]),a(this,"suits",{}),a(this,"values",[]),a(this,"wilds",[]),a(this,"name",null),a(this,"game",null),a(this,"sfLength",0),a(this,"alwaysQualifies",!0),a(this,"rank",null),a(this,"isPossible",!1),a(this,"descr",""),a(this,"sfQualify",0),this.cardPool=[],this.cards=[],this.suits={},this.values=[],this.wilds=[],this.name=t,this.game=i,this.sfLength=0,this.alwaysQualifies=!0,r&&this.game.lowestQualified&&(this.alwaysQualifies=!1);var n=new Set(s);if("standard"===i.descr&&n.size!==s.length)throw console.log(s,n.size,s.length),new Error("Duplicate cards");for(var h,l,d,c,u,o=this.game.handValues.length,g=0;g<this.game.handValues.length&&this.game.handValues[g]!==this.constructor;g++);this.rank=o-g,this.cardPool=s.map((function(s){return"string"==typeof s?new e(s):s}));for(g=0;g<this.cardPool.length;g++)(u=this.cardPool[g]).value===this.game.wildValue&&(u.rank=-1);this.cardPool=this.cardPool.sort(e.sort);for(g=0;g<this.cardPool.length;g++)-1===(u=this.cardPool[g]).rank?this.wilds.push(u):((h=this.suits)[d=u.suit]||(h[d]=[]),(l=this.values)[c=u.rank]||(l[c]=[]),this.suits[u.suit].push(u),this.values[u.rank].push(u));this.values.reverse(),this.isPossible=this.solve()}var t=s.prototype;return t.compare=function(s){if(this.rank<s.rank)return 1;if(this.rank>s.rank)return-1;for(var a=0,t=0;t<=4;t++){if(this.cards[t]&&s.cards[t]&&this.cards[t].rank<s.cards[t].rank){a=1;break}if(this.cards[t]&&s.cards[t]&&this.cards[t].rank>s.cards[t].rank){a=-1;break}}return a},t.loseTo=function(s){return this.compare(s)>0},t.getNumCardsByRank=function(s){for(var a=this.values[s],t=a?a.length:0,i=0;i<this.wilds.length;i++)this.wilds[i].rank>-1||(a?1!==this.game.wildStatus&&a[0].rank!==r.length-1||(t+=1):1!==this.game.wildStatus&&s!==r.length-1||(t+=1));return t},t.getCardsForFlush=function(s,a){for(var t=(this.suits[s]||[]).sort(e.sort),i=0;i<this.wilds.length;i++){var n=this.wilds[i];if(a){for(var h=0;h<r.length&&h<t.length&&t[h].rank===r.length-1-h;)h+=1;n.rank=r.length-1-h,n.wildValue=r[n.rank]}t.push(n),t=t.sort(e.sort)}return t},t.resetWildCards=function(){for(var s=0;s<this.wilds.length;s++)this.wilds[s].rank=-1,this.wilds[s].wildValue=this.wilds[s].value},t.nextHighest=function(){var s,a=[];if(a=a.concat(this.cards),s=this.cardPool.filter((function(s){if(a.indexOf(s)<0)return!0})),0===this.game.wildStatus){for(var t=0;t<s.length;t++){var i=s[t];-1===i.rank&&(i.wildValue="A",i.rank=r.length-1)}s=s.sort(e.sort)}return s},t.toString=function(){return this.cards.map((function(s){return s.toString()})).join(", ")},t.toArray=function(){return this.cards.map((function(s){return s.toString()}))},t.qualifiesHigh=function(){return!(this.game.lowestQualified&&!this.alwaysQualifies)||this.compare(s.solve(this.game.lowestQualified,this.game,null))<=0},s.winners=function(s){s=s.filter((function(s){return s.qualifiesHigh()}));var a=Math.max.apply(Math,s.map((function(s){return s.rank})));return s=(s=s.filter((function(s){return s.rank===a}))).filter((function(a){for(var t=!1,i=0;i<s.length&&!(t=a.loseTo(s[i]));i++);return!t}))},s.solve=function(s,a,t){s=s||[""];for(var i=(a="string"==typeof(a=a||"standard")?new A(a):a).handValues,r=null,e=0;e<i.length&&!(r=new i[e](s,a,t)).isPossible;e++);return r},t.solve=function(){return console.log("call solve(): hand top parent"),!1},s.stripWilds=function(s,a){var t,i;s=s||[""],t=[],i=[];for(var r=0;r<s.length;r++)-1===s[r].rank?t.push(s[r]):i.push(s[r]);return[t,i]},s}(),h=function(s){function a(a,t,i){return s.call(this,a,"Straight Flush",t,i)||this}return t(a,s),a.prototype.solve=function(){var s;this.resetWildCards();var a=null,t=[];for(var i in this.suits)if((s=this.getCardsForFlush(i,!1))&&s.length>=this.game.sfQualify){a=s;break}if(a){if("standard"!==this.game.descr)for(var i in this.suits)a[0].suit!==i&&(t=t.concat(this.suits[i]||[]),t=n.stripWilds(t,this.game)[1]);var r=new H(a,this.game,null);r.isPossible&&(this.cards=r.cards,this.cards=this.cards.concat(t),this.sfLength=r.sfLength)}return this.cards[0]&&13===this.cards[0].rank?this.descr="Royal Flush":this.cards.length>=this.game.sfQualify&&(this.descr=this.name+", "+this.cards[0].toString().slice(0,-1)+i+" High"),this.cards.length>=this.game.sfQualify},a}(n),l=function(s){function a(a,t,i){return s.call(this,a,t,i)||this}return t(a,s),a.prototype.solve=function(){return this.resetWildCards(),s.prototype.solve.call(this)&&"Royal Flush"===this.descr},a}(h),d=function(s){function a(a,t,i){return s.call(this,a,t,i)||this}return t(a,s),a.prototype.solve=function(){var a=0;this.resetWildCards();var t=s.prototype.solve.call(this);if(t&&this.cards){for(a=0;a<this.game.sfQualify&&a<this.cards.length;a++)if(this.cards[a].value===this.game.wildValue){t=!1,this.descr="Wild Royal Flush";break}a===this.game.sfQualify&&(this.descr="Royal Flush")}return t},a}(l),c=function(s){function a(a,t,i){return s.call(this,a,t,i)||this}return t(a,s),a.prototype.solve=function(){var a=0;this.resetWildCards();var t=s.prototype.solve.call(this);if(t&&this.cards){for(a=0;a<this.game.sfQualify&&a<this.cards.length;a++)if(this.cards[a].value===this.game.wildValue){this.descr="Wild Royal Flush";break}a===this.game.sfQualify&&(t=!1,this.descr="Royal Flush")}return t},a}(l),u=function(s){function a(a,t,i){return s.call(this,a,"Five of a Kind",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++)if(5===this.getNumCardsByRank(s)){this.cards=this.values[s]||[];for(var a=0;a<this.wilds.length&&this.cards.length<5;a++){var t=this.wilds[a];this.cards?t.rank=this.cards[0].rank:t.rank=r.length-1,t.wildValue=r[t.rank],this.cards.push(t)}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-5));break}return this.cards.length>=5&&(this.descr=this.name+", "+this.cards[0].toString().slice(0,-1)+"'s"),this.cards.length>=5},a}(n),o=function(s){function a(a,t,i){return s.call(this,a,"Four of a Kind with Pair or Better",t,i)||this}return t(a,s),a.prototype.solve=function(){var s;this.resetWildCards();for(var a=0;a<this.values.length;a++)if(4===this.getNumCardsByRank(a)){this.cards=this.values[a]||[];for(var t=0;t<this.wilds.length&&this.cards.length<4;t++){var i=this.wilds[t];this.cards?i.rank=this.cards[0].rank:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i)}break}if(4===this.cards.length)for(a=0;a<this.values.length;a++)if((!(s=this.values[a])||this.cards[0].wildValue!==s[0].wildValue)&&this.getNumCardsByRank(a)>=2){this.cards=this.cards.concat(s||[]);for(t=0;t<this.wilds.length;t++){-1===(i=this.wilds[t]).rank&&(s?i.rank=s[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-6));break}if(this.cards.length>=6){var e=this.cards[0].toString().slice(0,-1)+"'s over "+this.cards[4].toString().slice(0,-1)+"'s";this.descr=this.name+", "+e}return this.cards.length>=6},a}(n),g=function(s){function a(a,t,i){return s.call(this,a,"Four of a Kind",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++)if(4===this.getNumCardsByRank(s)){this.cards=this.values[s]||[];for(var a=0;a<this.wilds.length&&this.cards.length<4;a++){var t=this.wilds[a];this.cards?t.rank=this.cards[0].rank:t.rank=r.length-1,t.wildValue=r[t.rank],this.cards.push(t)}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-4));break}return this.cards.length>=4&&(this.game.noKickers&&(this.cards.length=4),this.descr=this.name+", "+this.cards[0].toString().slice(0,-1)+"'s"),this.cards.length>=4},a}(n),f=function(s){function a(a,t,i){return s.call(this,a,"Four Wild Cards",t,i)||this}return t(a,s),a.prototype.solve=function(){return 4===this.wilds.length&&(this.cards=this.wilds,this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-4))),this.cards.length>=4&&(this.game.noKickers&&(this.cards.length=4),this.descr=this.name),this.cards.length>=4},a}(n),w=function(s){function a(a,t,i){return s.call(this,a,"Three of a Kind with Two Pair",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++)if(3===this.getNumCardsByRank(s)){this.cards=this.values[s]||[];for(var a=0;a<this.wilds.length&&this.cards.length<3;a++){var t=this.wilds[a];this.cards?t.rank=this.cards[0].rank:t.rank=r.length-1,t.wildValue=r[t.rank],this.cards.push(t)}break}if(3===this.cards.length)for(s=0;s<this.values.length;s++){var i;if(!(i=this.values[s])||this.cards[0].wildValue!==i[0].wildValue){if(this.cards.length>5&&2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(i||[]);for(a=0;a<this.wilds.length;a++){-1===(t=this.wilds[a]).rank&&(i?t.rank=i[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?t.rank=r.length-2:t.rank=r.length-1,t.wildValue=r[t.rank],this.cards.push(t))}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-4));break}if(2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(i);for(a=0;a<this.wilds.length;a++){-1===(t=this.wilds[a]).rank&&(i?t.rank=i[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?t.rank=r.length-2:t.rank=r.length-1,t.wildValue=r[t.rank],this.cards.push(t))}}}}if(this.cards.length>=7){var e=this.cards[0].toString().slice(0,-1)+"'s over "+this.cards[3].toString().slice(0,-1)+"'s & "+this.cards[5].value+"'s";this.descr=this.name+", "+e}return this.cards.length>=7},a}(n),k=function(s){function a(a,t,i){return s.call(this,a,"Full House",t,i)||this}return t(a,s),a.prototype.solve=function(){var s;this.resetWildCards();for(var a=0;a<this.values.length;a++)if(3===this.getNumCardsByRank(a)){this.cards=this.values[a]||[];for(var t=0;t<this.wilds.length&&this.cards.length<3;t++){var i=this.wilds[t];this.cards?i.rank=this.cards[0].rank:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i)}break}if(3===this.cards.length)for(a=0;a<this.values.length;a++)if((!(s=this.values[a])||this.cards[0].wildValue!==s[0].wildValue)&&this.getNumCardsByRank(a)>=2){this.cards=this.cards.concat(s||[]);for(t=0;t<this.wilds.length;t++){-1===(i=this.wilds[t]).rank&&(s?i.rank=s[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-5));break}if(this.cards.length>=5){var e=this.cards[0].toString().slice(0,-1)+"'s over "+this.cards[3].toString().slice(0,-1)+"'s";this.descr=this.name+", "+e}return this.cards.length>=5},a}(n),v=function(s){function a(a,t,i){return s.call(this,a,"Flush",t,i)||this}return t(a,s),a.prototype.solve=function(){for(var s in this.sfLength=0,this.resetWildCards(),this.suits){var a=this.getCardsForFlush(s,!0);if(a.length>=this.game.sfQualify){this.cards=a;break}}return this.cards.length>=this.game.sfQualify&&(this.descr=this.name+", "+this.cards[0].toString().slice(0,-1)+s+" High",this.sfLength=this.cards.length,this.cards.length<this.game.cardsInHand&&(this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-this.cards.length)))),this.cards.length>=this.game.sfQualify},a}(n),H=function(s){function a(a,t,i){return s.call(this,a,"Straight",t,i)||this}t(a,s);var i=a.prototype;return i.solve=function(){var s,a;if(this.resetWildCards(),1===this.game.wheelStatus){if(this.cards=this.getWheel(),this.cards.length){for(var t=0,i=0;i<this.cards.length;i++)(s=this.cards[i]).value===this.game.wildValue&&(t+=1),0===s.rank&&(s.rank=r.indexOf("A"),s.wildValue="A","1"===s.value&&(s.value="A"));for(this.cards=this.cards.sort(e.sort);t<this.wilds.length&&this.cards.length<this.game.cardsInHand;t++)(s=this.wilds[t]).rank=r.indexOf("A"),s.wildValue="A",this.cards.push(s);return this.descr=this.name+", Wheel",this.sfLength=this.sfQualify,"A"===this.cards[0].value?this.cards=this.cards.concat(this.nextHighest().slice(1,this.game.cardsInHand-this.cards.length+1)):this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-this.cards.length)),!0}this.resetWildCards()}this.cards=this.getGaps(null);for(i=0;i<this.wilds.length;i++){if(s=this.wilds[i],a=this.getGaps(this.cards.length),this.cards.length===a.length)this.cards[0].rank<r.length-1?(s.rank=this.cards[0].rank+1,s.wildValue=r[s.rank],this.cards.push(s)):(s.rank=this.cards[this.cards.length-1].rank-1,s.wildValue=r[s.rank],this.cards.push(s));else for(var n=1;n<this.cards.length;n++)if(this.cards[n-1].rank-this.cards[n].rank>1){s.rank=this.cards[n-1].rank-1,s.wildValue=r[s.rank],this.cards.push(s);break}this.cards=this.cards.sort(e.sort)}return this.cards.length>=this.game.sfQualify&&(this.descr=this.name+", "+this.cards[0].toString().slice(0,-1)+" High",this.cards=this.cards.slice(0,this.game.cardsInHand),this.sfLength=this.cards.length,this.cards.length<this.game.cardsInHand&&(0===this.cards[this.sfLength-1].rank?this.cards=this.cards.concat(this.nextHighest().slice(1,this.game.cardsInHand-this.cards.length+1)):this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-this.cards.length)))),this.cards.length>=this.game.sfQualify},i.getGaps=function(s){var a,t,i,h,l,d,c,u,o,g=n.stripWilds(this.cardPool,this.game);for(a=g[0],t=g[1],i=0;i<t.length;i++)"A"===(h=t[i]).wildValue&&t.push(new e("1"+h.suit));for(t=t.sort(e.sort),s?i=t[0].rank+1:(s=this.game.sfQualify,i=r.length),l=[];i>0;i--){d=[],c=0;for(var f=0;f<t.length;f++)if(!((h=t[f]).rank>i))if(null===(o=(u=d[d.length-1])?u.rank-h.rank:i-h.rank))d.push(h);else{if(s<c+o+d.length)break;o>0&&(d.push(h),c+=o-1)}if(d.length>l.length&&(l=d.slice()),this.game.sfQualify-l.length<=a.length)break}return l},i.getWheel=function(){var s,a,t,i,h,l,d,c=n.stripWilds(this.cardPool,this.game);for(s=c[0],a=c[1],t=0;t<a.length;t++)"A"===(i=a[t]).wildValue&&a.push(new e("1"+i.suit));for(a=a.sort(e.sort),h=[],l=0,t=this.game.sfQualify-1;t>=0;t--){d=!1;for(var u=0;u<a.length;u++)if(!((i=a[u]).rank>t)){if(i.rank<t)break;h.push(i),d=!0;break}if(!d){if(!(l<s.length))return[];s[l].rank=t,s[l].wildValue=r[t],h.push(s[l]),l+=1}}return h},a}(n),p=function(s){function a(a,t,i){return s.call(this,a,"Two Three Of a Kind",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++){var a=this.values[s];if(this.cards.length>0&&3===this.getNumCardsByRank(s)){this.cards=this.cards.concat(a||[]);for(var t=0;t<this.wilds.length;t++){-1===(i=this.wilds[t]).rank&&(a?i.rank=a[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-6));break}if(3===this.getNumCardsByRank(s)){this.cards=this.cards.concat(a);for(t=0;t<this.wilds.length;t++){var i;-1===(i=this.wilds[t]).rank&&(a?i.rank=a[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}}}if(this.cards.length>=6){var e=this.cards[0].toString().slice(0,-1)+"'s & "+this.cards[3].toString().slice(0,-1)+"'s";this.descr=this.name+", "+e}return this.cards.length>=6},a}(n),m=function(s){function a(a,t,i){return s.call(this,a,"Three of a Kind",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++)if(3===this.getNumCardsByRank(s)){this.cards=this.values[s]||[];for(var a=0;a<this.wilds.length&&this.cards.length<3;a++){var t=this.wilds[a];this.cards?t.rank=this.cards[0].rank:t.rank=r.length-1,t.wildValue=r[t.rank],this.cards.push(t)}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-3));break}return this.cards.length>=3&&(this.game.noKickers&&(this.cards.length=3),this.descr=this.name+", "+this.cards[0].toString().slice(0,-1)+"'s"),this.cards.length>=3},a}(n),b=function(s){function a(a,t,i){return s.call(this,a,"Three Pair",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++){var a=this.values[s];if(this.cards.length>2&&2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(a||[]);for(var t=0;t<this.wilds.length;t++){-1===(i=this.wilds[t]).rank&&(a?i.rank=a[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-6));break}if(this.cards.length>0&&2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(a||[]);for(t=0;t<this.wilds.length;t++){-1===(i=this.wilds[t]).rank&&(a?i.rank=a[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}}else if(2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(a);for(t=0;t<this.wilds.length;t++){var i;-1===(i=this.wilds[t]).rank&&(a?i.rank=a[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}}}if(this.cards.length>=6){var e=this.cards[0].toString().slice(0,-1)+"'s & "+this.cards[2].toString().slice(0,-1)+"'s & "+this.cards[4].toString().slice(0,-1)+"'s";this.descr=this.name+", "+e}return this.cards.length>=6},a}(n),V=function(s){function a(a,t,i){return s.call(this,a,"Two Pair",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++){var a=this.values[s];if(this.cards.length>0&&2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(a||[]);for(var t=0;t<this.wilds.length;t++){-1===(i=this.wilds[t]).rank&&(a?i.rank=a[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-4));break}if(2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(a);for(t=0;t<this.wilds.length;t++){var i;-1===(i=this.wilds[t]).rank&&(a?i.rank=a[0].rank:this.cards[0].rank===r.length-1&&1===this.game.wildStatus?i.rank=r.length-2:i.rank=r.length-1,i.wildValue=r[i.rank],this.cards.push(i))}}}if(this.cards.length>=4){this.game.noKickers&&(this.cards.length=4);var e=this.cards[0].toString().slice(0,-1)+"'s & "+this.cards[2].toString().slice(0,-1)+"'s";this.descr=this.name+", "+e}return this.cards.length>=4},a}(n),y=function(s){function a(a,t,i){return s.call(this,a,"Pair",t,i)||this}return t(a,s),a.prototype.solve=function(){this.resetWildCards();for(var s=0;s<this.values.length;s++)if(2===this.getNumCardsByRank(s)){this.cards=this.cards.concat(this.values[s]||[]);for(var a=0;a<this.wilds.length&&this.cards.length<2;a++){var t=this.wilds[a];this.cards?t.rank=this.cards[0].rank:t.rank=r.length-1,t.wildValue=r[t.rank],this.cards.push(t)}this.cards=this.cards.concat(this.nextHighest().slice(0,this.game.cardsInHand-2));break}return this.cards.length>=2&&(this.game.noKickers&&(this.cards.length=2),this.descr=this.name+", "+this.cards[0].toString().slice(0,-1)+"'s"),this.cards.length>=2},a}(n),S=function(s){function a(a,t,i){return s.call(this,a,"High Card",t,i)||this}return t(a,s),a.prototype.solve=function(){this.cards=this.cardPool.slice(0,this.game.cardsInHand);for(var s=0;s<this.cards.length;s++){this.cards[s];this.cards[s].value===this.game.wildValue&&(this.cards[s].wildValue="A",this.cards[s].rank=r.indexOf("A"))}return this.game.noKickers&&(this.cards.length=1),this.cards=this.cards.sort(e.sort),this.descr=this.cards[0].toString().slice(0,-1)+" High",!0},a}(n),Q=function(){function s(s){a(this,"baseHand",null),a(this,"hiHand",null),a(this,"loHand",null),a(this,"game",null),a(this,"loGame",new A("paigowpokerlo")),a(this,"hiGame",new A("paigowpokerhi")),this.baseHand=null,this.hiHand=null,this.loHand=null,this.game=null,this.loGame=new A("paigowpokerlo"),this.hiGame=new A("paigowpokerhi"),Array.isArray(s)?this.baseHand=n.solve(s,new A("paigowpokerfull"),null):this.baseHand=s,this.game=this.baseHand.game}var t=s.prototype;return t.splitHouseWay=function(){var s,a,t=this.game.handValues.length-this.baseHand.rank,i=this.game.handValues[t];if(i===u)"K"===this.baseHand.cards[5].value&&"K"===this.baseHand.cards[6].value?(a=this.baseHand.cards.slice(5,7),s=this.baseHand.cards.slice(0,5)):(a=this.baseHand.cards.slice(0,2),s=this.baseHand.cards.slice(2,7));else if(i===o)"A"===this.baseHand.cards[0].wildValue&&"K"!==this.baseHand.cards[4].value?(s=this.baseHand.cards.slice(0,2),a=this.baseHand.cards.slice(2,4),s=s.concat(this.baseHand.cards.slice(4,7))):(s=this.baseHand.cards.slice(0,4),a=this.baseHand.cards.slice(4,6),s.push(this.baseHand.cards[6]));else if(i===h||i===v||i===H){var e,l=new A("paigowpokeralt"),d=n.solve(this.baseHand.cards,l,null),c=l.handValues.length-d.rank;if(l.handValues[c]===g)s=(e=this.getSFData(d.cards))[0],a=e[1];else if(l.handValues[c]===k)s=d.cards.slice(0,3),a=d.cards.slice(3,5),s=s.concat(d.cards.slice(5,7));else if(l.handValues[c]===m)s=(e=this.getSFData(d.cards))[0],a=e[1];else if(l.handValues[c]===b)a=d.cards.slice(0,2),s=d.cards.slice(2,7);else if(l.handValues[c]===V)d.cards[0].rank<6?"A"===d.cards[4].wildValue?(s=d.cards.slice(0,4),a=d.cards.slice(4,6),s.push(d.cards[6])):(s=(e=this.getSFData(d.cards))[0],a=e[1]):d.cards[0].rank<10?"A"===d.cards[4].wildValue?(s=d.cards.slice(0,4),a=d.cards.slice(4,6),s.push(d.cards[6])):(s=d.cards.slice(0,2),a=d.cards.slice(2,4),s=s.concat(d.cards.slice(4,7))):"A"!==d.cards[0].wildValue&&d.cards[2].rank<6&&"A"===d.cards[4].wildValue?(s=d.cards.slice(0,4),a=d.cards.slice(4,6),s.push(d.cards[6])):(s=d.cards.slice(0,2),a=d.cards.slice(2,4),s=s.concat(d.cards.slice(4,7)));else if(l.handValues[c]===y)if(d.cards[0].rank>=r.indexOf("T")&&d.cards[0].rank<=r.indexOf("K")&&"A"===d.cards[2].wildValue){var f=d.cards.slice(0,2);f=f.concat(d.cards.slice(3,7)),(e=this.getSFData(f))[0]?(s=e[0],(a=e[1]).push(d.cards[2])):(s=d.cards.slice(0,2),a=d.cards.slice(2,4),s=s.concat(d.cards.slice(4,7)))}else(e=this.getSFData(d.cards.slice(2,7)))[0]?(s=e[0],a=d.cards.slice(0,2)):(s=(e=this.getSFData(d.cards))[0],a=e[1]);else s=(e=this.getSFData(d.cards))[0],a=e[1]}else i===g?this.baseHand.cards[0].rank<6||this.baseHand.cards[0].rank<10&&"A"===this.baseHand.cards[4].wildValue?(s=this.baseHand.cards.slice(0,4),a=this.baseHand.cards.slice(4,6),s.push(this.baseHand.cards[6])):(s=this.baseHand.cards.slice(0,2),a=this.baseHand.cards.slice(2,4),s=s.concat(this.baseHand.cards.slice(4,7))):i===p?(a=this.baseHand.cards.slice(0,2),(s=this.baseHand.cards.slice(3,6)).push(this.baseHand.cards[2]),s.push(this.baseHand.cards[6])):i===w?(s=this.baseHand.cards.slice(0,3),a=this.baseHand.cards.slice(3,5),s=s.concat(this.baseHand.cards.slice(5,7))):i===k?"2"===this.baseHand.cards[3].wildValue&&"A"===this.baseHand.cards[5].wildValue&&"K"===this.baseHand.cards[6].wildValue?(s=this.baseHand.cards.slice(0,5),a=this.baseHand.cards.slice(5,7)):(s=this.baseHand.cards.slice(0,3),a=this.baseHand.cards.slice(3,5),s=s.concat(this.baseHand.cards.slice(5,7))):i===m?"A"===this.baseHand.cards[0].wildValue?(s=this.baseHand.cards.slice(0,2),a=this.baseHand.cards.slice(2,4),s=s.concat(this.baseHand.cards.slice(4,7))):(s=this.baseHand.cards.slice(0,3),a=this.baseHand.cards.slice(3,5),s=s.concat(this.baseHand.cards.slice(5,7))):i===b?(a=this.baseHand.cards.slice(0,2),s=this.baseHand.cards.slice(2,7)):i===V?this.baseHand.cards[0].rank<6?(s=this.baseHand.cards.slice(0,4),a=this.baseHand.cards.slice(4,6),s.push(this.baseHand.cards[6])):this.baseHand.cards[0].rank<10?"A"===this.baseHand.cards[4].wildValue?(s=this.baseHand.cards.slice(0,4),a=this.baseHand.cards.slice(4,6),s.push(this.baseHand.cards[6])):(s=this.baseHand.cards.slice(0,2),a=this.baseHand.cards.slice(2,4),s=s.concat(this.baseHand.cards.slice(4,7))):"A"!==this.baseHand.cards[0].wildValue&&this.baseHand.cards[2].rank<6&&"A"===this.baseHand.cards[4].wildValue?(s=this.baseHand.cards.slice(0,4),a=this.baseHand.cards.slice(4,6),s.push(this.baseHand.cards[6])):(s=this.baseHand.cards.slice(0,2),a=this.baseHand.cards.slice(2,4),s=s.concat(this.baseHand.cards.slice(4,7))):i===y?(s=this.baseHand.cards.slice(0,2),a=this.baseHand.cards.slice(2,4),s=s.concat(this.baseHand.cards.slice(4,7))):(s=[this.baseHand.cards[0]],a=this.baseHand.cards.slice(1,3),s=s.concat(this.baseHand.cards.slice(3,7)));this.hiHand=n.solve(s,this.hiGame,null),this.loHand=n.solve(a,this.loGame,null)},t.getSFData=function(s){for(var a,t,i,r,n=[new h(s,new A("paigowpokersf7"),null),new h(s,new A("paigowpokersf6"),null),new h(s,this.game,null),new v(s,new A("paigowpokersf7"),null),new v(s,new A("paigowpokersf6"),null),new v(s,this.game,null),new H(s,new A("paigowpokersf7"),null),new H(s,new A("paigowpokersf6"),null),new H(s,this.game,null)],l=0;l<n.length;l++){var d=n[l];if(d.isPossible)if(7===d.sfLength?t=[d.cards[0],d.cards[1]]:6===d.sfLength?(t=[d.cards[0]],s.length>6&&t.push(d.cards[6])):s.length>5&&(t=[d.cards[5]],s.length>6&&t.push(d.cards[6])),t)t=t.sort(e.sort),(!i||i[0].rank<t[0].rank||i.length>1&&i[0].rank===t[0].rank&&i[1].rank<t[1].rank)&&(i=t,r=d);else if(!r){r=d;break}}return r&&(a=7===r.sfLength?r.cards.slice(2,7):6===r.sfLength?r.cards.slice(1,6):r.cards.slice(0,5)),[a,i]},t.qualifiesValid=function(){var s=n.winners([this.hiHand,this.loHand]);return!(1===s.length&&s[0]===this.loHand)},s.winners=function(s,a){if(!s.qualifiesValid())return a.qualifiesValid()?-1:0;if(!a.qualifiesValid())return 1;var t=n.winners([s.hiHand,a.hiHand]),i=n.winners([s.loHand,a.loHand]);return 1===t.length&&t[0]===s.hiHand?1===i.length&&i[0]===s.loHand?1:0:1===i.length&&i[0]===s.loHand?0:-1},s.setHands=function(a,t){var i=[];Array.isArray(a)&&(a=n.solve(a,new A("paigowpokerhi"),null)),i=i.concat(a.cardPool),Array.isArray(t)&&(t=n.solve(t,new A("paigowpokerlo"),null));var r=new s(i=i.concat(t.cardPool));return r.hiHand=a,r.loHand=t,r},s.solve=function(a){var t=new s(a=a||[""]);return t.splitHouseWay(),t},s}(),C={standard:{cardsInHand:5,handValues:[h,g,k,v,H,m,V,y,S],wildValue:null,wildStatus:1,wheelStatus:0,sfQualify:5,lowestQualified:null,noKickers:!1},jacksbetter:{cardsInHand:5,handValues:[h,g,k,v,H,m,V,y,S],wildValue:null,wildStatus:1,wheelStatus:0,sfQualify:5,lowestQualified:["Jc","Jd","4h","3s","2c"],noKickers:!0},joker:{cardsInHand:5,handValues:[d,u,c,h,g,k,v,H,m,V,S],wildValue:"O",wildStatus:1,wheelStatus:0,sfQualify:5,lowestQualified:["4c","3d","3h","2s","2c"],noKickers:!0},deuceswild:{cardsInHand:5,handValues:[d,f,c,u,h,g,k,v,H,m,S],wildValue:"2",wildStatus:1,wheelStatus:0,sfQualify:5,lowestQualified:["5c","4d","3h","3s","3c"],noKickers:!0},threecard:{cardsInHand:3,handValues:[h,m,H,v,y,S],wildValue:null,wildStatus:1,wheelStatus:0,sfQualify:3,lowestQualified:["Qh","3s","2c"],noKickers:!1},fourcard:{cardsInHand:4,handValues:[g,h,m,v,H,V,y,S],wildValue:null,wildStatus:1,wheelStatus:0,sfQualify:4,lowestQualified:null,noKickers:!0},fourcardbonus:{cardsInHand:4,handValues:[g,h,m,v,H,V,y,S],wildValue:null,wildStatus:1,wheelStatus:0,sfQualify:4,lowestQualified:["Ac","Ad","3h","2s"],noKickers:!0},paigowpokerfull:{cardsInHand:7,handValues:[u,o,h,v,H,g,p,w,k,m,b,V,y,S],wildValue:"O",wildStatus:0,wheelStatus:1,sfQualify:5,lowestQualified:null},paigowpokeralt:{cardsInHand:7,handValues:[g,k,m,b,V,y,S],wildValue:"O",wildStatus:0,wheelStatus:1,sfQualify:5,lowestQualified:null},paigowpokersf6:{cardsInHand:7,handValues:[h,v,H],wildValue:"O",wildStatus:0,wheelStatus:1,sfQualify:6,lowestQualified:null},paigowpokersf7:{cardsInHand:7,handValues:[h,v,H],wildValue:"O",wildStatus:0,wheelStatus:1,sfQualify:7,lowestQualified:null},paigowpokerhi:{cardsInHand:5,handValues:[u,h,g,k,v,H,m,V,y,S],wildValue:"O",wildStatus:0,wheelStatus:1,sfQualify:5,lowestQualified:null},paigowpokerlo:{cardsInHand:2,handValues:[y,S],wildValue:"O",wildStatus:0,wheelStatus:1,sfQualify:5,lowestQualified:null}},A=s("Game",(function(s){a(this,"descr",""),a(this,"cardsInHand",0),a(this,"handValues",[]),a(this,"wildValue",null),a(this,"wildStatus",0),a(this,"wheelStatus",0),a(this,"sfQualify",5),a(this,"lowestQualified",null),a(this,"noKickers",null),this.descr=s,this.cardsInHand=0,this.handValues=[],this.wildValue=null,this.wildStatus=0,this.wheelStatus=0,this.sfQualify=5,this.lowestQualified=null,this.noKickers=null,this.descr&&C[this.descr]||(this.descr="standard"),this.cardsInHand=C[this.descr].cardsInHand,this.handValues=C[this.descr].handValues,this.wildValue=C[this.descr].wildValue,this.wildStatus=C[this.descr].wildStatus,this.wheelStatus=C[this.descr].wheelStatus,this.sfQualify=C[this.descr].sfQualify,this.lowestQualified=C[this.descr].lowestQualified,this.noKickers=C[this.descr].noKickers}));i._RF.pop()}}}));

System.register("chunks:///_virtual/UiPlayerAction.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts"],(function(t){"use strict";var i,e,n,l,o,s,h,a,c,d,b;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,o=t._decorator,s=t.Button,h=t.Label,a=t.Slider,c=t.EventHandler,d=t.Component},function(t){b=t.CommonUtils}],execute:function(){var r;l._RF.push({},"ec929OCe4ZBAqeMtwEIuWKJ","UiPlayerAction",void 0);var C=o.ccclass;t("UiPlayerAction",C("UiPlayerAction")(r=function(t){function l(){for(var i,l=arguments.length,o=new Array(l),s=0;s<l;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,e(n(i),"isChildRegistered",!1),e(n(i),"btnFold",null),e(n(i),"btnCheck",null),e(n(i),"btnCall",null),e(n(i),"lbCall",null),e(n(i),"btnBet",null),e(n(i),"lbBet",null),e(n(i),"btnRaise",null),e(n(i),"lbRaise",null),e(n(i),"btnAllIn",null),e(n(i),"ndBetControl",null),e(n(i),"btnBetMin",null),e(n(i),"btnBetHalf",null),e(n(i),"btnBetPot",null),e(n(i),"btnBetMax",null),e(n(i),"lbBetValue",null),e(n(i),"slBet",null),e(n(i),"turnBet",0),e(n(i),"myBet",0),e(n(i),"myChips",0),e(n(i),"pot",0),e(n(i),"betMin",0),e(n(i),"raiseMin",0),e(n(i),"betStart",0),e(n(i),"raiseStart",0),e(n(i),"betRange",0),e(n(i),"raiseRange",0),e(n(i),"betDisplayValue",0),e(n(i),"raiseDisplayValue",0),e(n(i),"cbFold",null),e(n(i),"cbCall",null),e(n(i),"cbCheck",null),e(n(i),"cbBet",null),e(n(i),"cbRaise",null),e(n(i),"cbAllIn",null),i}i(l,t);var o=l.prototype;return o.childRegistered=function(){var t,i,e,n,l,o,d,b,r,C,u,B,g,v,y,p,k,R,m,f,P,M,A,S,V,F;if(1!=this.isChildRegistered){this.isChildRegistered=!0,this.btnFold=null===(t=this.node.getChildByPath("fold"))||void 0===t?void 0:t.getComponent(s),null===(i=this.btnFold)||void 0===i||i.node.on("click",this.onClickFold.bind(this),this),this.btnCheck=null===(e=this.node.getChildByPath("check"))||void 0===e?void 0:e.getComponent(s),null===(n=this.btnCheck)||void 0===n||n.node.on("click",this.onClickCheck.bind(this),this),this.btnCall=null===(l=this.node.getChildByPath("call"))||void 0===l?void 0:l.getComponent(s),null===(o=this.btnCall)||void 0===o||o.node.on("click",this.onClickCall.bind(this),this),this.lbCall=null===(d=this.btnCall.node.getChildByPath("Label"))||void 0===d?void 0:d.getComponent(h),this.btnBet=null===(b=this.node.getChildByPath("bet"))||void 0===b?void 0:b.getComponent(s),null===(r=this.btnBet)||void 0===r||r.node.on("click",this.onClickBet.bind(this),this),this.lbBet=null===(C=this.btnBet.node.getChildByPath("Label"))||void 0===C?void 0:C.getComponent(h),this.btnRaise=null===(u=this.node.getChildByPath("raise"))||void 0===u?void 0:u.getComponent(s),null===(B=this.btnRaise)||void 0===B||B.node.on("click",this.onClickRaise.bind(this),this),this.lbRaise=null===(g=this.btnRaise.node.getChildByPath("Label"))||void 0===g?void 0:g.getComponent(h),this.btnAllIn=null===(v=this.node.getChildByPath("allin"))||void 0===v?void 0:v.getComponent(s),null===(y=this.btnAllIn)||void 0===y||y.node.on("click",this.onClickAllin.bind(this),this),this.ndBetControl=this.node.getChildByPath("betControll"),this.btnBetMin=null===(p=this.node.getChildByPath("betControll/min"))||void 0===p?void 0:p.getComponent(s),null===(k=this.btnBetMin)||void 0===k||k.node.on("click",this.onClickBetMin.bind(this),this),this.btnBetHalf=null===(R=this.node.getChildByPath("betControll/half"))||void 0===R?void 0:R.getComponent(s),null===(m=this.btnBetHalf)||void 0===m||m.node.on("click",this.onClickBetHalf.bind(this),this),this.btnBetPot=null===(f=this.node.getChildByPath("betControll/pot"))||void 0===f?void 0:f.getComponent(s),null===(P=this.btnBetPot)||void 0===P||P.node.on("click",this.onClickBetPot.bind(this),this),this.btnBetMax=null===(M=this.node.getChildByPath("betControll/max"))||void 0===M?void 0:M.getComponent(s),null===(A=this.btnBetMax)||void 0===A||A.node.on("click",this.onClickBetMax.bind(this),this),this.slBet=null===(S=this.node.getChildByPath("betControll/slBet"))||void 0===S?void 0:S.getComponent(a);var D=new c;D.target=this.node,D.component="UiPlayerAction",D.handler="onSliderChangeBetValue",D.customEventData="???",null===(V=this.slBet)||void 0===V||V.slideEvents.push(D),this.lbBetValue=null===(F=this.node.getChildByPath("betControll/sprBetValue/Label"))||void 0===F?void 0:F.getComponent(h)}},o.onLoad=function(){this.childRegistered()},o.show=function(t,i,e,n,l,o,s,h){if(console.log("minBet:"+t+" / turnBet:"+i+" / pot:"+n+" / bet:"+l+" / chips"+o+" / action"+h),this.childRegistered(),this.betMin=t,this.turnBet=i,this.raiseMin=e,this.pot=n,this.myBet=l,this.myChips=o,this.betDisplayValue=0,this.betStart=0,this.raiseStart=0,this.betRange=0,this.raiseRange=0,0!=i&&0>=o)return console.error("  ? [ 0 != turnBet("+i+") && 0 >= myChips("+o+") ]"),this.btnFold.node.active=!1,this.btnAllIn.node.active=!1,this.btnCheck.node.active=!1,this.btnCall.node.active=!0,this.lbCall.string="Call",this.btnBet.node.active=!1,this.btnRaise.node.active=!1,this.ndBetControl.active=!1,void(this.node.active=!0);if(this.btnFold.node.active=!0,this.btnCheck.node.active=i==l&&1==h,this.btnCall.node.active=i>l,1==this.btnCall.node.active){var a=i-l;a>=this.myChips?this.btnCall.node.active=!1:this.lbCall.string="Call\n("+b.getCurrencyString(a)+")"}this.btnBet.node.active=0==i,this.betStart=0==i?this.betMin:2*i,this.raiseStart=0==i?this.betMin:2*e,this.betRange=o-this.betStart+this.myBet,this.raiseRange=o-this.raiseStart+this.myBet,this.btnRaise.node.active=0!=i&&this.raiseRange>=0&&!1===s&&1==h,this.btnAllIn.node.active=0!=i&&0>this.betRange,1==s&&1==this.btnCall.node.active&&(this.btnAllIn.node.active=!1),0==h&&1==this.btnCall.node.active&&(this.btnAllIn.node.active=!1),this.ndBetControl.active=1==this.btnRaise.node.active||1==this.btnBet.node.active,this.setBetRatio(0),this.node.active=!0},o.hide=function(){this.node.active=!1},o.onClickFold=function(){console.log("onClickFold"),null!=this.cbFold&&this.cbFold()},o.onClickCall=function(){var t=this.turnBet-this.myBet;t>this.myChips&&(t=this.myChips),t+=this.myBet,console.log("onClickCall",t),null!=this.cbCall&&this.cbCall(t)},o.onClickAllin=function(){var t=this.myChips+this.myBet;if(console.log("onClickAllin",t),null!=this.cbAllIn)if(0==this.btnCall.node.active){var i=this.turnBet-this.myBet;i>this.myChips&&(i=this.myChips),i+=this.myBet,this.cbCall(i)}else this.cbAllIn(t)},o.onClickRaise=function(){var t=this.betDisplayValue+this.myBet;console.log("onClickRaise",t),null!=this.cbRaise&&this.cbRaise(t)},o.onClickCheck=function(){console.log("onClickCheck"),null!=this.cbCheck&&this.cbCheck()},o.onClickBet=function(){var t=this.betDisplayValue+this.myBet;console.log("onClickBet",t),null!=this.cbBet&&this.cbBet(t)},o.onClickBetMin=function(){console.log("onClickBetMin"),this.setBetRatio(0)},o.onClickBetHalf=function(){console.log("onClickBetHalf"),this.setBetRatio(.5*this.pot/this.betRange)},o.onClickBetPot=function(){console.log("onClickBetPot"),this.setBetRatio(this.pot/this.betRange)},o.onClickBetMax=function(){console.log("onClickBetMax"),this.setBetRatio(1)},o.onSliderChangeBetValue=function(t){this.setBetRatio(t.progress)},o.setBetRatio=function(t){var i=0,e=0;t>=1?(t=1,i=Math.floor(t*this.betRange),e=Math.floor(t*this.raiseRange)):(i=Math.floor(t*this.betRange),i-=Math.floor(t*this.betRange)%(.5*this.betMin),e=Math.floor(t*this.raiseRange),e-=Math.floor(t*this.raiseRange)%(.5*this.raiseMin)),this.slBet.progress=i/this.betRange,1==this.btnBet.node.active?(this.betDisplayValue=i+this.betStart,this.lbBetValue.string=b.getCurrencyString(this.betDisplayValue),this.lbBet.string="Bet \n("+b.getCurrencyString(this.betDisplayValue)+")"):1==this.btnRaise.node.active&&(this.betDisplayValue=e+this.raiseStart-this.myBet,this.lbBetValue.string=b.getCurrencyString(this.betDisplayValue),this.lbRaise.string="Raise To\n("+b.getCurrencyString(this.betDisplayValue)+")")},l}(d))||r);l._RF.pop()}}}));

System.register("chunks:///_virtual/UiLoginNotice.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,e,n,o,r,c,l,s,a,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized,r=i.defineProperty},function(i){c=i.cclegacy,l=i._decorator,s=i.Label,a=i.Button,u=i.Component}],execute:function(){var p,b,f,h,d,g,v,y,z;c._RF.push({},"f713au+tF1OpYa7sRN3vO/T","UiLoginNotice",void 0);var O=l.ccclass,D=l.property;i("UiLoginNotice",(p=O("UiLoginNotice"),b=D(s),f=D(s),h=D(a),p((v=t((g=function(i){function t(){for(var t,e=arguments.length,c=new Array(e),l=0;l<e;l++)c[l]=arguments[l];return t=i.call.apply(i,[this].concat(c))||this,n(o(t),"lbTitle",v,o(t)),n(o(t),"lbDesc",y,o(t)),n(o(t),"btnOK",z,o(t)),r(o(t),"initialized",!1),t}e(t,i);var c=t.prototype;return c.init=function(){this.lbTitle.string="Notice",this.lbDesc.string="",this.btnOK.node.active=!0,this.btnOK.node.on("click",this.onButtonOkClicked,this)},c.notice=function(i){!1===this.initialized&&(this.init(),this.initialized=!0),this.lbDesc.string=i,this.node.active=!0},c.closePopup=function(){this.node.active=!1},c.onButtonOkClicked=function(i){this.node.active=!1},t}(u)).prototype,"lbTitle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(g.prototype,"lbDesc",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(g.prototype,"btnOK",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));c._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtils.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,i;return{setters:[function(n){t=n.defineProperty},function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"f9a07eQkjRNBpl8ngEgg1Z9","CommonUtils",void 0);var o=n("CommonUtils",function(){function n(){}return n.setDenomination=function(t){!1===isNaN(t)&&(n._denomination=t,n._denomination>=1?(n._maxFraction=0,n._minFraction=0):(n._maxFraction=2,n._minFraction=2))},n.getCurrencyString=function(t){return(t*n._denomination).toFixed(n._maxFraction).toString()},n}());t(o,"_denomination",.01),t(o,"_maxFraction",2),t(o,"_minFraction",2),i._RF.pop()}}}));

System.register("chunks:///_virtual/HistoryManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtils.ts","./Board.ts"],(function(t){"use strict";var e,s,i,r;return{setters:[function(t){e=t.defineProperty},function(t){s=t.cclegacy},function(t){i=t.CommonUtils},function(t){r=t.Board}],execute:function(){var n;t("eHistoryType",void 0),s._RF.push({},"ff87eqZkApLiI8WkiG5GLdZ","HistoryManager",void 0),function(t){t[t.GetCard=0]="GetCard",t[t.Call=1]="Call",t[t.Check=2]="Check",t[t.BlindBet=3]="BlindBet",t[t.Bet=4]="Bet",t[t.Raise=5]="Raise",t[t.Fold=6]="Fold",t[t.AllIn=7]="AllIn",t[t.CommunityCardChange=8]="CommunityCardChange",t[t.Winner=9]="Winner",t[t.Literal=10]="Literal",t[t.ShowDownPlayer=11]="ShowDownPlayer",t[t.ShowDownWin=12]="ShowDownWin",t[t.ForceShow=13]="ForceShow"}(n||(n=t("eHistoryType",{})));t("HistoryManager",function(){function t(){e(this,"hands",[]),e(this,"title",""),e(this,"btnPosition",[-1,-1,-1]),e(this,"cards",[-1,-1,-1,-1,-1]),e(this,"playerCards",[-1,-1]),e(this,"pots",""),e(this,"details",""),e(this,"players",[]),e(this,"event",[]),e(this,"returnValue",0),e(this,"returnPotCount",0),e(this,"startChips",0),e(this,"endChips",0),e(this,"isRecord",!1),e(this,"skip",!1),e(this,"mySeat",-1)}var s=t.prototype;return s.ResetHistory=function(){this.hands=[],this.title="",this.btnPosition=[-1,-1,-1],this.cards=[-1,-1,-1,-1,-1],this.playerCards=[-1,-1],this.pots="",this.details="",this.players=[],this.event=[],this.returnValue=0,this.returnPotCount=0,this.skip=!1,this.isRecord=!1,this.mySeat=-1},s.SaveHistory=function(t){if(0!=this.isRecord){for(var e=0;e<t.length;e++)for(var s=t[e],i=0;i<this.players.length;i++){var r=this.players[i];s.seat==r.seat&&(r.endChips=s.chips)}this._parse();var n={title:this.title,buttons:this.btnPosition,pots:this.pots,cards:this.cards,players:this.players,playerCards:this.playerCards,details:this.details,skip:this.skip};if(this.hands.length>4)for(var a=0;this.hands.length>4;)if(a++,this.hands.pop(),a>100){console.log("max pop count",this.hands.length,a);break}this.hands.unshift(n)}},s.IsPrepare=function(){return this.hands.length>0},s.InitializeHistory=function(t,e){this.title="",this.btnPosition=[-1,-1,-1],this.cards=[-1,-1,-1,-1,-1],this.players=[],this.details="",this.event=[],this.returnValue=0,this.returnPotCount=0,this.mySeat=e;var s=t.dealerSeatPos,n=t.sbSeatPos,a=t.bbSeatPos;this.btnPosition=[s,n,a];for(var h="",o=t.entities,l=0;l<o.length;l++)if(null!=o[l]){var c=!1;o[l].seat==e&&(c=!0),o[l].seat==this.btnPosition[0]&&(h=o[l].name);var d={name:o[l].name,seat:o[l].seat,wait:o[l].wait,sitOut:o[l].isSitOut,isMe:c,fold:-1,cardIndex:[-1,-1],handRank:"",isShow:!1,isWinner:!1,isDraw:!1,isMuck:!1,startChips:o[l].chips,endChips:0,winAmount:0,forceShow:!1};this.players.push(d),this.SeatDetails(o[l].seat,o[l].name,o[l].chips,o[l].wait)}var p=new Date;this.title="Hold'em No Limit ("+i.getCurrencyString(r.small)+"/"+i.getCurrencyString(r.big)+")\n",this.title+="Seat #"+this.btnPosition[0]+"( "+h+" ) is the button - "+p.toLocaleString("en-US"),this.isRecord=!0},s.SetPlayerCards=function(t){this.playerCards=t},s.ForceShowCard=function(e,s,i){for(var r,a=0;a<this.players.length;a++)if(null!=this.players[a]&&this.players[a].seat==e){this.players[a].forceShow=!0,this.players[a].cardIndex=s.slice(),this.players[a].rank=i,r=this.players[a].name+": opens [ "+t._convertCardIndexToCardName(s)+" ] ("+i+")";var h={type:n.ForceShow,desc:r};this.event.push(h);break}},s.SetBoard=function(t,e,s,r){if(!(s<1)){var n=e-this.returnValue;this.pots="",this.cards=t.slice(),this.skip=r,this.pots=i.getCurrencyString(n)+" chips"}},s.Fold=function(t,e){for(var s,i,r=0;r<this.players.length;r++)if(null!=this.players[r]&&this.players[r].seat==t)switch(s=this.players[r].name,e){case"BLIND_BET":this.players[r].fold=0;break;case"SHOW_FLOP":this.players[r].fold=1;break;case"SHOW_TURN":this.players[r].fold=2;break;case"SHOW_RIVER":this.players[r].fold=3;break;default:this.players[r].fold=-1}i=s+": folds";var a={type:n.Fold,desc:i};this.event.push(a)},s.ShowCards=function(e,s,i,r,a){for(var h,o=0;o<this.players.length;o++)null!=this.players[o]&&this.players[o].seat==e&&(this.players[o].name,this.players[o].cardIndex=i.slice(),this.players[o].rank=r,this.players[o].show=a,this.players[o].isMuck=!a);h=1==a?s+": shows ["+t._convertCardIndexToCardName(i)+"] ("+r+")":s+": mucks [** **] (*****)";var l={type:n.ShowDownPlayer,desc:h};this.event.push(l)},s.SetWinners=function(t,e){for(var s=0;s<t.winner.length;s++)for(var i=0;i<this.players.length;i++)0==e&&t.players.length<2?(this.returnValue=t.total,this.returnPotCount--):t.winner[s]==this.players[i].seat&&(0==this.players[i].isWinner&&t.winner.length>1?this.players[i].isDraw=!0:this.players[i].isWinner=!0,this.players[i].winAmount+=t.total)},s.SeatDetails=function(t,e,s,r){var n="Seat #"+t.toString()+": "+e+" ("+i.getCurrencyString(s)+" in the chips)\n";1==r&&(n+="(Wait State)\n"),this.details+=n},s.BlindBet=function(t,e,s){var r;r=t+":  posts "+e+" blind "+i.getCurrencyString(s);var a={type:n.BlindBet,desc:r};this.event.push(a)},s.Bet=function(t,e,s){var r;r=t+": bets "+i.getCurrencyString(e),1==s&&(r+=" and is all in");var a={type:n.Bet,desc:r};this.event.push(a)},s.Raise=function(t,e,s){var r;r=t+": raises to "+i.getCurrencyString(e),1==s&&(r+=" and is all in");var a={type:n.Raise,desc:r};this.event.push(a)},s.Call=function(t,e,s){var r;r=t+": calls "+i.getCurrencyString(e),1==s&&(r+=" and is all in");var a={type:n.Call,desc:r};this.event.push(a)},s.Check=function(t){var e;e=t+": checks";var s={type:n.Check,desc:e};this.event.push(s)},s.CommunityCards=function(e,s,i){var r="";switch(e){case"SHOW_FLOP":r="*** FLOP *** ["+t._convertCardIndexToCardName(i)+"]";break;case"SHOW_TURN":r="*** TURN *** ["+t._convertCardIndexToCardName(s)+"] ["+t._convertCardIndexToCardName(i)+"]";break;case"SHOW_RIVER":r="*** RIVER *** ["+t._convertCardIndexToCardName(s)+"] ["+t._convertCardIndexToCardName(i)+"]"}var a={type:n.CommunityCardChange,desc:r};this.event.push(a)},s.Winner=function(t,e,s,r,a){var h;console.log("Event Winner"),h=s.length>1?s+" chop the pot "+i.getCurrencyString(r)+" from pot"+t+"("+e+")":e.length>1||1==a?s+" collected "+i.getCurrencyString(r)+" from pot #"+t+" ( "+e+" )":s+" returned "+i.getCurrencyString(r);var o={type:n.Winner,desc:h};this.event.push(o)},s.SetLiteral=function(t){var e={type:n.Literal,desc:t};this.event.push(e)},s.GetHandsHistory=function(){return this.hands},s._parse=function(){var t="";this.event.forEach((function(e){switch(e.type){case n.GetCard:t+=e.name+" Get Card "+e.card+"\n";break;case n.CommunityCardChange:case n.BlindBet:case n.Bet:case n.Fold:case n.Check:case n.Call:case n.ShowDownPlayer:case n.Raise:case n.Winner:case n.Literal:case n.ForceShow:t+=e.desc+"\n"}})),this.details+=t},t._convertCardIndexToCardName=function(t){for(var e=["A","K","Q","J","10","9","8","7","6","5","4","3","2","A","K","Q","J","10","9","8","7","6","5","4","3","2","A","K","Q","J","10","9","8","7","6","5","4","3","2","A","K","Q","J","T","9","8","7","6","5","4","3","2"],s=[],i=0;i<t.length;i++)s.push(e[t[i]]);return s},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CommonUtils.ts","./UiSeat.ts","./Board.ts","./SeatSelectUi.ts","./AudioManager.ts","./UiPot.ts","./colyseus.mjs_cjs=&original=.js","./NetworkManager.ts","./UiPlayerAction.ts","./UiEntity.ts","./UiNotice.ts","./UiPopup.ts","./UiPass.ts","./UiHandsHistory.ts","./PokerEvaluator.ts","./UiBuyIn.ts","./HistoryManager.ts","./UiBuyChips.ts","./UiTable.ts","./UiLoginNotice.ts","./UiLogin.ts","./Main.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});